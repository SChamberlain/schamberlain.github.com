I"ë)<h2 id="what-is-phylopic">What is PhyloPic?</h2>

<p>PhyloPic is an awesome new service - Iâ€™ll let the creator, <a href="http://tmkeesey.net/">Mike Keesey</a>, explain what it is (paraphrasing here):</p>

<blockquote>
  <p>PhyloPic stores silhouette images of organisms, and each image is associated with taxonomic names, and stores the taxonomy of all taxa, allowing searching by taxonomic names. Anyone can submit silhouettes to PhyloPic.</p>
</blockquote>

<p>What is a silhouette?  Itâ€™s like this:</p>

<p><img src="http://phylopic.org/assets/images/submissions/bedd622a-4de2-4067-8c70-4aa44326d229.128.png" alt="A silhouette" /></p>

<p><em>by Gareth Monger</em></p>

<p>What makes PhyloPic not just awesome, but super awesome? All or most images are licensed under <a href="http://creativecommons.org/">Creative Commons licenses</a>. This means you can use the silhouettes without having to ask or pay - just attribute.</p>

<hr />

<h2 id="what-is-fylopic">What is fylopic?</h2>

<p>The idea behind Fylopic is to create modular bits and pieces (i.e., functions) to allow you to add silhouettes to not only ggplot2 plots, but base plots as well. That is, you can simply load fylopic in your R session, and add some silhouettes to your phylogeny, or your barchart, etc. - that is, <code class="highlighter-rouge">fylopic</code> is meant to be a helper in your workflow to add in silhouettes to visualizations.</p>

<p>Some people prefer base plots while others prefer ggplot2 plots (me!), so it would be nice to have both options. Phylogenies at the moment render faster in base plots. I donâ€™t yet have implementations for base plots, but will come soon, or you can send a pull request to add it.</p>

<p>One interesting use case could be to be able to get a set of silhouettes, then get a phylogeny for taxa associatd with the silhouettess using the NCBI taxonomy, but itâ€™s not easily available yet (though I may be able to use <a href="https://github.com/bendmorris/phylocommons">Ben Morrisâ€™ phylocommons</a> soon. This isnâ€™t doable yet, so in the example below the function <code class="highlighter-rouge">make_phylo</code> creates a phylogeny using <code class="highlighter-rouge">ape::rcoal</code>.</p>

<p>You could also do the reverse -&gt; you have a phylogeny and then you could search Phylopic for silhouettes.</p>

<hr />

<h2 id="info">Info</h2>

<p>Check out the Phylopic website <a href="http://phylopic.org/">here</a>, and Phylopic API developer documentation <a href="http://phylopic.org/api/">here</a>.</p>

<p>Also check out Ben Morrisâ€™ Python wrapper to Phylopic <a href="https://github.com/bendmorris/python-phylopic">here</a>.</p>

<hr />

<h2 id="what-can-you-do-with-fylopic">What can you do with fylopic?</h2>

<hr />

<h4 id="install-fylopic">Install fylopic</h4>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">install.packages</span><span class="p">(</span><span class="s2">"devtools"</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">devtools</span><span class="p">)</span><span class="w">
</span><span class="n">install_github</span><span class="p">(</span><span class="s2">"fylopic"</span><span class="p">,</span><span class="w"> </span><span class="s2">"sckott"</span><span class="p">)</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">library</span><span class="p">(</span><span class="n">fylopic</span><span class="p">,</span><span class="w"> </span><span class="n">quietly</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">)</span></code></pre></figure>

<hr />

<h4 id="plot-a-phylogeny-with-silhouettes-at-the-tips">Plot a phylogeny with silhouettes at the tips</h4>

<p>Here, I search for names based on keyword <em>Homo sapiens</em> - which returns many matche codes. With those results we search for any silhouettes associated with those codes. Then we download images. Finally, make a phylogeny with the silhouettes at the tips. Note that in this eample the phylogeny is just a random coalescent tree made using <code class="highlighter-rouge">ape::rcoal</code> - obviously, in the real world youâ€™d want to do something more useful.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="c1">## search on Homo sapiens</span><span class="w">
</span><span class="n">searchres</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">search_text</span><span class="p">(</span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Homo sapiens"</span><span class="p">,</span><span class="w"> </span><span class="n">options</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"names"</span><span class="p">)</span><span class="w">

</span><span class="c1">### which returns UUIDs</span><span class="w">
</span><span class="n">searchres</span><span class="p">[</span><span class="m">1</span><span class="o">:</span><span class="m">3</span><span class="p">]</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-text" data-lang="text">[1] "74aea16b-666b-497a-b2cb-72201ad75a8e"
[2] "1ee65cf3-53db-4a52-9960-a9f7093d845d"
[3] "cc9ad8ee-3a82-4add-8d50-bc78f4ff6956"</code></pre></figure>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="c1">## search for images based on the UUIds</span><span class="w">
</span><span class="n">output</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">search_images</span><span class="p">(</span><span class="n">uuid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">searchres</span><span class="p">,</span><span class="w"> </span><span class="n">options</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"pngFiles"</span><span class="p">,</span><span class="w"> </span><span class="s2">"credit"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"canonicalName"</span><span class="p">))</span><span class="w">

</span><span class="c1">### we got eight matches</span><span class="w">
</span><span class="n">output</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-text" data-lang="text">$`15444b9c-f17f-4d6e-89b5-5990096bcfb0`
$`15444b9c-f17f-4d6e-89b5-5990096bcfb0`$supertaxa
[1] "e547cd01-7dd1-495b-8239-52cf9971a609"
[2] "bd88f674-6976-4cb2-a46e-e6a12a8ba463"


$`fedf0e5f-f20a-442c-accf-eb84a3af8c6b`
$`fedf0e5f-f20a-442c-accf-eb84a3af8c6b`$supertaxa
[1] "e547cd01-7dd1-495b-8239-52cf9971a609"
[2] "bd88f674-6976-4cb2-a46e-e6a12a8ba463"


$`a88d3a4c-44d3-409e-87b6-516bd188c709`
$`a88d3a4c-44d3-409e-87b6-516bd188c709`$supertaxa
[1] "e547cd01-7dd1-495b-8239-52cf9971a609"
[2] "bd88f674-6976-4cb2-a46e-e6a12a8ba463"


$`d88164ec-3152-444b-b41c-4757a344a764`
$`d88164ec-3152-444b-b41c-4757a344a764`$supertaxa
[1] "9c6af553-390c-4bdd-baeb-6992cbc540b1"


$`da5eaeb7-1ed2-4b2e-ad4a-49993881d706`
$`da5eaeb7-1ed2-4b2e-ad4a-49993881d706`$supertaxa
[1] "9c6af553-390c-4bdd-baeb-6992cbc540b1"</code></pre></figure>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="c1">## download images</span><span class="w">
</span><span class="n">myobjs</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">get_image</span><span class="p">(</span><span class="n">uuids</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">output</span><span class="p">,</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"128"</span><span class="p">)</span><span class="w">

</span><span class="c1">## make the phylogeny</span><span class="w">
</span><span class="n">make_phylo</span><span class="p">(</span><span class="n">pngobj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">myobjs</span><span class="p">)</span></code></pre></figure>

<p><img src="/public/img/2013-06-01-fylopic/unnamed-chunk-1.png" alt="center" /></p>

<hr />

<h4 id="plot-a-silhouette-behind-a-plot">Plot a silhouette behind a plot</h4>

<p>Notice in the below example that you can use normal <code class="highlighter-rouge">ggplot2</code> syntax, and simply add another layer (<code class="highlighter-rouge">add_phylopic</code> from <code class="highlighter-rouge">fylopic</code>) to the plot.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">library</span><span class="p">(</span><span class="n">ggplot2</span><span class="p">)</span><span class="w">
</span><span class="n">img</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">get_image</span><span class="p">(</span><span class="s2">"27356f15-3cf8-47e8-ab41-71c6260b2724"</span><span class="p">,</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"512"</span><span class="p">)[[</span><span class="m">1</span><span class="p">]]</span><span class="w">
</span><span class="n">qplot</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Sepal.Length</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Sepal.Width</span><span class="p">,</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iris</span><span class="p">,</span><span class="w"> </span><span class="n">geom</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"point"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">add_phylopic</span><span class="p">(</span><span class="n">img</span><span class="p">)</span></code></pre></figure>

<p><img src="/public/img/2013-06-01-fylopic/unnamed-chunk-2.png" alt="center" /></p>

<hr />

<h2 id="whats-next">Whatâ€™s next?</h2>

<p>This is a side project, so if anyone has interest in helping please do contribute code, report bugs, request features, etc.</p>
:ET