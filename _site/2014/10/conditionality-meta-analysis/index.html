<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
  <link href="http://gmpg.org/xfn/11" rel="profile">

  <title>
    Conditionality meta-analysis data &middot; 
    Recology, R ecology
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/hyde.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Open+Sans:300,400italic,400,600,700|Abril+Fatface">


  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/favicon.ico">
  <link rel="shortcut icon" href="/public/favicon.ico">
  <link href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.css" rel="stylesheet">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>


  <body class="theme-base-0f layout-reverse">

    <header class="masthead">
      <div class="masthead-inner">
        <h1>Recology</h1>
        <!-- <h1> <a href="http://recology.info/">Recology</a></h1> -->
        <p class="lead">R/etc.</p>

        <div class="colophon">
          <ul class="colophon-links">
            <li>
              <a href="/"><i class="fa fa-home fa-lg"></i></a>&nbsp;
              <a href="/about"><i class="fa fa-info-circle fa-lg"></i></a>&nbsp;
              <a href="/rresources"><i class="fa fa-book fa-lg"></i></a>&nbsp;
              <a href="http://rforcats.net/" rel><i class="fa fa-graduation-cap fa-lg"></i></a>&nbsp;
              <a href="http://feeds.feedburner.com/github/wpna"><i class="fa fa-rss fa-lg"></i></a>&nbsp;
              <a href="https://twitter.com/recology_"><i class="fa fa-twitter fa-lg"></i></a>&nbsp;
              <a href="https://alpha.app.net/intent/follow/?user_id=@recology_"><i class="fa fa-font fa-lg"></i></a>
              <a href="/fork"><i class="fa fa-spinner fa-lg"></i></a>
            </li>
          </ul>
          <!-- <small><a href="https://github.com/mdo/hyde">Hyde</a> from <a href="https://twitter.com/mdo" target="_blank">@mdo</a>.</small> -->
        </div>
      </div>
    </header>

    <div class="content container">
      <div class="post">
  <h1>Conditionality meta-analysis data</h1>
  <span class="post-date">06 Oct 2014</span>
  <i class="fa fa-tags fa-large"></i>&nbsp;
     <a href="/tags/R" class="badge" rel="tooltip" data-placement="bottom" title="View posts tagged with &quot;R&quot;"><span class="blog_tag">R</span></a>    <a href="/tags/data" class="badge" rel="tooltip" data-placement="bottom" title="View posts tagged with &quot;data&quot;"><span class="blog_tag">data</span></a>  
  <br>
  <h2>The paper</h2>

<p>One paper from my graduate work asked most generally ~ "How much does the variation in magnitudes and signs of species interaction outcomes vary?". More specifically, we wanted to know if variation differed among species interaction classes (mutualism, competition, predation), and among various "gradients" (space, time, etc.). To answer this question, we used a meta-analysis approach (rather than e.g., a field experiment). We <a href="http://scottchamberlain.info/publications/">published the paper</a> recently.</p>

<blockquote><p>p.s. I really really wish we would have put it in an open access journal...</p></blockquote>

<h2>The data</h2>

<p>Anyway, I'm here to talk about the <strong>data</strong>. We didn't get the data up with the paper, but it is <a href="http://figshare.com/articles/Conditionality_data/1097657">up on Figshare</a> now. The files there are the following:</p>

<ul>
<li><code>coniditionality.R</code> - script used to process the data from <code>variables_prelim.csv</code></li>
<li><code>variables_prelim.csv</code> - description of variables in the preliminary data set, matches <code>conditionality_data_prelim.csv</code></li>
<li><code>variables_used.csv</code> - description of variables in the used data set, matches <code>conditionality_data_used.csv</code></li>
<li><code>conditionality_data_prelim.csv</code> - preliminary data, the raw data</li>
<li><code>conditionality_data_used.csv</code> - the data used for our paper</li>
<li><code>README.md</code> - the readme</li>
<li><code>paper_selection.csv</code> - the list of papers we went through, with remarks about paper selection</li>
</ul>


<p>Please do play with the data, publish some papers, etc, etc. It took 6 of us about 4 years to collect this data; we skimmed through ~11,000 papers on the first pass (aka. skimming through abstracts in Google Scholar and Web of Science), then decided on nearly 500 papers to get data from, and narrowed down to 247 papers for the publication mentioned above. Now, there was no funding for this, so it was sort of done in between other projects, but still, it was simply <strong>A LOT</strong> of tables to digitize, and graphs to extract data points from. <strong>Anyway</strong>, hopefully you will find this data useful :p</p>

<h2>EML</h2>

<p>I think this dataset would be a great introduction to the potential power of EML (<a href="https://knb.ecoinformatics.org/#external//emlparser/docs/index.html">Ecological Metadata Langauge</a>). At <a href="http://ropensci.org/">rOpenSci</a>, one of our team <a href="http://www.carlboettiger.info/">Carl Boettiger</a>, along with Claas-Thido Pfaff, Duncan Temple Lang, Karthik Ram, and Matt Jones, have created an R client for EML, to parse EML files and to create and publish them.</p>

<h2>What is EML?/Why EML?</h2>

<p>A demonstration is in order...</p>

<h2>Example using EML with this dataset</h2>

<h3>Install EML</h3>

<pre><code class="r">library("devtools")
install.packages("RHTMLForms", repos = "http://www.omegahat.org/R/", type="source")
install_github("ropensci/EML", build=FALSE, dependencies=c("DEPENDS", "IMPORTS"))
</code></pre>

<p>Load <code>EML</code></p>

<pre><code class="r">library('EML')
</code></pre>

<h3>Prepare metadata</h3>

<pre><code class="r"># dataset
prelim_dat &lt;- read.csv("conditionality_data_prelim.csv")
# variable descriptions for each column
prelim_vars &lt;- read.csv("variables_prelim.csv", stringsAsFactors = FALSE)
</code></pre>

<p>Get column definitions in a vector</p>

<pre><code class="r">col_defs &lt;- prelim_vars$description
</code></pre>

<p>Create unit definitions for each column</p>

<pre><code class="r">unit_defs &lt;- list(
  c(unit = "number",
    bounds = c(0, Inf)),
  c(unit = "number",
    bounds = c(0, Inf)),
  "independent replicates",
  c(unit = "number",
    bounds = c(0, Inf)),

  ... &lt;CUTOFF&gt;
)
</code></pre>

<h3>Write an EML file</h3>

<pre><code class="r">eml_write(prelim_dat,
          unit.defs = unit_defs,
          col.defs = col_defs,
          creator = "Scott Chamberlain",
          contact = "myrmecocystus@gmail.com",
          file = "conditionality_data_prelim_eml.xml")
</code></pre>

<pre><code>## [1] "conditionality_data_prelim_eml.xml"
</code></pre>

<h3>Validate the EML file</h3>

<pre><code class="r">eml_validate("conditionality_data_prelim_eml.xml")
</code></pre>

<pre><code>## EML specific tests XML specific tests 
##               TRUE               TRUE
</code></pre>

<h3>Read data and metadata</h3>

<pre><code class="r">gg &lt;- eml_read("conditionality_data_prelim_eml.xml")
eml_get(gg, "contact")
</code></pre>

<pre><code>## [1] "myrmecocystus@gmail.com"
</code></pre>

<pre><code class="r">eml_get(gg, "citation_info")
</code></pre>

<pre><code>## Chamberlain S (2014-10-06). _metadata_.
</code></pre>

<pre><code class="r">dat &lt;- eml_get(gg, "data.frame")
head(dat[,c(1:10)])
</code></pre>

<pre><code>##   order i indrep avg author_last  finit_1 finit_2 finit_abv co_author
## 1     1 1      a   1      Devall margaret       s        ms     Thein
## 2     2 1      a   2      Devall margaret       s        ms     Thein
## 3     3 1      a   3      Devall margaret       s        ms     Thein
## 4     4 1      a   4      Devall margaret       s        ms     Thein
## 5     5 1      a   5      Devall margaret       s        ms     Thein
## 6     6 1      a   6      Devall margaret       s        ms     Thein
##   sinit_1
## 1 leonard
## 2 leonard
## 3 leonard
## 4 leonard
## 5 leonard
## 6 leonard
</code></pre>

<h3>Publish</h3>

<p>We can also use the <code>EML</code> package to publish the data, here to <a href="http://figshare.com">Figshare</a>.</p>

<p>First, install <code>rfigshare</code></p>

<pre><code class="r">install.packages("rfigshare")
library('rfigshare')
</code></pre>

<p>Then publish using <code>eml_publish()</code></p>

<pre><code class="r">figid &lt;- eml_publish(
            file = "conditionality_data_prelim_eml.xml",
            description = "EML file for Chamberlain, S.A., J.A. Rudgers, and J.L. Bronstein. 2014. How context-dependent are species interactions. Ecology Letters",
            categories = "Ecology",
            tags = "EML",
            destination = "figshare",
            visibility = "public",
            title = "condionality data, EML")
fs_make_public(figid)
</code></pre>

<p><img src="/public/img/2014-10-06-conditionality-meta-analysis/figshare_conditional.png" alt="" /></p>

</div>

<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'coffeehaus'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

<!-- <div class="related">
  <h2>Related Posts</h2>
  <ul class="related-posts">
    
      <li>
        <h3>
          <a href="/2014/11/sofa/">
            sofa - reboot
            <small>18 Nov 2014</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/2014/08/rsunlight/">
            rsunlight - R client for Sunlight Labs APIs
            <small>11 Aug 2014</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/2014/06/analogsea-v01/">
            analogsea - v0.1 notes
            <small>18 Jun 2014</small>
          </a>
        </h3>
      </li>
    
  </ul>
</div>
 -->
    </div>

  </body>

  <footer>  
  <!-- Disqus code -->
  <script type="text/javascript">
      /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
      var disqus_shortname = 'recology'; // required: replace example with your forum shortname

      /* * * DON'T EDIT BELOW THIS LINE * * */
      (function () {
          var s = document.createElement('script'); s.async = true;
          s.type = 'text/javascript';
          s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
          (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
      }());
  </script>

  <!-- Gaug.es Analytics -->
  <script type="text/javascript">
    var _gauges = _gauges || [];
    (function() {
      var t   = document.createElement('script');
      t.type  = 'text/javascript';
      t.async = true;
      t.id    = 'gauges-tracker';
      t.setAttribute('data-site-id', '4efd83a6f5a1f5158a000004');
      t.src = '//secure.gaug.es/track.js';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(t, s);
    })();
  </script>
</footer>
</html>
