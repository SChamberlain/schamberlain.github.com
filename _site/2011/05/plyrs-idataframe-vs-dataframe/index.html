<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>plyr's idata.frame VS. data.frame</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <link href="/css/bootstrap.css" rel="stylesheet">
    <link href="/css/bootstrap-responsive.css" rel="stylesheet">
    <link href="/css/docs.css" rel="stylesheet">
    <link href="/js/google-code-prettify/prettify.css" rel="stylesheet">	
	<link rel="shortcut icon" href="/favicon.ico">    
  </head>
  <body data-spy="scroll" data-target=".subnav" data-offset="50">
	<div class="navbar navbar-fixed-top">
  <div class="navbar-inner">
	<div class="container">
	  <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
		<span class="icon-bar"></span>
		<span class="icon-bar"></span>
		<span class="icon-bar"></span>
	  </a>
	  <a class="brand" href="http://schamberlain.github.com">Recology</a>
	  <div class="nav-collapse">
		<ul class="nav">		  
		  <li class="">
			<a href="http://schamberlain.github.com">Home</a>
		  </li>
		  <li class="divider-vertical"></li>
		  <li class="">
			<a href="/about.html">About</a>
		  </li>
		  <li class="divider-vertical"></li>
		  <li class="">
			<a href="/R-esources.html">R-esources</a>
		  </li>
		  <li class="divider-vertical"></li>
		  <li class="">
			<a href="http://feeds.feedburner.com/github/wpna" title="Go to feedburner" target="_blank">RSS</a> 
		  </li>	
		  <li class="divider-vertical"></li>
		  <li class="dropdown">
			<a href="#" class="dropdown-toggle" data-toggle="dropdown">Projects<b class="caret"></b></a>
				<ul class="dropdown-menu">					
					<li class=""><a href="https://github.com/ropensci" title="Go to rOpenSci on GitHub" target="_blank">rOpenSci</a></li>	
				</ul>
			  </li>		  
		<li class="divider-vertical"></li>
		</ul>		
	  </div>
	</div>
  </div>
</div>  
	<div class="container">	
		<div class="marketing">
		<div class="content">    
	<div class="row">
	<p><h1>plyr's idata.frame VS. data.frame</h1></p>	
	<div class="span3 column">
		<h4><strong>May 13, 2011 <small>.  . <a href="http://schamberlain.github.com/2011/05/plyrs-idataframe-vs-dataframe#disqus_thread" data-disqus-identifier="/2011/05/plyrs-idataframe-vs-dataframe">Comments</a></small></strong>
		<br/><small>Tags:  </small></h4>
	</div>		
	<div class="span9 column">
		<p class="pull-right"> <a href="/2011/05/google-reader" title="Previous Post: google reader"><i class="icon-chevron-left"></i></a> 	    	<a href="/2011/05/simple-function-for-plotting" title="Next Post: A simple function for plotting phylogenies in ggplot2"><i class="icon-chevron-right"></i></a> 	 </p> 
	</div>
</div>

<div class="row">
	<div class="span12 column">
		<hr>
	</div>
</div>

    <p>I had seen the function idata.frame in plyr before, but not really tested it. From the plyr documentation:<br /><br />“An immutable data frame works like an ordinary data frame, except that when you subset it, it<br />returns a reference to the original data frame, not a a copy. This makes subsetting substantially<br />faster and has a big impact when you are working with large datasets with many groups.”<br /><br />For example, although baseball is a data.frame, its immutable counterpart is a reference to it:<br /><span class="Apple-style-span" style="font-family: Monaco; font-size: 12px; line-height: 17px; white-space: pre-wrap;"></span><br />&lt;pre class="G1dpdwhmFL" style="border-bottom-style: none; border-color: initial; border-left-style: none; border-right-style: none; border-top-style: none; border-width: initial; font-family: Monaco; font-size: 9pt !important; line-height: 1.45; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px; outline-color: initial; outline-style: none; outline-width: initial; white-space: pre-wrap !important;" tabindex="0"&gt;<span class="G1dpdwhmIL  ace_keyword" style="white-space: pre;">&gt; </span><span class="G1dpdwhmMK  ace_keyword">idata.frame(baseball)<br /></span>&lt;environment: 0x1022c74e8&gt;<br />attr(,”class”)<br />[1] “idf”         “environment”&lt;/pre&gt;<br /><br />Here are a few comparisons of operations on normal data frames and immutable data frames. Immutable data frames don’t work with the doBy package, but do work with aggregate in base functions.  Overall, the speed gains using idata.frame are quite impressive - I will use it more often for sure.<br /><br /><br />Get the github code below <a href="https://gist.github.com/971191">here</a>.<br /><br /><br /><br /><br /><br />Here’s the comparisons of idata.frames and data.frames:<br /><br />&lt;div style="overflow: auto;"&gt;&lt;div class="geshifilter"&gt;&lt;pre class="r geshifilter-R" style="font-family: monospace;"&gt;&gt; <span style="color: #666666; font-style: italic;"># load packages</span><br /><a href="http://inside-r.org/r-doc/base/require"><span style="color: #003399; font-weight: bold;">require</span></a><span style="color: #009900;">(</span><a href="http://inside-r.org/packages/cran/plyr">plyr</a><span style="color: #009900;">)</span><span style="color: #339933;">;</span> <a href="http://inside-r.org/r-doc/base/require"><span style="color: #003399; font-weight: bold;">require</span></a><span style="color: #009900;">(</span>reshape2<span style="color: #009900;">)</span><br /> <br />&gt; <span style="color: #666666; font-style: italic;"># Make immutable data frame</span><br />baseball_i &lt;- idata.frame<span style="color: #009900;">(</span>baseball<span style="color: #009900;">)</span><br /> <br />&gt; <span style="color: #666666; font-style: italic;"># Example 1 - idata.frame more than twice as fast</span><br /><a href="http://inside-r.org/r-doc/base/system.time"><span style="color: #003399; font-weight: bold;">system.time</span></a><span style="color: #009900;">(</span> <a href="http://inside-r.org/r-doc/base/replicate"><span style="color: #003399; font-weight: bold;">replicate</span></a><span style="color: #009900;">(</span><span style="color: #cc66cc;">50</span><span style="color: #339933;">,</span> ddply<span style="color: #009900;">(</span> baseball<span style="color: #339933;">,</span> <span style="color: blue;">“year”</span><span style="color: #339933;">,</span> summarise<span style="color: #339933;">,</span> <a href="http://inside-r.org/r-doc/base/mean"><span style="color: #003399; font-weight: bold;">mean</span></a><span style="color: #009900;">(</span>rbi<span style="color: #009900;">)</span><span style="color: #009900;">)</span><span style="color: #009900;">)</span> <span style="color: #009900;">)</span><br />   user  <a href="http://inside-r.org/r-doc/base/system"><span style="color: #003399; font-weight: bold;">system</span></a> elapsed <br /> <span style="color: #cc66cc;">14.812</span>   <span style="color: #cc66cc;">0.252</span>  <span style="color: #cc66cc;">15.065</span> <br />&gt; <a href="http://inside-r.org/r-doc/base/system.time"><span style="color: #003399; font-weight: bold;">system.time</span></a><span style="color: #009900;">(</span> <a href="http://inside-r.org/r-doc/base/replicate"><span style="color: #003399; font-weight: bold;">replicate</span></a><span style="color: #009900;">(</span><span style="color: #cc66cc;">50</span><span style="color: #339933;">,</span> ddply<span style="color: #009900;">(</span> baseball_i<span style="color: #339933;">,</span> <span style="color: blue;">“year”</span><span style="color: #339933;">,</span> summarise<span style="color: #339933;">,</span> <a href="http://inside-r.org/r-doc/base/mean"><span style="color: #003399; font-weight: bold;">mean</span></a><span style="color: #009900;">(</span>rbi<span style="color: #009900;">)</span><span style="color: #009900;">)</span><span style="color: #009900;">)</span> <span style="color: #009900;">)</span><br />   user  <a href="http://inside-r.org/r-doc/base/system"><span style="color: #003399; font-weight: bold;">system</span></a> elapsed <br />  <span style="color: #cc66cc;">6.895</span>   <span style="color: #cc66cc;">0.020</span>   <span style="color: #cc66cc;">6.915</span> &lt;/pre&gt;&lt;pre class="r geshifilter-R" style="font-family: monospace;"&gt;&lt;/pre&gt;&lt;pre class="r geshifilter-R" style="font-family: monospace;"&gt;&lt;/pre&gt;&lt;pre class="r geshifilter-R" style="font-family: monospace;"&gt;&lt;/pre&gt;&lt;pre class="r geshifilter-R" style="font-family: monospace;"&gt;<span class="Apple-style-span" style="font-family: Times; white-space: normal;">&lt;pre class="r geshifilter-R" style="font-family: monospace; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;"&gt;&gt; <span style="color: #666666; font-style: italic;"># Example 2 - Bummer, this does not work with idata.frame’s</span>&lt;/pre&gt;</span>&gt; colwise<span style="color: #009900;">(</span><a href="http://inside-r.org/r-doc/base/max"><span style="color: #003399; font-weight: bold;">max</span></a><span style="color: #339933;">,</span> <a href="http://inside-r.org/r-doc/base/is.numeric"><span style="color: #003399; font-weight: bold;">is.numeric</span></a><span style="color: #009900;">)</span> <span style="color: #009900;">(</span> baseball <span style="color: #009900;">)</span> <span style="color: #666666; font-style: italic;"># works</span>  year stint   g  ab   r   h X2b X3b hr rbi sb cs  <a href="http://inside-r.org/packages/cran/BB">bb</a> so ibb hbp sh sf gidp<span style="color: #cc66cc;">1</span> <span style="color: #cc66cc;">2007</span>     <span style="color: #cc66cc;">4</span> <span style="color: #cc66cc;">165</span> <span style="color: #cc66cc;">705</span> <span style="color: #cc66cc;">177</span> <span style="color: #cc66cc;">257</span>  <span style="color: #cc66cc;">64</span>  <span style="color: #cc66cc;">28</span> <span style="color: #cc66cc;">73</span>  <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: #cc66cc;">232</span> <span style="color: black; font-weight: bold;">NA</span>  <span style="color: black; font-weight: bold;">NA</span>  <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span>   <span style="color: black; font-weight: bold;">NA</span>&gt; colwise<span style="color: #009900;">(</span><a href="http://inside-r.org/r-doc/base/max"><span style="color: #003399; font-weight: bold;">max</span></a><span style="color: #339933;">,</span> <a href="http://inside-r.org/r-doc/base/is.numeric"><span style="color: #003399; font-weight: bold;">is.numeric</span></a><span style="color: #009900;">)</span> <span style="color: #009900;">(</span> baseball_i <span style="color: #009900;">)</span> <span style="color: #666666; font-style: italic;"># doesn’t work</span>Error: <a href="http://inside-r.org/r-doc/base/is.data.frame"><span style="color: #003399; font-weight: bold;">is.data.frame</span></a><span style="color: #009900;">(</span><a href="http://inside-r.org/r-doc/stats/df"><span style="color: #003399; font-weight: bold;">df</span></a><span style="color: #009900;">)</span> <a href="http://inside-r.org/r-doc/methods/is"><span style="color: #003399; font-weight: bold;">is</span></a> not <span style="color: black; font-weight: bold;">TRUE</span>&lt;/pre&gt;&lt;pre class="r geshifilter-R" style="font-family: monospace;"&gt;&lt;/pre&gt;&lt;pre class="r geshifilter-R" style="font-family: monospace;"&gt;&lt;/pre&gt;&lt;pre class="r geshifilter-R" style="font-family: monospace;"&gt;&lt;/pre&gt;&lt;pre class="r geshifilter-R" style="font-family: monospace;"&gt;&gt; <span style="color: #666666; font-style: italic;"># Example 3 - idata.frame twice as fast</span><br /><a href="http://inside-r.org/r-doc/base/system.time"><span style="color: #003399; font-weight: bold;">system.time</span></a><span style="color: #009900;">(</span> <a href="http://inside-r.org/r-doc/base/replicate"><span style="color: #003399; font-weight: bold;">replicate</span></a><span style="color: #009900;">(</span><span style="color: #cc66cc;">100</span><span style="color: #339933;">,</span> baseball<span style="color: #009900;">[</span>baseball$year == <span style="color: blue;">“1884”</span><span style="color: #339933;">,</span> <span style="color: #009900;">]</span> <span style="color: #009900;">)</span> <span style="color: #009900;">)</span><br />   user  <a href="http://inside-r.org/r-doc/base/system"><span style="color: #003399; font-weight: bold;">system</span></a> elapsed <br />  <span style="color: #cc66cc;">1.155</span>   <span style="color: #cc66cc;">0.048</span>   <span style="color: #cc66cc;">1.203</span> <br />&gt; <a href="http://inside-r.org/r-doc/base/system.time"><span style="color: #003399; font-weight: bold;">system.time</span></a><span style="color: #009900;">(</span> <a href="http://inside-r.org/r-doc/base/replicate"><span style="color: #003399; font-weight: bold;">replicate</span></a><span style="color: #009900;">(</span><span style="color: #cc66cc;">100</span><span style="color: #339933;">,</span> baseball_i<span style="color: #009900;">[</span>baseball_i$year == <span style="color: blue;">“1884”</span><span style="color: #339933;">,</span> <span style="color: #009900;">]</span> <span style="color: #009900;">)</span> <span style="color: #009900;">)</span><br />   user  <a href="http://inside-r.org/r-doc/base/system"><span style="color: #003399; font-weight: bold;">system</span></a> elapsed <br />  <span style="color: #cc66cc;">0.598</span>   <span style="color: #cc66cc;">0.011</span>   <span style="color: #cc66cc;">0.609</span> <br />&lt;/pre&gt;&lt;pre class="r geshifilter-R" style="font-family: monospace;"&gt;&lt;/pre&gt;&lt;pre class="r geshifilter-R" style="font-family: monospace;"&gt;&lt;/pre&gt;&lt;pre class="r geshifilter-R" style="font-family: monospace;"&gt;&gt; <span style="color: #666666; font-style: italic;"># Example 4 - idata.frame faster</span><br /><a href="http://inside-r.org/r-doc/base/system.time"><span style="color: #003399; font-weight: bold;">system.time</span></a><span style="color: #009900;">(</span> <a href="http://inside-r.org/r-doc/base/replicate"><span style="color: #003399; font-weight: bold;">replicate</span></a><span style="color: #009900;">(</span><span style="color: #cc66cc;">50</span><span style="color: #339933;">,</span> melt<span style="color: #009900;">(</span>baseball<span style="color: #009900;">[</span><span style="color: #339933;">,</span> <span style="color: #cc66cc;">1</span>:<span style="color: #cc66cc;">4</span><span style="color: #009900;">]</span><span style="color: #339933;">,</span> id = <span style="color: #cc66cc;">1</span><span style="color: #009900;">)</span> <span style="color: #009900;">)</span> <span style="color: #009900;">)</span><br />   user  <a href="http://inside-r.org/r-doc/base/system"><span style="color: #003399; font-weight: bold;">system</span></a> elapsed <br /> <span style="color: #cc66cc;">16.587</span>   <span style="color: #cc66cc;">1.169</span>  <span style="color: #cc66cc;">17.755</span> <br />&gt; <a href="http://inside-r.org/r-doc/base/system.time"><span style="color: #003399; font-weight: bold;">system.time</span></a><span style="color: #009900;">(</span> <a href="http://inside-r.org/r-doc/base/replicate"><span style="color: #003399; font-weight: bold;">replicate</span></a><span style="color: #009900;">(</span><span style="color: #cc66cc;">50</span><span style="color: #339933;">,</span> melt<span style="color: #009900;">(</span>baseball_i<span style="color: #009900;">[</span><span style="color: #339933;">,</span> <span style="color: #cc66cc;">1</span>:<span style="color: #cc66cc;">4</span><span style="color: #009900;">]</span><span style="color: #339933;">,</span> id = <span style="color: #cc66cc;">1</span><span style="color: #009900;">)</span> <span style="color: #009900;">)</span> <span style="color: #009900;">)</span><br />   user  <a href="http://inside-r.org/r-doc/base/system"><span style="color: #003399; font-weight: bold;">system</span></a> elapsed <br />  <span style="color: #cc66cc;">0.869</span>   <span style="color: #cc66cc;">0.196</span>   <span style="color: #cc66cc;">1.065</span> <br />&lt;/pre&gt;&lt;pre class="r geshifilter-R" style="font-family: monospace;"&gt;&lt;/pre&gt;&lt;pre class="r geshifilter-R" style="font-family: monospace;"&gt;&gt; <span style="color: #666666; font-style: italic;"># And you can go back to a data frame by </span><br />d &lt;- <a href="http://inside-r.org/r-doc/base/as.data.frame"><span style="color: #003399; font-weight: bold;">as.data.frame</span></a><span style="color: #009900;">(</span>baseball_i<span style="color: #009900;">)</span><br /><a href="http://inside-r.org/r-doc/utils/str"><span style="color: #003399; font-weight: bold;">str</span></a><span style="color: #009900;">(</span>d<span style="color: #009900;">)</span><br /> <br /><span style="color: blue;">‘data.frame’</span>: <span style="color: #cc66cc;">21699</span> obs. of  <span style="color: #cc66cc;">23</span> variables:<br /> $ id   : chr  <span style="color: blue;">“ansonca01”</span> <span style="color: blue;">“forceda01”</span> <span style="color: blue;">“mathebo01”</span> <span style="color: blue;">“startjo01”</span> …<br /> $ year : int  <span style="color: #cc66cc;">1871</span> <span style="color: #cc66cc;">1871</span> <span style="color: #cc66cc;">1871</span> <span style="color: #cc66cc;">1871</span> <span style="color: #cc66cc;">1871</span> <span style="color: #cc66cc;">1871</span> <span style="color: #cc66cc;">1871</span> <span style="color: #cc66cc;">1872</span> <span style="color: #cc66cc;">1872</span> <span style="color: #cc66cc;">1872</span> …<br /> $ stint: int  <span style="color: #cc66cc;">1</span> <span style="color: #cc66cc;">1</span> <span style="color: #cc66cc;">1</span> <span style="color: #cc66cc;">1</span> <span style="color: #cc66cc;">1</span> <span style="color: #cc66cc;">1</span> <span style="color: #cc66cc;">1</span> <span style="color: #cc66cc;">1</span> <span style="color: #cc66cc;">1</span> <span style="color: #cc66cc;">1</span> …<br /> $ team : chr  <span style="color: blue;">“RC1”</span> <span style="color: blue;">“WS3”</span> <span style="color: blue;">“FW1”</span> <span style="color: blue;">“NY2”</span> …<br /> $ lg   : chr  <span style="color: blue;">””</span> <span style="color: blue;">””</span> <span style="color: blue;">””</span> <span style="color: blue;">””</span> …<br /> $ g    : int  <span style="color: #cc66cc;">25</span> <span style="color: #cc66cc;">32</span> <span style="color: #cc66cc;">19</span> <span style="color: #cc66cc;">33</span> <span style="color: #cc66cc;">29</span> <span style="color: #cc66cc;">29</span> <span style="color: #cc66cc;">29</span> <span style="color: #cc66cc;">46</span> <span style="color: #cc66cc;">37</span> <span style="color: #cc66cc;">25</span> …<br /> $ ab   : int  <span style="color: #cc66cc;">120</span> <span style="color: #cc66cc;">162</span> <span style="color: #cc66cc;">89</span> <span style="color: #cc66cc;">161</span> <span style="color: #cc66cc;">128</span> <span style="color: #cc66cc;">146</span> <span style="color: #cc66cc;">145</span> <span style="color: #cc66cc;">217</span> <span style="color: #cc66cc;">174</span> <span style="color: #cc66cc;">130</span> …<br /> $ r    : int  <span style="color: #cc66cc;">29</span> <span style="color: #cc66cc;">45</span> <span style="color: #cc66cc;">15</span> <span style="color: #cc66cc;">35</span> <span style="color: #cc66cc;">35</span> <span style="color: #cc66cc;">40</span> <span style="color: #cc66cc;">36</span> <span style="color: #cc66cc;">60</span> <span style="color: #cc66cc;">26</span> <span style="color: #cc66cc;">40</span> …<br /> $ h    : int  <span style="color: #cc66cc;">39</span> <span style="color: #cc66cc;">45</span> <span style="color: #cc66cc;">24</span> <span style="color: #cc66cc;">58</span> <span style="color: #cc66cc;">45</span> <span style="color: #cc66cc;">47</span> <span style="color: #cc66cc;">37</span> <span style="color: #cc66cc;">90</span> <span style="color: #cc66cc;">46</span> <span style="color: #cc66cc;">53</span> …<br /> $ X2b  : int  <span style="color: #cc66cc;">11</span> <span style="color: #cc66cc;">9</span> <span style="color: #cc66cc;">3</span> <span style="color: #cc66cc;">5</span> <span style="color: #cc66cc;">3</span> <span style="color: #cc66cc;">6</span> <span style="color: #cc66cc;">5</span> <span style="color: #cc66cc;">10</span> <span style="color: #cc66cc;">3</span> <span style="color: #cc66cc;">11</span> …<br /> $ X3b  : int  <span style="color: #cc66cc;">3</span> <span style="color: #cc66cc;">4</span> <span style="color: #cc66cc;">1</span> <span style="color: #cc66cc;">1</span> <span style="color: #cc66cc;">7</span> <span style="color: #cc66cc;">5</span> <span style="color: #cc66cc;">7</span> <span style="color: #cc66cc;">7</span> <span style="color: #cc66cc;">0</span> <span style="color: #cc66cc;">0</span> …<br /> $ hr   : int  <span style="color: #cc66cc;">0</span> <span style="color: #cc66cc;">0</span> <span style="color: #cc66cc;">0</span> <span style="color: #cc66cc;">1</span> <span style="color: #cc66cc;">3</span> <span style="color: #cc66cc;">1</span> <span style="color: #cc66cc;">2</span> <span style="color: #cc66cc;">0</span> <span style="color: #cc66cc;">0</span> <span style="color: #cc66cc;">0</span> …<br /> $ rbi  : int  <span style="color: #cc66cc;">16</span> <span style="color: #cc66cc;">29</span> <span style="color: #cc66cc;">10</span> <span style="color: #cc66cc;">34</span> <span style="color: #cc66cc;">23</span> <span style="color: #cc66cc;">21</span> <span style="color: #cc66cc;">23</span> <span style="color: #cc66cc;">50</span> <span style="color: #cc66cc;">15</span> <span style="color: #cc66cc;">16</span> …<br /> $ sb   : int  <span style="color: #cc66cc;">6</span> <span style="color: #cc66cc;">8</span> <span style="color: #cc66cc;">2</span> <span style="color: #cc66cc;">4</span> <span style="color: #cc66cc;">3</span> <span style="color: #cc66cc;">2</span> <span style="color: #cc66cc;">2</span> <span style="color: #cc66cc;">6</span> <span style="color: #cc66cc;">0</span> <span style="color: #cc66cc;">2</span> …<br /> $ cs   : int  <span style="color: #cc66cc;">2</span> <span style="color: #cc66cc;">0</span> <span style="color: #cc66cc;">1</span> <span style="color: #cc66cc;">2</span> <span style="color: #cc66cc;">1</span> <span style="color: #cc66cc;">2</span> <span style="color: #cc66cc;">2</span> <span style="color: #cc66cc;">6</span> <span style="color: #cc66cc;">1</span> <span style="color: #cc66cc;">2</span> …<br /> $ <a href="http://inside-r.org/packages/cran/BB">bb</a>   : int  <span style="color: #cc66cc;">2</span> <span style="color: #cc66cc;">4</span> <span style="color: #cc66cc;">2</span> <span style="color: #cc66cc;">3</span> <span style="color: #cc66cc;">1</span> <span style="color: #cc66cc;">4</span> <span style="color: #cc66cc;">9</span> <span style="color: #cc66cc;">16</span> <span style="color: #cc66cc;">1</span> <span style="color: #cc66cc;">1</span> …<br /> $ so   : int  <span style="color: #cc66cc;">1</span> <span style="color: #cc66cc;">0</span> <span style="color: #cc66cc;">0</span> <span style="color: #cc66cc;">0</span> <span style="color: #cc66cc;">0</span> <span style="color: #cc66cc;">1</span> <span style="color: #cc66cc;">1</span> <span style="color: #cc66cc;">3</span> <span style="color: #cc66cc;">1</span> <span style="color: #cc66cc;">0</span> …<br /> $ ibb  : int  <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> …<br /> $ hbp  : int  <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> …<br /> $ sh   : int  <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> …<br /> $ sf   : int  <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> …<br /> $ gidp : int  <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> …<br /> $ teamf: Factor w/ <span style="color: #cc66cc;">132</span> <a href="http://inside-r.org/r-doc/base/levels"><span style="color: #003399; font-weight: bold;">levels</span></a> <span style="color: blue;">“ALT”</span><span style="color: #339933;">,</span><span style="color: blue;">“ANA”</span><span style="color: #339933;">,</span><span style="color: blue;">“ARI”</span><span style="color: #339933;">,</span>..: <span style="color: #cc66cc;">99</span> <span style="color: #cc66cc;">127</span> <span style="color: #cc66cc;">51</span> <span style="color: #cc66cc;">79</span> <span style="color: #cc66cc;">35</span> <span style="color: #cc66cc;">35</span> <span style="color: #cc66cc;">122</span> <span style="color: #cc66cc;">86</span> <span style="color: #cc66cc;">16</span> <span style="color: #cc66cc;">122</span> …<br />&lt;/pre&gt;&lt;pre class="r geshifilter-R" style="font-family: monospace;"&gt;&lt;/pre&gt;&lt;pre class="r geshifilter-R" style="font-family: monospace;"&gt;&lt;/pre&gt;&lt;pre class="r geshifilter-R" style="font-family: monospace;"&gt;&gt; <span style="color: #666666; font-style: italic;"># idata.frame doesn’t work with the doBy package</span><br /><a href="http://inside-r.org/r-doc/base/require"><span style="color: #003399; font-weight: bold;">require</span></a><span style="color: #009900;">(</span><a href="http://inside-r.org/packages/cran/doBy">doBy</a><span style="color: #009900;">)</span><br />summaryBy<span style="color: #009900;">(</span>rbi ~ year<span style="color: #339933;">,</span> baseball_i<span style="color: #339933;">,</span> FUN=<a href="http://inside-r.org/r-doc/base/c"><span style="color: #003399; font-weight: bold;">c</span></a><span style="color: #009900;">(</span><a href="http://inside-r.org/r-doc/base/mean"><span style="color: #003399; font-weight: bold;">mean</span></a><span style="color: #009900;">)</span><span style="color: #339933;">,</span> na.rm=T<span style="color: #009900;">)</span><br />Error <span style="color: black; font-weight: bold;">in</span> <a href="http://inside-r.org/r-doc/base/as.vector"><span style="color: #003399; font-weight: bold;">as.vector</span></a><span style="color: #009900;">(</span>x<span style="color: #339933;">,</span> <a href="http://inside-r.org/r-doc/base/mode"><span style="color: #003399; font-weight: bold;">mode</span></a><span style="color: #009900;">)</span> : <br />  cannot coerce type <span style="color: blue;">‘environment’</span> to <a href="http://inside-r.org/r-doc/base/vector"><span style="color: #003399; font-weight: bold;">vector</span></a> of type <span style="color: blue;">‘any’</span><br />&lt;/pre&gt;&lt;pre class="r geshifilter-R" style="font-family: monospace;"&gt;&lt;/pre&gt;&lt;pre class="r geshifilter-R" style="font-family: monospace;"&gt;&lt;/pre&gt;&lt;pre class="r geshifilter-R" style="font-family: monospace;"&gt;&gt; <span style="color: #666666; font-style: italic;"># But idata.frame works with aggregate in base (but with minimal speed gains)</span><br /><span style="color: #666666; font-style: italic;"># and aggregate is faster than ddply of course </span><br /><a href="http://inside-r.org/r-doc/base/system.time"><span style="color: #003399; font-weight: bold;">system.time</span></a><span style="color: #009900;">(</span> <a href="http://inside-r.org/r-doc/base/replicate"><span style="color: #003399; font-weight: bold;">replicate</span></a><span style="color: #009900;">(</span><span style="color: #cc66cc;">100</span><span style="color: #339933;">,</span> <a href="http://inside-r.org/r-doc/stats/aggregate"><span style="color: #003399; font-weight: bold;">aggregate</span></a><span style="color: #009900;">(</span>rbi ~ year<span style="color: #339933;">,</span> baseball<span style="color: #339933;">,</span> <a href="http://inside-r.org/r-doc/base/mean"><span style="color: #003399; font-weight: bold;">mean</span></a><span style="color: #009900;">)</span> <span style="color: #009900;">)</span> <span style="color: #009900;">)</span><br />   user  <a href="http://inside-r.org/r-doc/base/system"><span style="color: #003399; font-weight: bold;">system</span></a> elapsed <br />  <span style="color: #cc66cc;">4.117</span>   <span style="color: #cc66cc;">0.423</span>   <span style="color: #cc66cc;">4.541</span> <br />&gt; <a href="http://inside-r.org/r-doc/base/system.time"><span style="color: #003399; font-weight: bold;">system.time</span></a><span style="color: #009900;">(</span> <a href="http://inside-r.org/r-doc/base/replicate"><span style="color: #003399; font-weight: bold;">replicate</span></a><span style="color: #009900;">(</span><span style="color: #cc66cc;">100</span><span style="color: #339933;">,</span> <a href="http://inside-r.org/r-doc/stats/aggregate"><span style="color: #003399; font-weight: bold;">aggregate</span></a><span style="color: #009900;">(</span>rbi ~ year<span style="color: #339933;">,</span> baseball_i<span style="color: #339933;">,</span> <a href="http://inside-r.org/r-doc/base/mean"><span style="color: #003399; font-weight: bold;">mean</span></a><span style="color: #009900;">)</span> <span style="color: #009900;">)</span> <span style="color: #009900;">)</span><br />   user  <a href="http://inside-r.org/r-doc/base/system"><span style="color: #003399; font-weight: bold;">system</span></a> elapsed <br />  <span style="color: #cc66cc;">3.908</span>   <span style="color: #cc66cc;">0.383</span>   <span style="color: #cc66cc;">4.291</span> <br />&gt; <a href="http://inside-r.org/r-doc/base/system.time"><span style="color: #003399; font-weight: bold;">system.time</span></a><span style="color: #009900;">(</span> <a href="http://inside-r.org/r-doc/base/replicate"><span style="color: #003399; font-weight: bold;">replicate</span></a><span style="color: #009900;">(</span><span style="color: #cc66cc;">100</span><span style="color: #339933;">,</span> ddply<span style="color: #009900;">(</span> baseball_i<span style="color: #339933;">,</span> <span style="color: blue;">“year”</span><span style="color: #339933;">,</span> summarise<span style="color: #339933;">,</span> <a href="http://inside-r.org/r-doc/base/mean"><span style="color: #003399; font-weight: bold;">mean</span></a><span style="color: #009900;">(</span>rbi<span style="color: #009900;">)</span><span style="color: #009900;">)</span> <span style="color: #009900;">)</span> <span style="color: #009900;">)</span><br />   user  <a href="http://inside-r.org/r-doc/base/system"><span style="color: #003399; font-weight: bold;">system</span></a> elapsed <br /> <span style="color: #cc66cc;">14.015</span>   <span style="color: #cc66cc;">0.048</span>  <span style="color: #cc66cc;">14.082</span> &lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;<a href="http://www.inside-r.org/pretty-r" title="Created by Pretty R at inside-R.org">Created by Pretty R at inside-R.org</a></p>
		
</div>
    

		</div>
		 <footer class="footer">		        
	<p class="pull-right"> <a href="/2011/05/google-reader" title="Previous Post: google reader">&laquo; Previous Blog Post</a> 	  |  <a href="#">Back to top</a>  |   	<a href="/2011/05/simple-function-for-plotting" title="Next Post: A simple function for plotting phylogenies in ggplot2">Next Blog Post &raquo; </a> 	 </p> 

	<br><br/>
	<br><br/>
	<div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'recology'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

	<p>Designed and built using <a href="http://twitter.github.com/bootstrap/" target="_blank">Twitter Bootstrap</a>, <a href="http://jekyllrb.com/"  target="_blank">Jekyll</a>, slightly modified by <a href="https://github.com/erjjones" target="_blank">Erjjones</a>, and even more modified by <a href="https://github.com/schamberlain" target="_blank">schamberlain</a>.</p>
	<p>Code licensed under the <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_blank">Apache License v2.0</a>. Documentation licensed under <a href="http://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>.</p>
	<p>Icons from <a href="http://glyphicons.com">Glyphicons Free</a>, licensed under <a href="http://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>.</p>	
	<p>Page last generated on July 17, 2012</p>				
</footer>
	 </div>    
    <script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>
    <script src="/js/jquery.js"></script>
    <script src="/js/google-code-prettify/prettify.js"></script>
    <script src="/js/bootstrap-transition.js"></script>
    <script src="/js/bootstrap-alert.js"></script>
    <script src="/js/bootstrap-modal.js"></script>
    <script src="/js/bootstrap-dropdown.js"></script>
    <script src="/js/bootstrap-scrollspy.js"></script>
    <script src="/js/bootstrap-tab.js"></script>
    <script src="/js/bootstrap-tooltip.js"></script>
    <script src="/js/bootstrap-popover.js"></script>
    <script src="/js/bootstrap-button.js"></script>
    <script src="/js/bootstrap-collapse.js"></script>
    <script src="/js/bootstrap-carousel.js"></script>
    <script src="/js/bootstrap-typeahead.js"></script>
    <script src="/js/application.js"></script>
	<script src="/js/custom.js" type="text/javascript"></script>	
	
	<script type="text/javascript">
		/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
		var disqus_shortname = 'recology'; // required: replace example with your forum shortname

		/* * * DON'T EDIT BELOW THIS LINE * * */
		(function () {
			var s = document.createElement('script'); s.async = true;
			s.type = 'text/javascript';
			s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
			(document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
		}());
	</script>
	
	<!-- Google Analytics -->
	<script type="text/javascript">

	  var _gaq = _gaq || [];
	  _gaq.push(['_setAccount', 'UA-28059658-1']);
	  _gaq.push(['_trackPageview']);

	  (function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	  })();

	</script>	
  </body>
</html>
