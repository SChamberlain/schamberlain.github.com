<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Fylopic, an R wrapper to Phylopic</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <!-- <link href="/assets/FontAwesome/css/font-awesome.css" rel="stylesheet"> -->
    <link href="/css/bootstrap.css" rel="stylesheet">
    <link href="/css/bootstrap-responsive.css" rel="stylesheet">
    <link href="/css/docs.css" rel="stylesheet">
    <link href="/css/pygments.css" rel="stylesheet">
    <link href="/js/google-code-prettify/prettify.css" rel="stylesheet">	

    <link href="//netdna.bootstrapcdn.com/font-awesome/3.1.1/css/font-awesome.css" rel="stylesheet">
    <!-- <link href='http://fonts.googleapis.com/css?family=Libre+Baskerville' rel='stylesheet' type='text/css'> -->
	<link rel="shortcut icon" href="/favicon.ico">    
	<!-- <link href='http://fonts.googleapis.com/css?family=Open+Sans:700' rel='stylesheet' type='text/css'> -->
  </head>
  <body data-spy="scroll" data-target=".subnav" data-offset="50">
	
  <div class="navbar navbar-fixed-top">
  <div class="navbar-inner">
	<div class="container">
	  <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
		<span class="icon-bar"></span>
		<span class="icon-bar"></span>
		<span class="icon-bar"></span>
	  </a>

	  <div class="nav-collapse">
		<ul class="nav">		  
		  <li class="">
			<a href="/"><i class="icon-home icon-large" style="vertical-align:text-bottom;" rel="tooltip" data-placement="bottom" title="Home page"></i></a>
		  </li>
		  <!-- <li class="divider-vertical"></li> -->
		  <li class="">
			<a href="/about.html"><i class="icon-info-sign icon-large" style="vertical-align:text-bottom;" rel="tooltip" data-placement="bottom" title="About"></i></a>
		  </li>
		  <!-- <li class="divider-vertical"></li> -->
		  <li class="">
			<!-- <a href="/R-esources.html">R-esources</a> -->
			<a href="/R-esources.html"><i class="icon-book icon-large" style="vertical-align:text-bottom;" rel="tooltip" data-placement="bottom" title="R resources"></i></a>
		  </li>
		  <!-- <li class="divider-vertical"></li> -->
		  <li class="">
			<!-- <a href="http://feeds.feedburner.com/github/wpna" title="Go to feedburner" target="_blank">RSS</a>  -->
			<a property="account" alt="rss" href="http://feeds.feedburner.com/github/wpna"><i class="icon-rss icon-large" style="vertical-align:text-bottom;" rel="tooltip" data-placement="bottom"title="RSS for Recology"></i></a>
		  </li>	
		  <!-- <li class="divider-vertical"></li> -->
		  <li class="">
			<a alt="twitter" href="https://twitter.com/recology_"><i class="icon-twitter icon-large" style="vertical-align:text-bottom;" rel="tooltip" data-placement="bottom" title="Follow Recology on Twitter"></i></a>
		  </li>	

		  <li class="">
			<a alt="adn" href="https://alpha.app.net/intent/follow/?user_id=@recology_">
				<i class="icon-font" style="vertical-align:text-bottom;" rel="tooltip" data-placement="bottom" title="Follow Recology on App.net"></i>
			</a>
		  </li>	

		  <li class="">
			<a alt="reuse" href="/fork.html"><i class="icon-spinner icon-large" style="vertical-align:text-bottom;" rel="tooltip" data-placement="bottom" title="About this blog & how to fork it"></i></a>
		  </li>	

		</ul>
			<form class="navbar-search pull-right" method="get" action="http://google.com/search">
				<input type="hidden" name="q" value="site:schamberlain.github.io"/>
				<input type="text" class="search-query" name="q">
				<button class="btn btn-mini" type="submit"><i class="icon-search"></i></button>
			</form>

	  </div>
	</div>
  </div>
</div>
	
  <div class="container">	
		<div class="row">
	<div>
<div class="row">
	<!-- <h1 align="center">Fylopic, an R wrapper to Phylopic</h1> -->
	<div class="span2">
		<br><br><br><br>
	<h4>
		<strong>
			<i class="icon-calendar icon-large"> </i> June  1, 2013  <br><br>
			<i class="icon-pencil icon-large"> </i> 726 words <br><br>
			<!-- <i class="icon-bar-chart"></i> views today 6 <br><br> -->
			<i class="icon-user icon-large"> </i> <a href="/about.html">Scott Chamberlain</a>
		</strong>
		<br><br>

		<i class="icon-tags icon-large"></i>&nbsp;
		 <a href="/tags/R" class="badge" rel="tooltip" data-placement="bottom" title="View posts tagged with &quot;R&quot;"><span class="blog_tag">R</span></a>    <a href="/tags/phylogenetic" class="badge" rel="tooltip" data-placement="bottom" title="View posts tagged with &quot;phylogenetic&quot;"><span class="blog_tag">phylogenetic</span></a>    <a href="/tags/API" class="badge" rel="tooltip" data-placement="bottom" title="View posts tagged with &quot;API&quot;"><span class="blog_tag">API</span></a>  

		<br><br><br>
		
		<p> <a href="/2013/05/rbison/" ><i class="icon-circle-arrow-left icon-2x" rel="tooltip" data-placement="bottom" title="Previous Post: BISON USGS species occurrence data"></i></a> 	  &nbsp;&nbsp;   	<a href="/2013/06/couch/"><i class="icon-circle-arrow-right icon-2x" rel="tooltip" data-placement="bottom" title="Next Post: Stashing and playing with raw data locally from the web"></i></a> 	 </p> 
	</h4>
	</div>

<!-- <div class="row"> -->
	<!-- <div class="span12 column"> -->
<div class="span8">
	<h1 align="center">Fylopic, an R wrapper to Phylopic</h1>
	<hr>
	<!-- </div> -->
<!-- </div> -->
    <h2>What is PhyloPic?</h2>

<p>PhyloPic is an awesome new service - I'll let the creator, <a href="http://tmkeesey.net/">Mike Keesey</a>, explain what it is (paraphrasing here):</p>

<blockquote><p>PhyloPic stores silhouette images of organisms, and each image is associated with taxonomic names, and stores the taxonomy of all taxa, allowing searching by taxonomic names. Anyone can submit silhouettes to PhyloPic.</p></blockquote>

<p>What is a silhouette?  It's like this:</p>

<p><img src="http://phylopic.org/assets/images/submissions/bedd622a-4de2-4067-8c70-4aa44326d229.128.png" alt="A silhouette" /></p>

<p><em>by Gareth Monger</em></p>

<p>What makes PhyloPic not just awesome, but super awesome? All or most images are licensed under <a href="http://creativecommons.org/">Creative Commons licenses</a>. This means you can use the silhouettes without having to ask or pay - just attribute.</p>

<hr />

<h2>What is fylopic?</h2>

<p>The idea behind Fylopic is to create modular bits and pieces (i.e., functions) to allow you to add silhouettes to not only ggplot2 plots, but base plots as well. That is, you can simply load fylopic in your R session, and add some silhouettes to your phylogeny, or your barchart, etc. - that is, <code>fylopic</code> is meant to be a helper in your workflow to add in silhouettes to visualizations.</p>

<p>Some people prefer base plots while others prefer ggplot2 plots (me!), so it would be nice to have both options. Phylogenies at the moment render faster in base plots. I don't yet have implementations for base plots, but will come soon, or you can send a pull request to add it.</p>

<p>One interesting use case could be to be able to get a set of silhouettes, then get a phylogeny for taxa associatd with the silhouettess using the NCBI taxonomy, but it's not easily available yet (though I may be able to use <a href="https://github.com/bendmorris/phylocommons">Ben Morris' phylocommons</a> soon. This isn't doable yet, so in the example below the function <code>make_phylo</code> creates a phylogeny using <code>ape::rcoal</code>.</p>

<p>You could also do the reverse -> you have a phylogeny and then you could search Phylopic for silhouettes.</p>

<hr />

<h2>Info</h2>

<p>Check out the Phylopic website <a href="http://phylopic.org/">here</a>, and Phylopic API developer documentation <a href="http://phylopic.org/api/">here</a>.</p>

<p>Also check out Ben Morris' Python wrapper to Phylopic <a href="https://github.com/bendmorris/python-phylopic">here</a>.</p>

<hr />

<h2>What can you do with fylopic?</h2>

<hr />

<h4>Install fylopic</h4>

<div class="highlight"><pre><code class="r">install.packages<span class="p">(</span><span class="s">&quot;devtools&quot;</span><span class="p">)</span>
library<span class="p">(</span>devtools<span class="p">)</span>
install_github<span class="p">(</span><span class="s">&quot;fylopic&quot;</span><span class="p">,</span> <span class="s">&quot;schamberlain&quot;</span><span class="p">)</span>
</code></pre></div>




<div class="highlight"><pre><code class="r">library<span class="p">(</span>fylopic<span class="p">,</span> quietly <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span>
</code></pre></div>


<hr />

<h4>Plot a phylogeny with silhouettes at the tips</h4>

<p>Here, I search for names based on keyword <em>Homo sapiens</em> - which returns many matche codes. With those results we search for any silhouettes associated with those codes. Then we download images. Finally, make a phylogeny with the silhouettes at the tips. Note that in this eample the phylogeny is just a random coalescent tree made using <code>ape::rcoal</code> - obviously, in the real world you'd want to do something more useful.</p>

<div class="highlight"><pre><code class="r"><span class="c1">## search on Homo sapiens</span>
searchres <span class="o">&lt;-</span> search_text<span class="p">(</span>text <span class="o">=</span> <span class="s">&quot;Homo sapiens&quot;</span><span class="p">,</span> options <span class="o">=</span> <span class="s">&quot;names&quot;</span><span class="p">)</span>

<span class="c1">### which returns UUIDs</span>
searchres<span class="p">[</span><span class="m">1</span><span class="o">:</span><span class="m">3</span><span class="p">]</span>
</code></pre></div>




<div class="highlight"><pre><code class="text">[1] &quot;74aea16b-666b-497a-b2cb-72201ad75a8e&quot;
[2] &quot;1ee65cf3-53db-4a52-9960-a9f7093d845d&quot;
[3] &quot;cc9ad8ee-3a82-4add-8d50-bc78f4ff6956&quot;
</code></pre></div>




<div class="highlight"><pre><code class="r"><span class="c1">## search for images based on the UUIds</span>
output <span class="o">&lt;-</span> search_images<span class="p">(</span>uuid <span class="o">=</span> searchres<span class="p">,</span> options <span class="o">=</span> c<span class="p">(</span><span class="s">&quot;pngFiles&quot;</span><span class="p">,</span> <span class="s">&quot;credit&quot;</span><span class="p">,</span> 
    <span class="s">&quot;canonicalName&quot;</span><span class="p">))</span>

<span class="c1">### we got eight matches</span>
output
</code></pre></div>




<div class="highlight"><pre><code class="text">$`15444b9c-f17f-4d6e-89b5-5990096bcfb0`
$`15444b9c-f17f-4d6e-89b5-5990096bcfb0`$supertaxa
[1] &quot;e547cd01-7dd1-495b-8239-52cf9971a609&quot;
[2] &quot;bd88f674-6976-4cb2-a46e-e6a12a8ba463&quot;


$`fedf0e5f-f20a-442c-accf-eb84a3af8c6b`
$`fedf0e5f-f20a-442c-accf-eb84a3af8c6b`$supertaxa
[1] &quot;e547cd01-7dd1-495b-8239-52cf9971a609&quot;
[2] &quot;bd88f674-6976-4cb2-a46e-e6a12a8ba463&quot;


$`a88d3a4c-44d3-409e-87b6-516bd188c709`
$`a88d3a4c-44d3-409e-87b6-516bd188c709`$supertaxa
[1] &quot;e547cd01-7dd1-495b-8239-52cf9971a609&quot;
[2] &quot;bd88f674-6976-4cb2-a46e-e6a12a8ba463&quot;


$`d88164ec-3152-444b-b41c-4757a344a764`
$`d88164ec-3152-444b-b41c-4757a344a764`$supertaxa
[1] &quot;9c6af553-390c-4bdd-baeb-6992cbc540b1&quot;


$`da5eaeb7-1ed2-4b2e-ad4a-49993881d706`
$`da5eaeb7-1ed2-4b2e-ad4a-49993881d706`$supertaxa
[1] &quot;9c6af553-390c-4bdd-baeb-6992cbc540b1&quot;
</code></pre></div>




<div class="highlight"><pre><code class="r"><span class="c1">## download images</span>
myobjs <span class="o">&lt;-</span> get_image<span class="p">(</span>uuids <span class="o">=</span> output<span class="p">,</span> size <span class="o">=</span> <span class="s">&quot;128&quot;</span><span class="p">)</span>

<span class="c1">## make the phylogeny</span>
make_phylo<span class="p">(</span>pngobj <span class="o">=</span> myobjs<span class="p">)</span>
</code></pre></div>


<p><img src="/img/2013-06-01-fylopic/unnamed-chunk-1.png" alt="center" /></p>

<hr />

<h4>Plot a silhouette behind a plot</h4>

<p>Notice in the below example that you can use normal <code>ggplot2</code> syntax, and simply add another layer (<code>add_phylopic</code> from <code>fylopic</code>) to the plot.</p>

<div class="highlight"><pre><code class="r">library<span class="p">(</span>ggplot2<span class="p">)</span>
img <span class="o">&lt;-</span> get_image<span class="p">(</span><span class="s">&quot;27356f15-3cf8-47e8-ab41-71c6260b2724&quot;</span><span class="p">,</span> size <span class="o">=</span> <span class="s">&quot;512&quot;</span><span class="p">)[[</span><span class="m">1</span><span class="p">]]</span>
qplot<span class="p">(</span>x <span class="o">=</span> Sepal.Length<span class="p">,</span> y <span class="o">=</span> Sepal.Width<span class="p">,</span> data <span class="o">=</span> iris<span class="p">,</span> geom <span class="o">=</span> <span class="s">&quot;point&quot;</span><span class="p">)</span> <span class="o">+</span> add_phylopic<span class="p">(</span>img<span class="p">)</span>
</code></pre></div>


<p><img src="/img/2013-06-01-fylopic/unnamed-chunk-2.png" alt="center" /></p>

<hr />

<h2>What's next?</h2>

<p>This is a side project, so if anyone has interest in helping please do contribute code, report bugs, request features, etc.</p>

</div>
    

	</div>

	<!-- <div class="row"> -->
    <div class="span10 offset1">
<footer class="footer">
	<!-- <p class="pull-right"> <a href="/2013/05/rbison/" title="Previous Post: BISON USGS species occurrence data">&laquo; Previous Blog Post</a> 	  |  <a href="#">Back to top</a>  |   	<a href="/2013/06/couch/" title="Next Post: Stashing and playing with raw data locally from the web">Next Blog Post &raquo; </a> 	 </p>  -->

    <p class="pull-right" > <a href="/2013/05/rbison/" ><i class="icon-circle-arrow-left icon-2x" rel="tooltip" data-placement="bottom" title="Previous Post: BISON USGS species occurrence data"></i></a>   &nbsp;&nbsp;     <a href="/2013/06/couch/" ><i class="icon-circle-arrow-right icon-2x" rel="tooltip" data-placement="bottom" title="Next Post: Stashing and playing with raw data locally from the web"></i></a>    </p> 

	<br><br/>

    

	<br><br/>
	<div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'recology'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    <div>
    <div class="span6">
	<p>
        Designed and built using <a href="http://twitter.github.com/bootstrap/" target="_blank">Twitter Bootstrap</a> and <a href="http://jekyllrb.com/"  target="_blank">Jekyll</a>. Icons from <a href="http://fortawesome.github.com/Font-Awesome">Font Awesome by Dave Gandy</a>, licensed under <a href="http://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>. More details about the site <a href="/fork.html">here</a>. Page last generated on June 18, 2013.
    </p>
    </div>
	<div class="span1">
      <p>
        <a rel="license" property="http://creativecommons.org/ns#license" href="http://creativecommons.org/publicdomain/zero/1.0/" onclick="recordOutboundLink(this, 'Outbound Links', 'CC0'); return false;"><img src="http://i.creativecommons.org/l/zero/1.0/88x31.png" alt="CC0"/></a>
    </p>
    </div>

    <div class="span1">
    <p>
        <a href="http://ropensci.org/"><img src="/img/ropensci_main.png" height="70" width="160"></a>
    </p>
    </div>

    </div>


     <script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>
    <script src="/js/jquery.js"></script>
    <script src="/js/google-code-prettify/prettify.js"></script>
    <script src="/js/bootstrap-transition.js"></script>
    <script src="/js/bootstrap-alert.js"></script>
    <script src="/js/bootstrap-modal.js"></script>
    <script src="/js/bootstrap-dropdown.js"></script>
    <script src="/js/bootstrap-scrollspy.js"></script>
    <script src="/js/bootstrap-tab.js"></script>
    <script src="/js/bootstrap-tooltip.js"></script>
    <script src="/js/bootstrap-popover.js"></script>
    <script src="/js/bootstrap-button.js"></script>
    <script src="/js/bootstrap-collapse.js"></script>
    <script src="/js/bootstrap-carousel.js"></script>
    <script src="/js/bootstrap-typeahead.js"></script>
    <script src="/js/application.js"></script>
    <script src="/js/custom.js" type="text/javascript"></script>    
    
     <script type="text/javascript">
        $('[rel=tooltip]').tooltip();
    </script>
    
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'recology'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function () {
            var s = document.createElement('script'); s.async = true;
            s.type = 'text/javascript';
            s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
    </script>
    
    <!-- Google Analytics -->
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-28059658-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>   

    <script type="text/javascript">
      var _gauges = _gauges || [];
      (function() {
        var t   = document.createElement('script');
        t.type  = 'text/javascript';
        t.async = true;
        t.id    = 'gauges-tracker';
        t.setAttribute('data-site-id', '4efd83a6f5a1f5158a000004');
        t.src = '//secure.gaug.es/track.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(t, s);
      })();
    </script>

</footer>
<br><br>

</div>
<!-- </div> -->
		
	    </div>
 	</div>

  </body>
</html>
