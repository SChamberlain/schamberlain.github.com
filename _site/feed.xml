<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0">
	<channel>
		<title></title>
		<link>http://localhost:4000</link>
		
			<item>
				<title>CascadiaRConf</title>
				<description>&lt;h1 class=&quot;center&quot;&gt;Save the date for CascadiaRConf!&lt;/h1&gt;

&lt;p&gt;Website: &lt;a href=&quot;https://cascadiarconf.com/&quot;&gt;https://cascadiarconf.com/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Twitter: &lt;a href=&quot;https://twitter.com/cascadiarconf/&quot;&gt;https://twitter.com/cascadiarconf/&lt;/a&gt;&lt;/p&gt;

</description>
				<published>2017-03-23 00:00:00 -0700</published>
				<link>http://localhost:4000/2017/03/cascadiarconf/</link>
			</item>
		
			<item>
				<title>USDA plants database API in R</title>
				<description>&lt;p&gt;The USDA maintains a database of plant information, some of it trait data, some
of it life history. Check it out at &lt;a href=&quot;http://plants.usda.gov/java/&quot;&gt;http://plants.usda.gov/java/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;They’ve been talking about releasing an API for a long time, but have not done so.&lt;/p&gt;

&lt;p&gt;Thus, since at least some version of their data is in the public web,
I’ve created a RESTful API for the data:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;source code: &lt;a href=&quot;https://github.com/sckott/usdaplantsapi/&quot;&gt;https://github.com/sckott/usdaplantsapi/&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;base URL: &lt;a href=&quot;https://plantsdb.xyz&quot;&gt;https://plantsdb.xyz&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Check out the API, and open issues for bugs/feature requests in the github repo.&lt;/p&gt;

&lt;p&gt;The following is an example using it from R, but you can use it from anywhere,
the command line, Ruby, Python, a browser, whatevs.&lt;/p&gt;

&lt;p&gt;Here, we’ll use &lt;a href=&quot;https://github.com/sckott/request&quot;&gt;request&lt;/a&gt;, a higher level
http client for R that I’ve been working on. A small quirk with &lt;code class=&quot;highlighter-rouge&quot;&gt;request&lt;/code&gt; is that
when piping, you have to assign the output of the request to an object before you
can do any further manipulation. But that’s probably good for avoiding too long
pipe chains.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;note, that I’ve set &lt;code class=&quot;highlighter-rouge&quot;&gt;tibble.max_extra_cols = 15&lt;/code&gt; to not print the many 
columns that are returned, for blog post brevity. When you run below
you’ll get more columns.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Install from CRAN&lt;/p&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;install.packages&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;request&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;There is a small improvement in the dev version of &lt;code class=&quot;highlighter-rouge&quot;&gt;request&lt;/code&gt; to make any data.frame’s
tibble’s (which the below examples uses). To get that install from GitHub:&lt;/p&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;devtools&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;install_github&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;sckott/request&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;library&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'request'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;library&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'tibble'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;heartbeat&quot;&gt;Heartbeat&lt;/h3&gt;

&lt;p&gt;The simplest call to the API is to a route &lt;code class=&quot;highlighter-rouge&quot;&gt;/heartbeat&lt;/code&gt;,
which just lists the available routes.&lt;/p&gt;

&lt;p&gt;Set the base url we’ll use throughout the work below&lt;/p&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;api&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;https://plantsdb.xyz&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&amp;gt;%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;api_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;heartbeat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;#&amp;gt; $routes
#&amp;gt; [1] &quot;/search (HEAD, GET)&quot; &quot;/heartbeat&quot;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Okay, so there are just two routes, &lt;code class=&quot;highlighter-rouge&quot;&gt;/search&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;/heartbeat&lt;/code&gt;.&lt;/p&gt;

&lt;h2 id=&quot;search&quot;&gt;Search&lt;/h2&gt;

&lt;p&gt;The search route suppports the following parameters:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;fields&lt;/code&gt;, e.g., &lt;code class=&quot;highlighter-rouge&quot;&gt;fields='Genus,Species'&lt;/code&gt; (default: all fields returned)&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;limit&lt;/code&gt;, e.g., &lt;code class=&quot;highlighter-rouge&quot;&gt;limit=10&lt;/code&gt; (default: 10)&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;offset&lt;/code&gt;, e.g., &lt;code class=&quot;highlighter-rouge&quot;&gt;offset=1&lt;/code&gt; (default: 0)&lt;/li&gt;
  &lt;li&gt;search on any fields in the output, e.g, &lt;code class=&quot;highlighter-rouge&quot;&gt;Genus=Pinus&lt;/code&gt; or &lt;code class=&quot;highlighter-rouge&quot;&gt;Species=annua&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;basic-search&quot;&gt;basic search&lt;/h3&gt;

&lt;p&gt;Let’s first not pass any params&lt;/p&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&amp;gt;%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;api_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;search&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;#&amp;gt; $count
#&amp;gt; [1] 92171
#&amp;gt; 
#&amp;gt; $returned
#&amp;gt; [1] 10
#&amp;gt; 
#&amp;gt; $citation
#&amp;gt; [1] &quot;USDA, NRCS. 2016. The PLANTS Database (http://plants.usda.gov, 12 July 2016). National Plant Data Team, Greensboro, NC 27401-4901 USA.&quot;
#&amp;gt; 
#&amp;gt; $terms
#&amp;gt; [1] &quot;Our plant information, including the distribution maps, lists, and text, is not copyrighted and is free for any use.&quot;
#&amp;gt; 
#&amp;gt; $data
#&amp;gt; # A tibble: 10 × 134
#&amp;gt;       id Symbol Accepted_Symbol_x Synonym_Symbol_x
#&amp;gt; *  &amp;lt;int&amp;gt;  &amp;lt;chr&amp;gt;             &amp;lt;chr&amp;gt;            &amp;lt;chr&amp;gt;
#&amp;gt; 1      1   ABAB              ABAB                 
#&amp;gt; 2      2  ABAB2             ABPR3            ABAB2
#&amp;gt; 3      3  ABAB3              ABTH            ABAB3
#&amp;gt; 4      4 ABAB70            ABAB70                 
#&amp;gt; 5      5   ABAC             ABUMB             ABAC
#&amp;gt; 6      6   ABAL              ABAL                 
#&amp;gt; 7      7  ABAL2             ABUMU            ABAL2
#&amp;gt; 8      8  ABAL3             ABAL3                 
#&amp;gt; 9      9   ABAM              ABAM                 
#&amp;gt; 10    10  ABAM2             ABAM2                 
#&amp;gt; # ... with 130 more variables: Scientific_Name_x &amp;lt;chr&amp;gt;,
#&amp;gt; #   Hybrid_Genus_Indicator &amp;lt;chr&amp;gt;, Hybrid_Species_Indicator &amp;lt;chr&amp;gt;,
#&amp;gt; #   Species &amp;lt;chr&amp;gt;, Subspecies_Prefix &amp;lt;chr&amp;gt;,
#&amp;gt; #   Hybrid_Subspecies_Indicator &amp;lt;chr&amp;gt;, Subspecies &amp;lt;chr&amp;gt;,
#&amp;gt; #   Variety_Prefix &amp;lt;chr&amp;gt;, Hybrid_Variety_Indicator &amp;lt;chr&amp;gt;, Variety &amp;lt;chr&amp;gt;,
#&amp;gt; #   Subvariety_Prefix &amp;lt;chr&amp;gt;, Subvariety &amp;lt;chr&amp;gt;, Forma_Prefix &amp;lt;chr&amp;gt;,
#&amp;gt; #   Forma &amp;lt;chr&amp;gt;, Genera_Binomial_Author &amp;lt;chr&amp;gt;, ...
#&amp;gt; 
#&amp;gt; $error
#&amp;gt; NULL
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;You get slots:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;count&lt;/code&gt;: number of results found&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;returned&lt;/code&gt;: numbef of results returned&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;citation&lt;/code&gt;: suggested citation, from USDA&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;terms&lt;/code&gt;: terms of use, from USDA&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;data&lt;/code&gt;: the results&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;error&lt;/code&gt;: if an error occurred, you’ll see the message here&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Note that if any data.frame’s are found, we make them into tibble’s, nicely
formatted data.frame’s that make it easy to deal with large data.&lt;/p&gt;

&lt;h3 id=&quot;pagination&quot;&gt;Pagination&lt;/h3&gt;

&lt;p&gt;limit number of results&lt;/p&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&amp;gt;%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;api_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;search&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&amp;gt;%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;api_query&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;limit&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;#&amp;gt; $count
#&amp;gt; [1] 92171
#&amp;gt; 
#&amp;gt; $returned
#&amp;gt; [1] 5
#&amp;gt; 
#&amp;gt; $citation
#&amp;gt; [1] &quot;USDA, NRCS. 2016. The PLANTS Database (http://plants.usda.gov, 12 July 2016). National Plant Data Team, Greensboro, NC 27401-4901 USA.&quot;
#&amp;gt; 
#&amp;gt; $terms
#&amp;gt; [1] &quot;Our plant information, including the distribution maps, lists, and text, is not copyrighted and is free for any use.&quot;
#&amp;gt; 
#&amp;gt; $data
#&amp;gt; # A tibble: 5 × 134
#&amp;gt;      id Symbol Accepted_Symbol_x Synonym_Symbol_x
#&amp;gt; * &amp;lt;int&amp;gt;  &amp;lt;chr&amp;gt;             &amp;lt;chr&amp;gt;            &amp;lt;chr&amp;gt;
#&amp;gt; 1     1   ABAB              ABAB                 
#&amp;gt; 2     2  ABAB2             ABPR3            ABAB2
#&amp;gt; 3     3  ABAB3              ABTH            ABAB3
#&amp;gt; 4     4 ABAB70            ABAB70                 
#&amp;gt; 5     5   ABAC             ABUMB             ABAC
#&amp;gt; # ... with 130 more variables: Scientific_Name_x &amp;lt;chr&amp;gt;,
#&amp;gt; #   Hybrid_Genus_Indicator &amp;lt;chr&amp;gt;, Hybrid_Species_Indicator &amp;lt;chr&amp;gt;,
#&amp;gt; #   Species &amp;lt;chr&amp;gt;, Subspecies_Prefix &amp;lt;chr&amp;gt;,
#&amp;gt; #   Hybrid_Subspecies_Indicator &amp;lt;chr&amp;gt;, Subspecies &amp;lt;chr&amp;gt;,
#&amp;gt; #   Variety_Prefix &amp;lt;chr&amp;gt;, Hybrid_Variety_Indicator &amp;lt;chr&amp;gt;, Variety &amp;lt;chr&amp;gt;,
#&amp;gt; #   Subvariety_Prefix &amp;lt;chr&amp;gt;, Subvariety &amp;lt;chr&amp;gt;, Forma_Prefix &amp;lt;chr&amp;gt;,
#&amp;gt; #   Forma &amp;lt;chr&amp;gt;, Genera_Binomial_Author &amp;lt;chr&amp;gt;, ...
#&amp;gt; 
#&amp;gt; $error
#&amp;gt; NULL
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;change record to start at&lt;/p&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&amp;gt;%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;api_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;search&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&amp;gt;%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;api_query&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;limit&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;offset&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;#&amp;gt; $count
#&amp;gt; [1] 92161
#&amp;gt; 
#&amp;gt; $returned
#&amp;gt; [1] 5
#&amp;gt; 
#&amp;gt; $citation
#&amp;gt; [1] &quot;USDA, NRCS. 2016. The PLANTS Database (http://plants.usda.gov, 12 July 2016). National Plant Data Team, Greensboro, NC 27401-4901 USA.&quot;
#&amp;gt; 
#&amp;gt; $terms
#&amp;gt; [1] &quot;Our plant information, including the distribution maps, lists, and text, is not copyrighted and is free for any use.&quot;
#&amp;gt; 
#&amp;gt; $data
#&amp;gt; # A tibble: 5 × 134
#&amp;gt;      id Symbol Accepted_Symbol_x Synonym_Symbol_x
#&amp;gt; * &amp;lt;int&amp;gt;  &amp;lt;chr&amp;gt;             &amp;lt;chr&amp;gt;            &amp;lt;chr&amp;gt;
#&amp;gt; 1    11  ABAM3             ABAM3                 
#&amp;gt; 2    12  ABAM4              NAAM            ABAM4
#&amp;gt; 3    13  ABAM5              ABAB            ABAM5
#&amp;gt; 4    14   ABAN              ABAN                 
#&amp;gt; 5    15  ABANA              ABAN            ABANA
#&amp;gt; # ... with 130 more variables: Scientific_Name_x &amp;lt;chr&amp;gt;,
#&amp;gt; #   Hybrid_Genus_Indicator &amp;lt;chr&amp;gt;, Hybrid_Species_Indicator &amp;lt;chr&amp;gt;,
#&amp;gt; #   Species &amp;lt;chr&amp;gt;, Subspecies_Prefix &amp;lt;chr&amp;gt;,
#&amp;gt; #   Hybrid_Subspecies_Indicator &amp;lt;chr&amp;gt;, Subspecies &amp;lt;chr&amp;gt;,
#&amp;gt; #   Variety_Prefix &amp;lt;chr&amp;gt;, Hybrid_Variety_Indicator &amp;lt;chr&amp;gt;, Variety &amp;lt;chr&amp;gt;,
#&amp;gt; #   Subvariety_Prefix &amp;lt;chr&amp;gt;, Subvariety &amp;lt;chr&amp;gt;, Forma_Prefix &amp;lt;chr&amp;gt;,
#&amp;gt; #   Forma &amp;lt;chr&amp;gt;, Genera_Binomial_Author &amp;lt;chr&amp;gt;, ...
#&amp;gt; 
#&amp;gt; $error
#&amp;gt; NULL
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;return-fields&quot;&gt;Return fields&lt;/h3&gt;

&lt;p&gt;You can say what fields you want returned, useful when you just want a
subset of fields&lt;/p&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&amp;gt;%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;api_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;search&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&amp;gt;%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;api_query&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fields&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'Genus,Species,Symbol'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;#&amp;gt; $count
#&amp;gt; [1] 92171
#&amp;gt; 
#&amp;gt; $returned
#&amp;gt; [1] 10
#&amp;gt; 
#&amp;gt; $citation
#&amp;gt; [1] &quot;USDA, NRCS. 2016. The PLANTS Database (http://plants.usda.gov, 12 July 2016). National Plant Data Team, Greensboro, NC 27401-4901 USA.&quot;
#&amp;gt; 
#&amp;gt; $terms
#&amp;gt; [1] &quot;Our plant information, including the distribution maps, lists, and text, is not copyrighted and is free for any use.&quot;
#&amp;gt; 
#&amp;gt; $data
#&amp;gt; # A tibble: 10 × 3
#&amp;gt;    Symbol     Species       Genus
#&amp;gt; *   &amp;lt;chr&amp;gt;       &amp;lt;chr&amp;gt;       &amp;lt;chr&amp;gt;
#&amp;gt; 1    ABAB abutiloides    Abutilon
#&amp;gt; 2   ABAB2       abrus       Abrus
#&amp;gt; 3   ABAB3    abutilon    Abutilon
#&amp;gt; 4  ABAB70    abietina Abietinella
#&amp;gt; 5    ABAC   acutalata     Abronia
#&amp;gt; 6    ABAL      alpina     Abronia
#&amp;gt; 7   ABAL2        alba     Abronia
#&amp;gt; 8   ABAL3        alba       Abies
#&amp;gt; 9    ABAM    amabilis       Abies
#&amp;gt; 10  ABAM2     ameliae     Abronia
#&amp;gt; 
#&amp;gt; $error
#&amp;gt; NULL
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;query&quot;&gt;Query&lt;/h3&gt;

&lt;p&gt;You can query on individual fields&lt;/p&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&amp;gt;%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;api_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;search&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&amp;gt;%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;api_query&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Genus&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Pinus&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fields&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Genus,Species&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;#&amp;gt; $count
#&amp;gt; [1] 185
#&amp;gt; 
#&amp;gt; $returned
#&amp;gt; [1] 10
#&amp;gt; 
#&amp;gt; $citation
#&amp;gt; [1] &quot;USDA, NRCS. 2016. The PLANTS Database (http://plants.usda.gov, 12 July 2016). National Plant Data Team, Greensboro, NC 27401-4901 USA.&quot;
#&amp;gt; 
#&amp;gt; $terms
#&amp;gt; [1] &quot;Our plant information, including the distribution maps, lists, and text, is not copyrighted and is free for any use.&quot;
#&amp;gt; 
#&amp;gt; $data
#&amp;gt; # A tibble: 10 × 2
#&amp;gt;       Species Genus
#&amp;gt; *       &amp;lt;chr&amp;gt; &amp;lt;chr&amp;gt;
#&amp;gt; 1  albicaulis Pinus
#&amp;gt; 2    apacheca Pinus
#&amp;gt; 3    aristata Pinus
#&amp;gt; 4   arizonica Pinus
#&amp;gt; 5    armandii Pinus
#&amp;gt; 6   arizonica Pinus
#&amp;gt; 7    aristata Pinus
#&amp;gt; 8   arizonica Pinus
#&amp;gt; 9   arizonica Pinus
#&amp;gt; 10  attenuata Pinus
#&amp;gt; 
#&amp;gt; $error
#&amp;gt; NULL
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Another query example&lt;/p&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&amp;gt;%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;api_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;search&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&amp;gt;%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;api_query&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Species&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;annua&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fields&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Genus,Species&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;#&amp;gt; $count
#&amp;gt; [1] 30
#&amp;gt; 
#&amp;gt; $returned
#&amp;gt; [1] 10
#&amp;gt; 
#&amp;gt; $citation
#&amp;gt; [1] &quot;USDA, NRCS. 2016. The PLANTS Database (http://plants.usda.gov, 12 July 2016). National Plant Data Team, Greensboro, NC 27401-4901 USA.&quot;
#&amp;gt; 
#&amp;gt; $terms
#&amp;gt; [1] &quot;Our plant information, including the distribution maps, lists, and text, is not copyrighted and is free for any use.&quot;
#&amp;gt; 
#&amp;gt; $data
#&amp;gt; # A tibble: 10 × 2
#&amp;gt;    Species         Genus
#&amp;gt; *    &amp;lt;chr&amp;gt;         &amp;lt;chr&amp;gt;
#&amp;gt; 1    annua        Adonis
#&amp;gt; 2    annua     Artemisia
#&amp;gt; 3    annua   Bulbostylis
#&amp;gt; 4    annua    Castilleja
#&amp;gt; 5    annua   Craniolaria
#&amp;gt; 6    annua Dimorphotheca
#&amp;gt; 7    annua       Drosera
#&amp;gt; 8    annua    Eleocharis
#&amp;gt; 9    annua  Fimbristylis
#&amp;gt; 10   annua    Heliomeris
#&amp;gt; 
#&amp;gt; $error
#&amp;gt; NULL
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;And one more example, here we’re interested in finding taxa that are perennials&lt;/p&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&amp;gt;%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;api_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;search&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&amp;gt;%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;api_query&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Duration&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Perennial&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fields&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Genus,Species,Symbol,Duration&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;#&amp;gt; $count
#&amp;gt; [1] 25296
#&amp;gt; 
#&amp;gt; $returned
#&amp;gt; [1] 10
#&amp;gt; 
#&amp;gt; $citation
#&amp;gt; [1] &quot;USDA, NRCS. 2016. The PLANTS Database (http://plants.usda.gov, 12 July 2016). National Plant Data Team, Greensboro, NC 27401-4901 USA.&quot;
#&amp;gt; 
#&amp;gt; $terms
#&amp;gt; [1] &quot;Our plant information, including the distribution maps, lists, and text, is not copyrighted and is free for any use.&quot;
#&amp;gt; 
#&amp;gt; $data
#&amp;gt; # A tibble: 10 × 4
#&amp;gt;    Symbol     Species  Duration    Genus
#&amp;gt; *   &amp;lt;chr&amp;gt;       &amp;lt;chr&amp;gt;     &amp;lt;chr&amp;gt;    &amp;lt;chr&amp;gt;
#&amp;gt; 1    ABAB abutiloides Perennial Abutilon
#&amp;gt; 2    ABAL      alpina Perennial  Abronia
#&amp;gt; 3   ABAL3        alba Perennial    Abies
#&amp;gt; 4    ABAM    amabilis Perennial    Abies
#&amp;gt; 5   ABAM2     ameliae Perennial  Abronia
#&amp;gt; 6   ABAM3   ammophila Perennial  Abronia
#&amp;gt; 7    ABAR   argillosa Perennial  Abronia
#&amp;gt; 8    ABAU     auritum Perennial Abutilon
#&amp;gt; 9    ABBA    balsamea Perennial    Abies
#&amp;gt; 10  ABBAB    balsamea Perennial    Abies
#&amp;gt; 
#&amp;gt; $error
#&amp;gt; NULL
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
</description>
				<published>2016-10-19 00:00:00 -0700</published>
				<link>http://localhost:4000/2016/10/usda-plants-database-r/</link>
			</item>
		
			<item>
				<title>gbids - GenBank IDs API is back up!</title>
				<description>&lt;h2 id=&quot;gbids-api-is-back&quot;&gt;GBIDS API is back&lt;/h2&gt;

&lt;p&gt;Back in March this year I wrote &lt;a href=&quot;http://recology.info/2016/03/genbank-ids/&quot;&gt;a post about a new API for working with GenBank IDs&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I had to take the API down because it was too expensive to keep up. Expensive because the dump of data is very large (3.8 GB compressed), and I need disk space on the server to uncompress that to I think about 18 GB, then load into MySQL, which is another maybe 30 GB or so. Anyway, it’s not expensive because of high traffic - although I wish that was the case - but because of needing lots of disk space.&lt;/p&gt;

&lt;p&gt;I was fortuntate to recently receive some &lt;a href=&quot;https://aws.amazon.com/research-credits/&quot;&gt;Amazon Cloud Credits for Research&lt;/a&gt;. The credits expire in 1 year. With these credits, I’ve put the GBIDS API back up. In the next year I’m hoping to gain user traction suggesting that’s is useful to enough people to keep maintaining - in which case I’ll seek ways to fund it.&lt;/p&gt;

&lt;p&gt;But that means I need people to use it!  So please to give it a try. Let me know what could be better; what could be faster; what API routes/features/etc. you’d like to see.&lt;/p&gt;

&lt;h2 id=&quot;plans&quot;&gt;Plans&lt;/h2&gt;

&lt;p&gt;Plans for the future of the GBIDS API:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Auto-update the Genbank data. This is quite complicated since the dump is so large. I can either keep an EC2 attached disc large enough to do the dump download/expansion/load/etc, or spin up a new instance each Sunday when they do their data release, do the SQL load, make a dump, then shuttle the SQL dump to the instance running, then load in the new data from the dump. I haven’t got this bit running yet, so data is from Aug 7. 2016.&lt;/li&gt;
  &lt;li&gt;Add taxonomic IDs. Genbank also dumps their taxonomic IDs. I think it should be possible to get taxonomic IDs into the API, so that users can do accession number to taxon IDs and vice versa.&lt;/li&gt;
  &lt;li&gt;Performance: as anyone would want, I want to continually improve performance. I’ll watch out for things I can do, but also let me know what seems too slow.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;links&quot;&gt;Links&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;API base url: &lt;a href=&quot;https://gbids.xyz&quot;&gt;https://gbids.xyz&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;API docs: &lt;a href=&quot;http://recology.info/gbidsdocs&quot;&gt;http://recology.info/gbidsdocs&lt;/a&gt; - Let me know if these could be improved&lt;/li&gt;
  &lt;li&gt;API status page: &lt;a href=&quot;http://recology.info/gbidsstatus&quot;&gt;http://recology.info/gbidsstatus&lt;/a&gt; - I update this page whenever there’s some down time, then when it’s back up, etc.&lt;/li&gt;
  &lt;li&gt;API source code: &lt;a href=&quot;https://github.com/sckott/gbids&quot;&gt;https://github.com/sckott/gbids&lt;/a&gt; - You can file issues here about the API&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;try-it&quot;&gt;Try it&lt;/h2&gt;

&lt;p&gt;Get 5 accession numbers&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;curl 'https://gbids.xyz/acc?limit=5' | jq .
#&amp;gt; {
#&amp;gt;   &quot;matched&quot;: 692006925,
#&amp;gt;   &quot;returned&quot;: 5,
#&amp;gt;   &quot;data&quot;: [
#&amp;gt;     &quot;A00002&quot;,
#&amp;gt;     &quot;A00003&quot;,
#&amp;gt;     &quot;X17276&quot;,
#&amp;gt;     &quot;X60065&quot;,
#&amp;gt;     &quot;CAA42669&quot;
#&amp;gt;   ],
#&amp;gt;   &quot;error&quot;: null
#&amp;gt; }
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Request to match accession identifiers, some exist, while some do not&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;curl 'https://gbids.xyz/acc/AACY024124486,AACY024124483,asdfd,asdf,AACY024124476' | jq .
#&amp;gt; {
#&amp;gt;   &quot;matched&quot;: 3,
#&amp;gt;   &quot;returned&quot;: 5,
#&amp;gt;   &quot;data&quot;: {
#&amp;gt;     &quot;AACY024124486&quot;: true,
#&amp;gt;     &quot;AACY024124483&quot;: true,
#&amp;gt;     &quot;asdfd&quot;: false,
#&amp;gt;     &quot;asdf&quot;: false,
#&amp;gt;     &quot;AACY024124476&quot;: true
#&amp;gt;   },
#&amp;gt;   &quot;error&quot;: null
#&amp;gt; }
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;There’s many more examples in the &lt;a href=&quot;http://recology.info/gbidsdocs&quot;&gt;API docs&lt;/a&gt;&lt;/p&gt;
</description>
				<published>2016-09-01 00:00:00 -0700</published>
				<link>http://localhost:4000/2016/09/gbids-is-back/</link>
			</item>
		
			<item>
				<title>nonoyes - text analysis of Reply All podcast transcripts</title>
				<description>&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;#setup&quot;&gt;Setup&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#urls&quot;&gt;URLs&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#episode-names&quot;&gt;Episode names&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#transcripts&quot;&gt;Transcripts&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#summary-word-usage&quot;&gt;Summary word usage&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#sentiment&quot;&gt;Sentiment&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#most-common-positive-and-negative-words&quot;&gt;Most common positive and negative
words&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;a href=&quot;https://gimletmedia.com/show/reply-all/&quot;&gt;Reply All&lt;/a&gt; is a great podcast.
I’ve been wanting to learn some text analysis tools, and transcripts
from the podcast are on their site.&lt;/p&gt;

&lt;p&gt;Took some approaches outlined in the
&lt;a href=&quot;https://cran.rstudio.com/web/packages/tidytext/&quot;&gt;tidytext&lt;/a&gt; package in
&lt;a href=&quot;https://cran.rstudio.com/web/packages/tidytext/vignettes/tidytext.html&quot;&gt;this
vignette&lt;/a&gt;,
and used the
&lt;a href=&quot;https://cran.rstudio.com/web/packages/tokenizers&quot;&gt;tokenizers&lt;/a&gt; package,
and some of the tidyverse.&lt;/p&gt;

&lt;p&gt;Code on github at &lt;a href=&quot;https://github.com/sckott/nonoyes&quot;&gt;sckott/nonoyes&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Also check out the &lt;a href=&quot;http://htmlpreview.github.io/?https://github.com/sckott/nonoyes/blob/master/script.html&quot;&gt;html version&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;setup&quot;&gt;Setup&lt;/h2&gt;

&lt;p&gt;Load deps&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;library(&quot;httr&quot;)
library(&quot;xml2&quot;)
library(&quot;stringi&quot;)
library(&quot;dplyr&quot;)
library(&quot;ggplot2&quot;)
library(&quot;tokenizers&quot;)
library(&quot;tidytext&quot;)
library(&quot;tidyr&quot;)
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;source helper functions&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;source(&quot;funs.R&quot;)
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;set base url&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ra_base &amp;lt;- &quot;https://gimletmedia.com/show/reply-all/episodes&quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;urls&quot;&gt;URLs&lt;/h2&gt;

&lt;p&gt;Make all urls for each page of episodes&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;urls &amp;lt;- c(ra_base, file.path(ra_base, &quot;page&quot;, 2:8))
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Get urls for each episode&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;res &amp;lt;- lapply(urls, get_urls)
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Remove those that are rebroadcasts, updates, or revisited&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;res &amp;lt;- grep(&quot;rebroadcast|update|revisited&quot;, unlist(res), value = TRUE, invert = TRUE)
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;episode-names&quot;&gt;Episode names&lt;/h2&gt;

&lt;p&gt;Give some episodes numbers that don’t have them&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;epnames &amp;lt;- sub(&quot;/$&quot;, &quot;&quot;, sub(&quot;https://gimletmedia.com/episode/&quot;, &quot;&quot;, res))
epnames &amp;lt;- sub(&quot;the-anxiety-box&quot;, &quot;8-the-anxiety-box&quot;, epnames)
epnames &amp;lt;- sub(&quot;french-connection&quot;, &quot;10-french-connection&quot;, epnames)
epnames &amp;lt;- sub(&quot;ive-killed-people-and-i-have-hostages&quot;, &quot;15-ive-killed-people-and-i-have-hostages&quot;, epnames)
epnames &amp;lt;- sub(&quot;6-this-proves-everything&quot;, &quot;75-this-proves-everything&quot;, epnames)
epnames &amp;lt;- sub(&quot;zardulu&quot;, &quot;56-zardulu&quot;, epnames)
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;transcripts&quot;&gt;Transcripts&lt;/h2&gt;

&lt;p&gt;Get transcripts&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;txts &amp;lt;- lapply(res, transcript_fetch, sleep = 1)
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Parse transcripts&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;txtsp &amp;lt;- lapply(txts, transcript_parse)
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;summary-word-usage&quot;&gt;Summary word usage&lt;/h2&gt;

&lt;p&gt;Summarise data for each transcript&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;dat &amp;lt;- stats::setNames(lapply(txtsp, function(m) {
  bind_rows(lapply(m, function(v) {
    tmp &amp;lt;- unname(vapply(v, nchar, 1))
    data_frame(
      n = length(tmp),
      mean = mean(tmp),
      n_laugh = count_word(v, &quot;laugh&quot;),
      n_groan = count_word(v, &quot;groan&quot;)
    )
  }), .id = &quot;name&quot;)
}), epnames)
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Bind data together to single dataframe, and filter, summarise&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;data &amp;lt;- bind_rows(dat, .id = &quot;episode&quot;) %&amp;gt;%
  filter(!is.na(episode)) %&amp;gt;%
  filter(grepl(&quot;^PJ$|^ALEX GOLDMAN$&quot;, name)) %&amp;gt;%
  mutate(ep_no = as.numeric(strextract(episode, &quot;^[0-9]+&quot;))) %&amp;gt;%
  group_by(ep_no) %&amp;gt;%
  mutate(nrow = NROW(ep_no)) %&amp;gt;%
  ungroup() %&amp;gt;%
  filter(nrow == 2)
data
#&amp;gt; # A tibble: 114 × 8
#&amp;gt;                 episode         name     n      mean n_laugh n_groan ep_no
#&amp;gt;                   &amp;lt;chr&amp;gt;        &amp;lt;chr&amp;gt; &amp;lt;int&amp;gt;     &amp;lt;dbl&amp;gt;   &amp;lt;int&amp;gt;   &amp;lt;int&amp;gt; &amp;lt;dbl&amp;gt;
#&amp;gt; 1            73-sandbox           PJ    89 130.65169       9       0    73
#&amp;gt; 2            73-sandbox ALEX GOLDMAN    25  44.00000       1       1    73
#&amp;gt; 3       72-dead-is-paul           PJ   137  67.77372      17       0    72
#&amp;gt; 4       72-dead-is-paul ALEX GOLDMAN    90  61.82222       8       0    72
#&amp;gt; 5  71-the-picture-taker           PJ    74  77.70270       3       0    71
#&amp;gt; 6  71-the-picture-taker ALEX GOLDMAN    93 105.94624       6       0    71
#&amp;gt; 7        69-disappeared           PJ    72  76.50000       2       0    69
#&amp;gt; 8        69-disappeared ALEX GOLDMAN    50 135.90000       5       0    69
#&amp;gt; 9      68-vampire-rules           PJ   142  88.00704       6       0    68
#&amp;gt; 10     68-vampire-rules ALEX GOLDMAN   117  73.16239      13       0    68
#&amp;gt; # ... with 104 more rows, and 1 more variables: nrow &amp;lt;int&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Number of words - seems PJ talks more, but didn’t do quantiative
comparison&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ggplot(data, aes(ep_no, n, colour = name)) +
  geom_point(size = 3, alpha = 0.5) +
  geom_line(aes(group = ep_no), colour = &quot;black&quot;) +
  scale_color_discrete(labels = c('Alex', 'PJ'))
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/public/img/2016-08-25-no-no-yes/unnamed-chunk-12-1.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Laughs per episode - take home: PJ laughs a lot&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ggplot(data, aes(ep_no, n_laugh, colour = name)) +
  geom_point(size = 3, alpha = 0.5) +
  geom_line(aes(group = ep_no), colour = &quot;black&quot;) +
  scale_color_discrete(labels = c('Alex', 'PJ'))
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/public/img/2016-08-25-no-no-yes/unnamed-chunk-13-1.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;sentiment&quot;&gt;Sentiment&lt;/h2&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;zero &amp;lt;- which(vapply(txtsp, length, 1) == 0)
txtsp_ &amp;lt;- Filter(function(x) length(x) != 0, txtsp)
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Tokenize words, and create data_frame&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;wordz &amp;lt;- stats::setNames(
  lapply(txtsp_, function(z) {
    bind_rows(
      if (is.null(try_tokenize(z$`ALEX GOLDMAN`))) {
        data_frame()
      } else {
        data_frame(
          name = &quot;Alex&quot;,
          word = try_tokenize(z$`ALEX GOLDMAN`)
        )
      },
      if (is.null(try_tokenize(z$PJ))) {
        data_frame()
      } else {
        data_frame(
          name = &quot;PJ&quot;,
          word = try_tokenize(z$PJ)
        )
      }
    )
  }), epnames[-zero])
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Combine to single data_frame&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;(wordz_df &amp;lt;- bind_rows(wordz, .id = &quot;episode&quot;))
#&amp;gt; # A tibble: 104,713 × 3
#&amp;gt;       episode  name      word
#&amp;gt;         &amp;lt;chr&amp;gt; &amp;lt;chr&amp;gt;     &amp;lt;chr&amp;gt;
#&amp;gt; 1  73-sandbox  Alex      alex
#&amp;gt; 2  73-sandbox  Alex   goldman
#&amp;gt; 3  73-sandbox  Alex         i
#&amp;gt; 4  73-sandbox  Alex generally
#&amp;gt; 5  73-sandbox  Alex     don’t
#&amp;gt; 6  73-sandbox  Alex      alex
#&amp;gt; 7  73-sandbox  Alex    really
#&amp;gt; 8  73-sandbox  Alex      alex
#&amp;gt; 9  73-sandbox  Alex    groans
#&amp;gt; 10 73-sandbox  Alex        so
#&amp;gt; # ... with 104,703 more rows
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Calculate sentiment using &lt;code class=&quot;highlighter-rouge&quot;&gt;tidytext&lt;/code&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;bing &amp;lt;- sentiments %&amp;gt;%
  filter(lexicon == &quot;bing&quot;) %&amp;gt;%
  select(-score)
sent &amp;lt;- wordz_df %&amp;gt;%
  inner_join(bing) %&amp;gt;%
  count(name, episode, sentiment) %&amp;gt;%
  spread(sentiment, n, fill = 0) %&amp;gt;%
  mutate(sentiment = positive - negative) %&amp;gt;%
  ungroup() %&amp;gt;%
  filter(!is.na(episode)) %&amp;gt;%
  complete(episode, name) %&amp;gt;%
  mutate(ep_no = as.numeric(strextract(episode, &quot;^[0-9]+&quot;)))
sent
#&amp;gt; # A tibble: 148 × 6
#&amp;gt;                                        episode  name negative positive
#&amp;gt;                                          &amp;lt;chr&amp;gt; &amp;lt;chr&amp;gt;    &amp;lt;dbl&amp;gt;    &amp;lt;dbl&amp;gt;
#&amp;gt; 1  1-an-app-sends-a-stranger-to-say-i-love-you  Alex       19       30
#&amp;gt; 2  1-an-app-sends-a-stranger-to-say-i-love-you    PJ       14       14
#&amp;gt; 3                         10-french-connection  Alex       15       32
#&amp;gt; 4                         10-french-connection    PJ       16       36
#&amp;gt; 5     11-did-errol-morris-brother-invent-email  Alex       NA       NA
#&amp;gt; 6     11-did-errol-morris-brother-invent-email    PJ       25       30
#&amp;gt; 7                           12-backend-trouble  Alex       20       15
#&amp;gt; 8                           12-backend-trouble    PJ       40       59
#&amp;gt; 9                              13-love-is-lies  Alex       NA       NA
#&amp;gt; 10                             13-love-is-lies    PJ       45       64
#&amp;gt; # ... with 138 more rows, and 2 more variables: sentiment &amp;lt;dbl&amp;gt;,
#&amp;gt; #   ep_no &amp;lt;dbl&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Names separate&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ggplot(sent, aes(ep_no, sentiment, fill = name)) +
  geom_bar(stat = &quot;identity&quot;) +
  facet_wrap(~name, ncol = 2, scales = &quot;free_x&quot;)
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/public/img/2016-08-25-no-no-yes/unnamed-chunk-18-1.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Compare for each episode&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ggplot(sent, aes(ep_no, sentiment, fill = name)) +
  geom_bar(stat = &quot;identity&quot;, position = position_dodge(width = 0.5), width = 0.6)
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/public/img/2016-08-25-no-no-yes/unnamed-chunk-19-1.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;most-common-positive-and-negative-words&quot;&gt;Most common positive and negative words&lt;/h3&gt;

&lt;p&gt;Clearly, the word &lt;code class=&quot;highlighter-rouge&quot;&gt;like&lt;/code&gt; is surely rarely used as a positive word
meaning e.g., that they &lt;em&gt;like something&lt;/em&gt;, but rather as the colloquial
&lt;code class=&quot;highlighter-rouge&quot;&gt;like, totally&lt;/code&gt; usage. So it’s removed.&lt;/p&gt;

&lt;p&gt;Alex&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sent_cont_plot(wordz_df, &quot;Alex&quot;)
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/public/img/2016-08-25-no-no-yes/unnamed-chunk-20-1.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;PJ&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sent_cont_plot(wordz_df, &quot;PJ&quot;)
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/public/img/2016-08-25-no-no-yes/unnamed-chunk-21-1.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
</description>
				<published>2016-08-25 00:00:00 -0700</published>
				<link>http://localhost:4000/2016/08/no-no-yes/</link>
			</item>
		
			<item>
				<title>video editing notes</title>
				<description>&lt;p&gt;This is how I edit videos of talks that I need to incorporate slides and video together&lt;/p&gt;

&lt;p&gt;I’m on a Mac&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;import to iMovie (using v10 something)&lt;/li&gt;
  &lt;li&gt;drop movie into editing section&lt;/li&gt;
  &lt;li&gt;split pdf slides into individual files &lt;code class=&quot;highlighter-rouge&quot;&gt;pdfseparate foobar.pdf %d.pdf&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;convert individual pdf slides into png &lt;code class=&quot;highlighter-rouge&quot;&gt;sips -s format png --out &quot;${pdf%%.*}.png&quot; &quot;$pdf&quot;&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;import png’s into imovie&lt;/li&gt;
  &lt;li&gt;for each image, drop into editing area where you want it&lt;/li&gt;
  &lt;li&gt;when focused on the png of the slide:
    &lt;ul&gt;
      &lt;li&gt;select crop, then - choose &lt;code class=&quot;highlighter-rouge&quot;&gt;fit&lt;/code&gt;, say okay&lt;/li&gt;
      &lt;li&gt;select “add as overlay” (very most left symbol), then choose &lt;code class=&quot;highlighter-rouge&quot;&gt;picture in picture&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;then choose &lt;code class=&quot;highlighter-rouge&quot;&gt;swap&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;then move inset to where you want it&lt;/li&gt;
      &lt;li&gt;say okay&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;rinse and repeat for all slides&lt;/li&gt;
  &lt;li&gt;export - via &lt;code class=&quot;highlighter-rouge&quot;&gt;File&lt;/code&gt; option&lt;/li&gt;
  &lt;li&gt;share to youtube&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;eg-of-the-result&quot;&gt;e.g. of the result&lt;/h3&gt;

&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://www.youtube.com/embed/MHWX0f3TG4I&quot; frameborder=&quot;0&quot; allowfullscreen=&quot;&quot;&gt;&lt;/iframe&gt;
</description>
				<published>2016-08-12 00:00:00 -0700</published>
				<link>http://localhost:4000/2016/08/video-editing/</link>
			</item>
		
			<item>
				<title>Marine Regions data in R</title>
				<description>&lt;blockquote&gt;
  &lt;p&gt;UPDATE: pkg API has changed - updated the post below to work with the current CRAN version, submitted 2016-08-02&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;I was at a hackathon focused on Ocean Biogeographic Information System (OBIS) data back in November last year in Belgium. One project idea was to make it easier to get at data based on one or more marine regions. I was told that Marineregions.org is often used for shape files to get different regions to then do other work with.&lt;/p&gt;

&lt;p&gt;During the event I started a package &lt;a href=&quot;https://github.com/ropenscilabs/mregions&quot;&gt;mregions&lt;/a&gt;. Here I’ll show how to get different marine regions, then use those outputs 
to get species occurrence data.&lt;/p&gt;

&lt;p&gt;We’ll use WKT (Well-Known Text) to define spatial dimensions in this post. If
you don’t know what it is, Wikipedia to the rescue: &lt;a href=&quot;https://en.wikipedia.org/wiki/Well-known_text&quot;&gt;https://en.wikipedia.org/wiki/Well-known_text&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;install&quot;&gt;Install&lt;/h2&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;install.packages&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;mregions&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;devtools&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;install_github&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;iobis/robis&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Or get the dev version&lt;/p&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;devtools&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;install_github&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;ropenscilabs/mregions&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;library&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;mregions&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;get-list-of-place-types&quot;&gt;Get list of place types&lt;/h2&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mr_place_types&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;head&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;#&amp;gt; [1] &quot;Town&quot;                      &quot;Arrondissement&quot;           
#&amp;gt; [3] &quot;Department&quot;                &quot;Province (administrative)&quot;
#&amp;gt; [5] &quot;Country&quot;                   &quot;Continent&quot;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;get-marineregions-records-by-place-type&quot;&gt;Get Marineregions records by place type&lt;/h2&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mr_records_by_type&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;EEZ&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;head&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;#&amp;gt;   MRGID                                            gazetteerSource
#&amp;gt; 1  3293 Maritime Boundaries Geodatabase, Flanders Marine Institute
#&amp;gt; 2  5668 Maritime Boundaries Geodatabase, Flanders Marine Institute
#&amp;gt; 3  5669 Maritime Boundaries Geodatabase, Flanders Marine Institute
#&amp;gt; 4  5670 Maritime Boundaries Geodatabase, Flanders Marine Institute
#&amp;gt; 5  5672 Maritime Boundaries Geodatabase, Flanders Marine Institute
#&amp;gt; 6  5673 Maritime Boundaries Geodatabase, Flanders Marine Institute
#&amp;gt;   placeType latitude longitude minLatitude minLongitude maxLatitude
#&amp;gt; 1       EEZ 51.46483  2.704458    51.09111     2.238118    51.87000
#&amp;gt; 2       EEZ 53.61508  4.190675    51.26203     2.539443    55.76500
#&amp;gt; 3       EEZ 54.55970  8.389231    53.24281     3.349999    55.91928
#&amp;gt; 4       EEZ 40.87030 19.147094    39.63863    18.461940    41.86124
#&amp;gt; 5       EEZ 42.94272 29.219062    41.97820    27.449580    43.74779
#&amp;gt; 6       EEZ 43.42847 15.650844    41.62201    13.001390    45.59079
#&amp;gt;   maxLongitude precision            preferredGazetteerName
#&amp;gt; 1     3.364907  58302.49   Belgian Exclusive Economic Zone
#&amp;gt; 2     7.208364 294046.10     Dutch Exclusive Economic Zone
#&amp;gt; 3    14.750000 395845.50    German Exclusive Economic Zone
#&amp;gt; 4    20.010030 139751.70  Albanian Exclusive Economic Zone
#&amp;gt; 5    31.345280 186792.50 Bulgarian Exclusive Economic Zone
#&amp;gt; 6    18.552360 313990.30  Croatian Exclusive Economic Zone
#&amp;gt;   preferredGazetteerNameLang   status accepted
#&amp;gt; 1                    English standard     3293
#&amp;gt; 2                    English standard     5668
#&amp;gt; 3                    English standard     5669
#&amp;gt; 4                    English standard     5670
#&amp;gt; 5                    English standard     5672
#&amp;gt; 6                    English standard     5673
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;get-and-search-region-names&quot;&gt;Get and search region names&lt;/h2&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mr_names&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;#&amp;gt; # A tibble: 676 x 4
#&amp;gt;                              name
#&amp;gt;                             &amp;lt;chr&amp;gt;
#&amp;gt; 1           Morocco:elevation_10m
#&amp;gt; 2          Emodnet:emodnet1x1grid
#&amp;gt; 3                    Emodnet:grid
#&amp;gt; 4                     Morocco:dam
#&amp;gt; 5             WoRMS:azmp_sections
#&amp;gt; 6    Morocco:accomodationcapacity
#&amp;gt; 7          Morocco:admin_boundary
#&amp;gt; 8  Lifewatch:ovam_afvalverwerking
#&amp;gt; 9          Eurobis:eurobis_points
#&amp;gt; 10                  Morocco:roads
#&amp;gt; # ... with 666 more rows, and 3 more variables: title &amp;lt;chr&amp;gt;,
#&amp;gt; #   name_first &amp;lt;chr&amp;gt;, name_second &amp;lt;chr&amp;gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mr_names_search&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;q&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;IHO&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;#&amp;gt; # A tibble: 5 x 4
#&amp;gt;                                   name
#&amp;gt;                                  &amp;lt;chr&amp;gt;
#&amp;gt; 1                    MarineRegions:iho
#&amp;gt; 2 MarineRegions:iho_quadrants_20150810
#&amp;gt; 3                     World:iosregions
#&amp;gt; 4       MarineRegions:eez_iho_union_v2
#&amp;gt; 5                   Belgium:vl_venivon
#&amp;gt; # ... with 3 more variables: title &amp;lt;chr&amp;gt;, name_first &amp;lt;chr&amp;gt;,
#&amp;gt; #   name_second &amp;lt;chr&amp;gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;get-a-region---geojson&quot;&gt;Get a region - geojson&lt;/h2&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mr_geojson&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Turkmen Exclusive Economic Zone&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;#&amp;gt; [1] &quot;mr_geojson&quot;
&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;names&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;#&amp;gt; [1] &quot;type&quot;          &quot;totalFeatures&quot; &quot;features&quot;      &quot;crs&quot;          
#&amp;gt; [5] &quot;bbox&quot;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;get-a-region---shp&quot;&gt;Get a region - shp&lt;/h2&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mr_shp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Belgian Exclusive Economic Zone&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;#&amp;gt; [1] &quot;SpatialPolygonsDataFrame&quot;
#&amp;gt; attr(,&quot;package&quot;)
#&amp;gt; [1] &quot;sp&quot;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;get-obis-eez-id&quot;&gt;Get OBIS EEZ ID&lt;/h2&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mr_names&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;grepl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;eez&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ignore.case&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;TRUE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mr_obis_eez_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;#&amp;gt; [1] 84
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;convert-to-wkt&quot;&gt;Convert to WKT&lt;/h2&gt;

&lt;p&gt;From geojson or shp. Here, geojson&lt;/p&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mr_geojson&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;MarineRegions:eez_33176&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mr_as_wkt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fmt&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;#&amp;gt; [1] &quot;MULTIPOLYGON (((41.573732 -1.659444, 45.891882 ... cutoff
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;get-regions-then-obis-data&quot;&gt;Get regions, then OBIS data&lt;/h2&gt;

&lt;h3 id=&quot;using-well-known-text&quot;&gt;Using Well-Known Text&lt;/h3&gt;

&lt;p&gt;Both shp and geojson data returned from &lt;code class=&quot;highlighter-rouge&quot;&gt;region_shp()&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;region_geojson()&lt;/code&gt;, respectively, can be passed to &lt;code class=&quot;highlighter-rouge&quot;&gt;as_wkt()&lt;/code&gt; to get WKT.&lt;/p&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;shp&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mr_shp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Belgian Exclusive Economic Zone&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;wkt&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mr_as_wkt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;shp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;library&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'httr'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;library&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'data.table'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;scientificname&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Abra alba&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;geometry&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;wkt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;limit&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;httr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;GET&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'http://api.iobis.org/occurrence'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;query&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;xx&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data.table&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;setDF&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data.table&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rbindlist&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;httr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;content&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;results&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;use.names&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;TRUE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fill&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;TRUE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;xx&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;xx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'scientificName'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'decimalLongitude'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'decimalLatitude'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;names&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;xx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)[&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'longitude'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'latitude'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Plot&lt;/p&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;library&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'leaflet'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;leaflet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&amp;gt;%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;addTiles&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&amp;gt;%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;addCircleMarkers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;xx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&amp;gt;%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;addPolygons&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;shp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/public/img/2016-06-09-marine-regions/map1.png&quot; alt=&quot;map1&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;using-eez-id&quot;&gt;Using EEZ ID&lt;/h3&gt;

&lt;p&gt;EEZ is a Exclusive Economic Zone&lt;/p&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;eez&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mr_obis_eez_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Belgian Exclusive Economic Zone&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;#&amp;gt; [1] 59
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;You currently can’t search for OBIS occurrences by EEZ ID, but hopefully soon…&lt;/p&gt;

&lt;h2 id=&quot;dealing-with-bigger-wkt&quot;&gt;Dealing with bigger WKT&lt;/h2&gt;

&lt;p&gt;What if you’re WKT string is super long?  It’s often a problem because some online species 
occurrence databases that accept WKT to search by geometry bork due to
limitations on length of URLs if your WKT string is too long (about 8000 characters,
including remainder of URL). One way to deal with it is to reduce detail - simplify.&lt;/p&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;install.packages&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;rmapshaper&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Using &lt;code class=&quot;highlighter-rouge&quot;&gt;rmapshaper&lt;/code&gt; we can simplify a spatial object, then search with that.&lt;/p&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;shp&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mr_shp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Dutch Exclusive Economic Zone&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Visualize&lt;/p&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;leaflet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&amp;gt;%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;addTiles&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&amp;gt;%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;addPolygons&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;shp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/public/img/2016-06-09-marine-regions/complex.png&quot; alt=&quot;map2&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Simplify&lt;/p&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;library&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;rmapshaper&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;shp&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ms_simplify&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;shp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;It’s simplified:&lt;/p&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;leaflet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&amp;gt;%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;addTiles&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&amp;gt;%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;addPolygons&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;shp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/public/img/2016-06-09-marine-regions/simple.png&quot; alt=&quot;map3&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;pass-to-gbif&quot;&gt;Pass to GBIF&lt;/h2&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;requireNamespace&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;rgbif&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;install.packages&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;rgbif&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;library&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;rgbif&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;occ_search&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;geometry&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mr_as_wkt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;shp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;limit&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;400&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;#&amp;gt; Records found [2395936] 
#&amp;gt; Records returned [400] 
#&amp;gt; No. unique hierarchies [17] 
#&amp;gt; No. media records [3] 
#&amp;gt; Args [geometry=POLYGON ((7.2083632399999997 53.2428091399999985,
#&amp;gt;      6.6974995100000001 53.4619365499999972, 5.89083650, limit=400,
#&amp;gt;      offset=0, fields=all] 
#&amp;gt; # A tibble: 400 x 102
#&amp;gt;                     name        key decimalLatitude decimalLongitude
#&amp;gt;                    &amp;lt;chr&amp;gt;      &amp;lt;int&amp;gt;           &amp;lt;dbl&amp;gt;            &amp;lt;dbl&amp;gt;
#&amp;gt; 1  Haematopus ostralegus 1265900666        52.13467          4.21306
#&amp;gt; 2          Limosa limosa 1265577408        53.03249          4.88665
#&amp;gt; 3       Corvus splendens 1269536058        51.98297          4.12982
#&amp;gt; 4       Corvus splendens 1269536065        51.98297          4.12982
#&amp;gt; 5       Lanius excubitor 1211320606        52.57223          4.62569
#&amp;gt; 6       Lanius excubitor 1211320862        52.67419          4.63645
#&amp;gt; 7       Lanius excubitor 1211320806        53.05790          4.72974
#&amp;gt; 8       Lanius excubitor 1211321040        52.57540          4.63651
#&amp;gt; 9       Lanius excubitor 1211320590        52.41180          5.19500
#&amp;gt; 10      Lanius excubitor 1211320401        52.57535          4.63654
#&amp;gt; # ... with 390 more rows, and 98 more variables: issues &amp;lt;chr&amp;gt;,
#&amp;gt; #   datasetKey &amp;lt;chr&amp;gt;, publishingOrgKey &amp;lt;chr&amp;gt;, publishingCountry &amp;lt;chr&amp;gt;,
#&amp;gt; #   protocol &amp;lt;chr&amp;gt;, lastCrawled &amp;lt;chr&amp;gt;, lastParsed &amp;lt;chr&amp;gt;, extensions &amp;lt;chr&amp;gt;,
#&amp;gt; #   basisOfRecord &amp;lt;chr&amp;gt;, taxonKey &amp;lt;int&amp;gt;, kingdomKey &amp;lt;int&amp;gt;,
#&amp;gt; #   phylumKey &amp;lt;int&amp;gt;, classKey &amp;lt;int&amp;gt;, orderKey &amp;lt;int&amp;gt;, familyKey &amp;lt;int&amp;gt;,
#&amp;gt; #   genusKey &amp;lt;int&amp;gt;, speciesKey &amp;lt;int&amp;gt;, scientificName &amp;lt;chr&amp;gt;, kingdom &amp;lt;chr&amp;gt;,
#&amp;gt; #   phylum &amp;lt;chr&amp;gt;, order &amp;lt;chr&amp;gt;, family &amp;lt;chr&amp;gt;, genus &amp;lt;chr&amp;gt;, species &amp;lt;chr&amp;gt;,
#&amp;gt; #   genericName &amp;lt;chr&amp;gt;, specificEpithet &amp;lt;chr&amp;gt;, taxonRank &amp;lt;chr&amp;gt;,
#&amp;gt; #   dateIdentified &amp;lt;chr&amp;gt;, coordinateUncertaintyInMeters &amp;lt;dbl&amp;gt;, year &amp;lt;int&amp;gt;,
#&amp;gt; #   month &amp;lt;int&amp;gt;, day &amp;lt;int&amp;gt;, eventDate &amp;lt;chr&amp;gt;, modified &amp;lt;chr&amp;gt;,
#&amp;gt; #   lastInterpreted &amp;lt;chr&amp;gt;, references &amp;lt;chr&amp;gt;, identifiers &amp;lt;chr&amp;gt;,
#&amp;gt; #   facts &amp;lt;chr&amp;gt;, relations &amp;lt;chr&amp;gt;, geodeticDatum &amp;lt;chr&amp;gt;, class &amp;lt;chr&amp;gt;,
#&amp;gt; #   countryCode &amp;lt;chr&amp;gt;, country &amp;lt;chr&amp;gt;, rightsHolder &amp;lt;chr&amp;gt;,
#&amp;gt; #   identifier &amp;lt;chr&amp;gt;, informationWithheld &amp;lt;chr&amp;gt;, verbatimEventDate &amp;lt;chr&amp;gt;,
#&amp;gt; #   datasetName &amp;lt;chr&amp;gt;, gbifID &amp;lt;chr&amp;gt;, collectionCode &amp;lt;chr&amp;gt;,
#&amp;gt; #   verbatimLocality &amp;lt;chr&amp;gt;, occurrenceID &amp;lt;chr&amp;gt;, taxonID &amp;lt;chr&amp;gt;,
#&amp;gt; #   license &amp;lt;chr&amp;gt;, recordedBy &amp;lt;chr&amp;gt;, catalogNumber &amp;lt;chr&amp;gt;,
#&amp;gt; #   http...unknown.org.occurrenceDetails &amp;lt;chr&amp;gt;, institutionCode &amp;lt;chr&amp;gt;,
#&amp;gt; #   rights &amp;lt;chr&amp;gt;, eventTime &amp;lt;chr&amp;gt;, identificationID &amp;lt;chr&amp;gt;,
#&amp;gt; #   individualCount &amp;lt;int&amp;gt;, continent &amp;lt;chr&amp;gt;, stateProvince &amp;lt;chr&amp;gt;,
#&amp;gt; #   nomenclaturalCode &amp;lt;chr&amp;gt;, locality &amp;lt;chr&amp;gt;, language &amp;lt;chr&amp;gt;,
#&amp;gt; #   taxonomicStatus &amp;lt;chr&amp;gt;, type &amp;lt;chr&amp;gt;, preparations &amp;lt;chr&amp;gt;,
#&amp;gt; #   disposition &amp;lt;chr&amp;gt;, originalNameUsage &amp;lt;chr&amp;gt;,
#&amp;gt; #   bibliographicCitation &amp;lt;chr&amp;gt;, identifiedBy &amp;lt;chr&amp;gt;, sex &amp;lt;chr&amp;gt;,
#&amp;gt; #   lifeStage &amp;lt;chr&amp;gt;, otherCatalogNumbers &amp;lt;chr&amp;gt;, habitat &amp;lt;chr&amp;gt;,
#&amp;gt; #   georeferencedBy &amp;lt;chr&amp;gt;, vernacularName &amp;lt;chr&amp;gt;, elevation &amp;lt;dbl&amp;gt;,
#&amp;gt; #   minimumDistanceAboveSurfaceInMeters &amp;lt;chr&amp;gt;, dynamicProperties &amp;lt;chr&amp;gt;,
#&amp;gt; #   samplingEffort &amp;lt;chr&amp;gt;, organismName &amp;lt;chr&amp;gt;, georeferencedDate &amp;lt;chr&amp;gt;,
#&amp;gt; #   georeferenceProtocol &amp;lt;chr&amp;gt;, georeferenceVerificationStatus &amp;lt;chr&amp;gt;,
#&amp;gt; #   organismID &amp;lt;chr&amp;gt;, ownerInstitutionCode &amp;lt;chr&amp;gt;, samplingProtocol &amp;lt;chr&amp;gt;,
#&amp;gt; #   datasetID &amp;lt;chr&amp;gt;, accessRights &amp;lt;chr&amp;gt;, georeferenceSources &amp;lt;chr&amp;gt;,
#&amp;gt; #   elevationAccuracy &amp;lt;dbl&amp;gt;, depth &amp;lt;dbl&amp;gt;, depthAccuracy &amp;lt;dbl&amp;gt;,
#&amp;gt; #   waterBody &amp;lt;chr&amp;gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

</description>
				<published>2016-06-09 00:00:00 -0700</published>
				<link>http://localhost:4000/2016/06/marine-regions/</link>
			</item>
		
			<item>
				<title>atomize - make new packages from other packages</title>
				<description>&lt;p&gt;We (rOpenSci) just held our 3rd annual rOpenSci unconference (&lt;a href=&quot;http://unconf16.ropensci.org/&quot;&gt;http://unconf16.ropensci.org/&lt;/a&gt;) in San Francisco. There were &lt;a href=&quot;https://github.com/ropensci/unconf16/issues&quot;&gt;a lot of ideas&lt;/a&gt;, and lots of awesome projects from awesome people came out of the 2 day event.&lt;/p&gt;

&lt;p&gt;One weird idea I had comes from looking at the Node world, where there are lots of tiny packages, instead of the often larger packages we have in the R world. One reason for tiny in Node is that of course you want a library to be tiny if running in the browser for faster load times (esp. on mobile).&lt;/p&gt;

&lt;p&gt;So the idea is, what if we could separate all the functions in a package, or any particular function of your choice, into new packages, with all the internal functions and dependencies. And automatically as well, not manually.&lt;/p&gt;

&lt;p&gt;So what are the use cases? I can’t imagine this being used to create stable packages to disperse to the world on CRAN, but it could be really useful for development purposes, or for R users/analysts that want lighter weight dependencies (e.g., a package with just the one function needed from a larger package).&lt;/p&gt;

&lt;p&gt;This approach of course has drawbacks. The new created package is now broken apart from the original - however, beause it’s automated, you can just re-create it.&lt;/p&gt;

&lt;p&gt;Another pain point would surely be with packages that have C/C++ code in them.&lt;/p&gt;

&lt;p&gt;The package: &lt;code class=&quot;highlighter-rouge&quot;&gt;atomize&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;The package was made possible by the awesome &lt;a href=&quot;https://github.com/MangoTheCat/functionMap&quot;&gt;functionMap&lt;/a&gt; package by &lt;a href=&quot;https://github.com/gaborcsardi&quot;&gt;Gábor Csárdi&lt;/a&gt;, and the more well-known &lt;code class=&quot;highlighter-rouge&quot;&gt;devtools&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Expect bugs, the package has no tests. Sorry :(&lt;/p&gt;

&lt;h2 id=&quot;installation&quot;&gt;Installation&lt;/h2&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;devtools&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;install_github&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;ropenscilabs/atomize&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;library&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;atomize&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;usage&quot;&gt;usage&lt;/h2&gt;

&lt;h3 id=&quot;atomize-a-fxn-into-separate-package&quot;&gt;atomize a fxn into separate package&lt;/h3&gt;

&lt;p&gt;You can select one function, or many. Here, I’m using another package I maintain, &lt;a href=&quot;https://github.com/ropenscilabs/rredlist&quot;&gt;rredlist&lt;/a&gt;, a pkg to interact with the &lt;a href=&quot;http://apiv3.iucnredlist.org/api/v3/docs&quot;&gt;IUCN Redlist API&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;In this example, I want a new package called &lt;code class=&quot;highlighter-rouge&quot;&gt;foobar&lt;/code&gt; with just the function &lt;code class=&quot;highlighter-rouge&quot;&gt;rl_citation()&lt;/code&gt;. The function &lt;code class=&quot;highlighter-rouge&quot;&gt;atomize::atomizer()&lt;/code&gt; takes the path for the package to extract from, then a path for the new package, then the function names.&lt;/p&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;atomizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path_ref&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;../rredlist&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path_new&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;../foobar&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;funcs&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;rl_citation&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;This creates a new package in the &lt;code class=&quot;highlighter-rouge&quot;&gt;path_new&lt;/code&gt; directory&lt;/p&gt;

&lt;h3 id=&quot;install&quot;&gt;install&lt;/h3&gt;

&lt;p&gt;Now we need to install the new package, can do easily with &lt;code class=&quot;highlighter-rouge&quot;&gt;devtools::install()&lt;/code&gt;&lt;/p&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;devtools&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;install&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;../foobar&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;load&quot;&gt;load&lt;/h3&gt;

&lt;p&gt;Then load the new package&lt;/p&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;library&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;foobar&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;call-function&quot;&gt;call function&lt;/h3&gt;

&lt;p&gt;Now call the function in the new package&lt;/p&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;foobar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rl_citation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;#&amp;gt; [1] &quot;IUCN 2015. IUCN Red List of Threatened Species. Version 2015-4 &amp;lt;www.iucnredlist.org&amp;gt;&quot;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;it’s identical to the same function in the old package&lt;/p&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;identical&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rredlist&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rl_citation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(),&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;foobar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rl_citation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;#&amp;gt; [1] TRUE
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
</description>
				<published>2016-04-07 00:00:00 -0700</published>
				<link>http://localhost:4000/2016/04/atomize/</link>
			</item>
		
			<item>
				<title>GenBank IDs API - get, match, swap id types</title>
				<description>&lt;p&gt;GenBank IDs, accession numbers and GI identifiers, are the two types of identifiers for entries in GenBank. (see &lt;a href=&quot;http://www.ncbi.nlm.nih.gov/Sitemap/sequenceIDs.html&quot;&gt;this page&lt;/a&gt; for why there are two types of identifiers). Actually, &lt;a href=&quot;http://www.ncbi.nlm.nih.gov/news/03-02-2016-phase-out-of-GI-numbers/&quot;&gt;recent news&lt;/a&gt; from NCBI is that GI identifiers will be phased out by September this year, which affects what I’ll talk about below.&lt;/p&gt;

&lt;p&gt;There are a lot of sequences in GenBank. Sometimes you have identifiers and you want to check if they exist in GenBank, or want to get one type from another (accession from GI, or vice versa; although GI phase out will make this use case no longer needed), or just get a bunch of identifiers for software testing purposes perhaps.&lt;/p&gt;

&lt;p&gt;Currently, the ENTREZ web services aren’t super performant or easy to use for the above use cases. Thus, I’ve built out a RESTful API for these use cases, called &lt;a href=&quot;https://github.com/sckott/gbids&quot;&gt;gbids&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;gbids&lt;/code&gt; on GitHub: &lt;a href=&quot;https://github.com/sckott/gbids&quot;&gt;sckott/gbids&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Here’s the tech stack:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;API: Ruby/Sinatra&lt;/li&gt;
  &lt;li&gt;Storage: MySQL&lt;/li&gt;
  &lt;li&gt;Caching: Redis
    &lt;ul&gt;
      &lt;li&gt;each key cached for 3 hours&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Server: Caddy
    &lt;ul&gt;
      &lt;li&gt;https&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Authentication: none&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Will soon have a cron job update when new dump is available every Sunday, but for now we’re about a month behind the current dump of identifiers. If usage of the API picks up, I’ll know it’s worth maintaining and make sure data is up to date.&lt;/p&gt;

&lt;p&gt;The base url is &lt;a href=&quot;https://gbids.xyz&quot;&gt;https://gbids.xyz&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Here’s a rundown of the API routes:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;/&lt;/code&gt; re-routes to &lt;code class=&quot;highlighter-rouge&quot;&gt;/heartbeat&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;/heartbeat&lt;/code&gt; - list routes&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;/acc&lt;/code&gt; - &lt;code class=&quot;highlighter-rouge&quot;&gt;GET&lt;/code&gt; - list accession ids&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;/acc/:id,:id,...&lt;/code&gt; - &lt;code class=&quot;highlighter-rouge&quot;&gt;GET&lt;/code&gt; - submit many accession numbers, get back boolean (match or no match)&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;/acc&lt;/code&gt; - &lt;code class=&quot;highlighter-rouge&quot;&gt;POST&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;/gi&lt;/code&gt; - &lt;code class=&quot;highlighter-rouge&quot;&gt;GET&lt;/code&gt; - list gi numbers&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;/gi/:id,:id,...&lt;/code&gt; - &lt;code class=&quot;highlighter-rouge&quot;&gt;GET&lt;/code&gt; - submit many gi numbers, get back boolean (match or no match)&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;/gi&lt;/code&gt; - &lt;code class=&quot;highlighter-rouge&quot;&gt;POST&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;/acc2gi/:id,:id,...&lt;/code&gt; - &lt;code class=&quot;highlighter-rouge&quot;&gt;GET&lt;/code&gt; - get gi numbers from accession numbers&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;/acc2gi&lt;/code&gt; - &lt;code class=&quot;highlighter-rouge&quot;&gt;POST&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;/gi2acc/:id,:id,...&lt;/code&gt; - &lt;code class=&quot;highlighter-rouge&quot;&gt;GET&lt;/code&gt; - get accession numbers from gi numbers&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;/gi2acc&lt;/code&gt; - &lt;code class=&quot;highlighter-rouge&quot;&gt;POST&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Of course after GI identifiers are phased out, all &lt;code class=&quot;highlighter-rouge&quot;&gt;gi&lt;/code&gt; routes will be removed.&lt;/p&gt;

&lt;p&gt;The API docs are at &lt;a href=&quot;http://recology.info/gbidsdocs&quot;&gt;recology.info/gbidsdocs&lt;/a&gt; - let me know if you have any feedback on those.&lt;/p&gt;

&lt;p&gt;I also have a status page up at &lt;a href=&quot;http://recology.info/gbidsstatus/&quot;&gt;recology.info/gbidsstatus&lt;/a&gt; - it’s not automated, I have to update the status manually, but I do update that page whenever I’m doing maintenance and the API will be down, or if it goes down due to any other reason.&lt;/p&gt;

&lt;h2 id=&quot;examples&quot;&gt;examples&lt;/h2&gt;

&lt;p&gt;Request to list accession identifiers, limit to 5&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;curl 'https://gbids.xyz/acc?limit=5' | jq .
{
  &quot;matched&quot;: 692006925,
  &quot;returned&quot;: 5,
  &quot;data&quot;: [
    &quot;A00002&quot;,
    &quot;A00003&quot;,
    &quot;X17276&quot;,
    &quot;X60065&quot;,
    &quot;CAA42669&quot;
  ],
  &quot;error&quot;: null
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Request to match accession identifiers, some exist, while some do not&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;curl 'https://gbids.xyz/acc/AACY024124486,AACY024124483,asdfd,asdf,AACY024124476' | jq .
{
  &quot;matched&quot;: 3,
  &quot;returned&quot;: 5,
  &quot;data&quot;: {
    &quot;AACY024124486&quot;: true,
    &quot;AACY024124483&quot;: true,
    &quot;asdfd&quot;: false,
    &quot;asdf&quot;: false,
    &quot;AACY024124476&quot;: true
  },
  &quot;error&quot;: null
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;to-do&quot;&gt;to do&lt;/h2&gt;

&lt;p&gt;I think it’d probably be worth adding routes for getting accession from taxonomy id and vice versa since that’s something that is currently not very easy. We could use the dumped accession2taxid data from ftp://ftp.ncbi.nih.gov/pub/taxonomy/accession2taxid/&lt;/p&gt;

&lt;h2 id=&quot;feedback&quot;&gt;feedback!&lt;/h2&gt;

&lt;p&gt;If you think this could be potentially useful, do try it out and send any feedback. I watch logs from the API, so I’m hoping for an increase in usage so I know people find it useful.&lt;/p&gt;

&lt;p&gt;Since servers aren’t free, costs add up, and if I don’t see usage pick up I’ll discontinue the service at some point. So do use it!&lt;/p&gt;

&lt;p&gt;And if anyone can offer free servers, I’d gladly take advantage of that. I’ve applied for AWS research grant, but won’t hear back for a few months.&lt;/p&gt;

</description>
				<published>2016-03-29 00:00:00 -0700</published>
				<link>http://localhost:4000/2016/03/genbank-ids/</link>
			</item>
		
			<item>
				<title>heythere - a robot to automate GitHub issue comments</title>
				<description>&lt;p&gt;GitHub issues are great for humans to correspond over software, or any other project. At rOpenSci we use an issue based software review system (&lt;a href=&quot;https://github.com/ropensci/onboarding&quot;&gt;ropensci/onboarding&lt;/a&gt;). Software authors and reviewers go back and forth on the software, making a better product in the end.&lt;/p&gt;

&lt;p&gt;We have a relatively small number of pieces of software under review at any one time compared to e.g., scientific journals - however, even with the small number, we as organizers, and authors and reviewers can forget things. For example:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;an organizer can forget to remind a reviewer to get a review in&lt;/li&gt;
  &lt;li&gt;a reviewer can forget about a review, and may benefit from a friendly reminder&lt;/li&gt;
  &lt;li&gt;an author may forget about updating software based on the review&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;As we are managing more package submissions through our system, automated things done by machine, or robot, will be increasingly helpful to keep the system moving smoothly.&lt;/p&gt;

&lt;p&gt;A big red flag with automated systems is the annoyance factor. We can try to be smart about this and only remind people when it’s really needed.&lt;/p&gt;

&lt;p&gt;I’ve been working on a thing for a while now, it’s called &lt;code class=&quot;highlighter-rouge&quot;&gt;heythere&lt;/code&gt;. It’s a Ruby application that is currently set up to run on Heroku, though you could run it anywhere you want. It’s running right now once per day to check to see if it should send any reminders to organizers, authors, reviewers.&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;heythere&lt;/code&gt; on GitHub: &lt;a href=&quot;https://github.com/ropenscilabs/heythere&quot;&gt;ropenscilabs/heythere&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;how-it-works&quot;&gt;How it works&lt;/h2&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;heythere&lt;/code&gt; is controlled through a series of environment variables that controls GitHub authentication, the first day post reviewer assignment when a reminder should be sent, how many days after reviews are submitted to ask if the author needs any help, and more. Check out the &lt;a href=&quot;https://github.com/ropenscilabs/heythere&quot;&gt;repo&lt;/a&gt; for all the env var options.&lt;/p&gt;

&lt;p&gt;The Ruby app can be run via a rake task from the command line, or triggered with a scheduler on something like Heroku.&lt;/p&gt;

&lt;p&gt;When the app runs, we look for environment variables that you set. If we don’t find them we use sensible defaults.&lt;/p&gt;

&lt;p&gt;Using the env vars, we grab the issues for the repository you chose, limit to a subset of your choosing based on a series of labels, then compare dates on comments compared to your env vars, and either skip or send of comments on issues.&lt;/p&gt;

&lt;p&gt;We use &lt;a href=&quot;https://github.com/octokit/octokit.rb&quot;&gt;ockokit&lt;/a&gt; under the hood to work with GitHub issues.&lt;/p&gt;

&lt;h2 id=&quot;how-to-use-it&quot;&gt;How to use it&lt;/h2&gt;

&lt;h3 id=&quot;clone&quot;&gt;clone&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git clone git@github.com:ropenscilabs/heythere.git
cd heythere
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;setup&quot;&gt;setup&lt;/h3&gt;

&lt;p&gt;Change the repo in &lt;code class=&quot;highlighter-rouge&quot;&gt;Rakefile&lt;/code&gt; to whatever your repository is.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Heythere.hey_there(repo = 'ropensci/onboarding')
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Create the app (use a different name, of course)&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;heroku apps:create ropensci-hey-there
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Add the repository that you are targeting:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;heroku config:add HEYTHERE_REPOSITORY=&amp;lt;github-repository&amp;gt; (like `owner/repo`)
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Create a GitHub personal access token just for this application. You’ll need to set a env var for your username and the token. We read these in the app.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;heroku config:add GITHUB_USERNAME=&amp;lt;github-user&amp;gt;
heroku config:add GITHUB_PAT_OCTOKIT=&amp;lt;github-pat-for-octokit&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Optionally, set env vars for various options. You don’t have to set these - we’ll use defaults&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;heroku config:add HEYTHERE_PRE_DEADLINE_DAYS=&amp;lt;number-of-days-integer&amp;gt;
heroku config:add HEYTHERE_DEADLINE_DAYS=&amp;lt;number-of-days-integer&amp;gt;
heroku config:add HEYTHERE_POST_DEADLINE_EVERY_DAYS=&amp;lt;number-of-days-integer&amp;gt;
heroku config:add HEYTHERE_POST_REVIEW_IN_DAYS=&amp;lt;number-of-days-integer&amp;gt;
heroku config:add HEYTHERE_POST_REVIEW_TOGGLE=&amp;lt;boolean&amp;gt;
heroku config:add HEYTHERE_BOT_NICKNAME=&amp;lt;string&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Also save all these env vars in your &lt;code class=&quot;highlighter-rouge&quot;&gt;.bash_profile&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;.zshrc&lt;/code&gt;, or similar so you can run the app locally. E.g. with entries like &lt;code class=&quot;highlighter-rouge&quot;&gt;export HEYTHERE_PRE_DEADLINE_DAYS=15&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;You can see all your Heroku config vars using &lt;code class=&quot;highlighter-rouge&quot;&gt;heroku config&lt;/code&gt; or use &lt;code class=&quot;highlighter-rouge&quot;&gt;rake envs&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Push your app to Heroku&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git push heroku master
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Add the scheduler to your heroku app&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;heroku addons:create scheduler:standard
heroku addons:open scheduler
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Add the task &lt;code class=&quot;highlighter-rouge&quot;&gt;rake hey&lt;/code&gt; to your heroku scheduler and set to whatever schedule you want.&lt;/p&gt;

&lt;h3 id=&quot;usage&quot;&gt;usage&lt;/h3&gt;

&lt;p&gt;If you have your repo in an env var as above, run the rake task &lt;code class=&quot;highlighter-rouge&quot;&gt;hey&lt;/code&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;rake hey
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;If not, then pass the repo to &lt;code class=&quot;highlighter-rouge&quot;&gt;hey&lt;/code&gt; like&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;rake hey repo=owner/repo
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;what-does-it-look-like&quot;&gt;what does it look like?&lt;/h3&gt;

&lt;p&gt;This is what a comment looks like in a thread&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/img/2016-03-24-hey-there/testhey.png&quot; alt=&quot;assertr_img&quot; /&gt;&lt;/p&gt;

&lt;p&gt;You could set up a different GitHub account as your robot so it’s clearly not coming from a real person.&lt;/p&gt;

&lt;h2 id=&quot;feedback&quot;&gt;feedback&lt;/h2&gt;

&lt;p&gt;I’ll continue to improve &lt;code class=&quot;highlighter-rouge&quot;&gt;heythere&lt;/code&gt; as we get feedback on its use in &lt;code class=&quot;highlighter-rouge&quot;&gt;ropensci/onboarding&lt;/code&gt;. Would also love any feedback from you, internet. Thanks!&lt;/p&gt;

</description>
				<published>2016-03-24 00:00:00 -0700</published>
				<link>http://localhost:4000/2016/03/hey-there/</link>
			</item>
		
			<item>
				<title>scrubr - clean species occurrence records</title>
				<description>&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;scrubr&lt;/code&gt; is an R library for cleaning species occurrence records. It’s general purpose, and has the following approach:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;We think using a piping workflow (&lt;code class=&quot;highlighter-rouge&quot;&gt;%&amp;gt;%&lt;/code&gt;) makes code easier to build up, and easier to understand. However, you don’t have to use pipes in this package.&lt;/li&gt;
  &lt;li&gt;All inputs and outputs are data.frame’s - which makes the above point easier&lt;/li&gt;
  &lt;li&gt;Records trimmed off due to various filters are retained as attributes, so can still be accessed for later inspection, but don’t get in the way of the data.frame that gets modified for downstream use&lt;/li&gt;
  &lt;li&gt;User interface vs. speed: This is the kind of package that surely can get faster. However, we’re focusing on the UI first, then make speed improvements down the road.&lt;/li&gt;
  &lt;li&gt;Since occurrence record datasets should all have columns with lat/long information, we automatically look for those columns for you. If identified, we use them, but you can supply lat/long column names manually as well.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;We have many packages that fetch species occurrence records from GBIF, iNaturalist, VertNet, iDigBio, Ecoengine, and more. &lt;code class=&quot;highlighter-rouge&quot;&gt;scrubr&lt;/code&gt; fills a crucial missing niche as likely all uses of occurrence data requires cleaning of some kind. When using GBIF data via &lt;code class=&quot;highlighter-rouge&quot;&gt;rgbif&lt;/code&gt;, that package has some utilities for cleaning data based on the issues returned with GBIF data - &lt;code class=&quot;highlighter-rouge&quot;&gt;scrubr&lt;/code&gt; is a companion to do the rest of the cleaning.&lt;/p&gt;

&lt;h2 id=&quot;scrubr-use-cases&quot;&gt;scrubr use cases&lt;/h2&gt;

&lt;h3 id=&quot;those-covered&quot;&gt;Those covered&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Impossible lat/long values: e.g., latitude 75&lt;/li&gt;
  &lt;li&gt;Incomplete cases: one or the other of lat/long missing&lt;/li&gt;
  &lt;li&gt;Unlikely lat/long values: e.g., points at 0,0&lt;/li&gt;
  &lt;li&gt;Deduplication: try to identify duplicates, esp. when pulling data from multiple sources, e.g., can try to use occurrence IDs, if provided&lt;/li&gt;
  &lt;li&gt;Date based cleaning&lt;/li&gt;
  &lt;li&gt;Outside political boundary: User input to check for points in the wrong country, or points outside of a known country&lt;/li&gt;
  &lt;li&gt;Taxonomic name based cleaning: via &lt;code class=&quot;highlighter-rouge&quot;&gt;taxize&lt;/code&gt; (one method so far)&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;to-be-covered&quot;&gt;To be covered&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Political centroids: unlikely that occurrences fall exactly on these points, more likely a
default position (Draft function started, but not exported, and commented out)&lt;/li&gt;
  &lt;li&gt;Herbaria/Museums: many specimens may have location of the collection they are housed in&lt;/li&gt;
  &lt;li&gt;Habitat type filtering: e.g., fish should not be on land; marine fish should not be in fresh water&lt;/li&gt;
  &lt;li&gt;Check for contextually wrong values: That is, if 99 out of 100 lat/long coordinates are within the continental US, but 1 is in China, then perhaps something is wrong with that one point&lt;/li&gt;
  &lt;li&gt;and many more…&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;What else do you want included? &lt;a href=&quot;https://github.com/ropenscilabs/scrubr/issues&quot;&gt;Open an issue in the repo&lt;/a&gt; to chat about use cases.&lt;/p&gt;

&lt;h2 id=&quot;install&quot;&gt;Install&lt;/h2&gt;

&lt;p&gt;From CRAN (binaries may not be up yet, but source is)&lt;/p&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;install.packages&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;scrubr&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Or from GitHub&lt;/p&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;devtools&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;install_github&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;ropenscilabs/scrubr&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;library&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;scrubr&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;dframe&quot;&gt;dframe&lt;/h2&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;dframe()&lt;/code&gt; is a tool to convert your data.frame to a compact &lt;code class=&quot;highlighter-rouge&quot;&gt;dplyr&lt;/code&gt; like data.frame so that you can get a quick peek at your data each time you call a function - BUT, you don’t have to use it.&lt;/p&gt;

&lt;p&gt;Compare &lt;code class=&quot;highlighter-rouge&quot;&gt;mtcars&lt;/code&gt;&lt;/p&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;mtcars&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;#&amp;gt;                      mpg cyl  disp  hp drat    wt  qsec vs am gear carb
#&amp;gt; Mazda RX4           21.0   6 160.0 110 3.90 2.620 16.46  0  1    4    4
#&amp;gt; Mazda RX4 Wag       21.0   6 160.0 110 3.90 2.875 17.02  0  1    4    4
#&amp;gt; Datsun 710          22.8   4 108.0  93 3.85 2.320 18.61  1  1    4    1
#&amp;gt; Hornet 4 Drive      21.4   6 258.0 110 3.08 3.215 19.44  1  0    3    1
#&amp;gt; Hornet Sportabout   18.7   8 360.0 175 3.15 3.440 17.02  0  0    3    2
#&amp;gt; Valiant             18.1   6 225.0 105 2.76 3.460 20.22  1  0    3    1
#&amp;gt; Duster 360          14.3   8 360.0 245 3.21 3.570 15.84  0  0    3    4
#&amp;gt; Merc 240D           24.4   4 146.7  62 3.69 3.190 20.00  1  0    4    2
#&amp;gt; Merc 230            22.8   4 140.8  95 3.92 3.150 22.90  1  0    4    2
#&amp;gt; Merc 280            19.2   6 167.6 123 3.92 3.440 18.30  1  0    4    4
#&amp;gt; Merc 280C           17.8   6 167.6 123 3.92 3.440 18.90  1  0    4    4
#&amp;gt; Merc 450SE          16.4   8 275.8 180 3.07 4.070 17.40  0  0    3    3
#&amp;gt; Merc 450SL          17.3   8 275.8 180 3.07 3.730 17.60  0  0    3    3
#&amp;gt; Merc 450SLC         15.2   8 275.8 180 3.07 3.780 18.00  0  0    3    3
#&amp;gt; Cadillac Fleetwood  10.4   8 472.0 205 2.93 5.250 17.98  0  0    3    4
#&amp;gt; Lincoln Continental 10.4   8 460.0 215 3.00 5.424 17.82  0  0    3    4
#&amp;gt; Chrysler Imperial   14.7   8 440.0 230 3.23 5.345 17.42  0  0    3    4
#&amp;gt; Fiat 128            32.4   4  78.7  66 4.08 2.200 19.47  1  1    4    1
#&amp;gt; Honda Civic         30.4   4  75.7  52 4.93 1.615 18.52  1  1    4    2
#&amp;gt; Toyota Corolla      33.9   4  71.1  65 4.22 1.835 19.90  1  1    4    1
#&amp;gt; Toyota Corona       21.5   4 120.1  97 3.70 2.465 20.01  1  0    3    1
#&amp;gt; Dodge Challenger    15.5   8 318.0 150 2.76 3.520 16.87  0  0    3    2
#&amp;gt; AMC Javelin         15.2   8 304.0 150 3.15 3.435 17.30  0  0    3    2
#&amp;gt; Camaro Z28          13.3   8 350.0 245 3.73 3.840 15.41  0  0    3    4
#&amp;gt; Pontiac Firebird    19.2   8 400.0 175 3.08 3.845 17.05  0  0    3    2
#&amp;gt; Fiat X1-9           27.3   4  79.0  66 4.08 1.935 18.90  1  1    4    1
#&amp;gt; Porsche 914-2       26.0   4 120.3  91 4.43 2.140 16.70  0  1    5    2
#&amp;gt; Lotus Europa        30.4   4  95.1 113 3.77 1.513 16.90  1  1    5    2
#&amp;gt; Ford Pantera L      15.8   8 351.0 264 4.22 3.170 14.50  0  1    5    4
#&amp;gt; Ferrari Dino        19.7   6 145.0 175 3.62 2.770 15.50  0  1    5    6
#&amp;gt; Maserati Bora       15.0   8 301.0 335 3.54 3.570 14.60  0  1    5    8
#&amp;gt; Volvo 142E          21.4   4 121.0 109 4.11 2.780 18.60  1  1    4    2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;To&lt;/p&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;dframe&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mtcars&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;#&amp;gt; &amp;lt;scrubr dframe&amp;gt;
#&amp;gt; Size: 32 X 11
#&amp;gt; 
#&amp;gt; 
#&amp;gt;      mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb
#&amp;gt;    (dbl) (dbl) (dbl) (dbl) (dbl) (dbl) (dbl) (dbl) (dbl) (dbl) (dbl)
#&amp;gt; 1   21.0     6 160.0   110  3.90 2.620 16.46     0     1     4     4
#&amp;gt; 2   21.0     6 160.0   110  3.90 2.875 17.02     0     1     4     4
#&amp;gt; 3   22.8     4 108.0    93  3.85 2.320 18.61     1     1     4     1
#&amp;gt; 4   21.4     6 258.0   110  3.08 3.215 19.44     1     0     3     1
#&amp;gt; 5   18.7     8 360.0   175  3.15 3.440 17.02     0     0     3     2
#&amp;gt; 6   18.1     6 225.0   105  2.76 3.460 20.22     1     0     3     1
#&amp;gt; 7   14.3     8 360.0   245  3.21 3.570 15.84     0     0     3     4
#&amp;gt; 8   24.4     4 146.7    62  3.69 3.190 20.00     1     0     4     2
#&amp;gt; 9   22.8     4 140.8    95  3.92 3.150 22.90     1     0     4     2
#&amp;gt; 10  19.2     6 167.6   123  3.92 3.440 18.30     1     0     4     4
#&amp;gt; ..   ...   ...   ...   ...   ...   ...   ...   ...   ...   ...   ...
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;coordinate-based-cleaning&quot;&gt;Coordinate based cleaning&lt;/h2&gt;

&lt;p&gt;Load some sample data that comes with the package&lt;/p&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;sampledata1&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Remove impossible coordinates (using sample data included in the pkg)&lt;/p&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;dframe&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sample_data_1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&amp;gt;%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;coord_impossible&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;#&amp;gt; &amp;lt;scrubr dframe&amp;gt;
#&amp;gt; Size: 1500 X 5
#&amp;gt; Lat/Lon vars: latitude/longitude
#&amp;gt; 
#&amp;gt;                name  longitude latitude                date        key
#&amp;gt;               (chr)      (dbl)    (dbl)              (time)      (int)
#&amp;gt; 1  Ursus americanus  -79.68283 38.36662 2015-01-14 16:36:45 1065590124
#&amp;gt; 2  Ursus americanus  -82.42028 35.73304 2015-01-13 00:25:39 1065588899
#&amp;gt; 3  Ursus americanus  -99.09625 23.66893 2015-02-20 23:00:00 1098894889
#&amp;gt; 4  Ursus americanus  -72.77432 43.94883 2015-02-13 16:16:41 1065611122
#&amp;gt; 5  Ursus americanus  -72.34617 43.86464 2015-03-01 20:20:45 1088908315
#&amp;gt; 6  Ursus americanus -108.53674 32.65219 2015-03-29 17:06:54 1088932238
#&amp;gt; 7  Ursus americanus -108.53691 32.65237 2015-03-29 17:12:50 1088932273
#&amp;gt; 8  Ursus americanus -123.82900 40.13240 2015-03-28 23:00:00 1132403409
#&amp;gt; 9  Ursus americanus  -78.25027 36.93018 2015-03-20 21:11:24 1088923534
#&amp;gt; 10 Ursus americanus  -76.78671 35.53079 2015-04-05 23:00:00 1088954559
#&amp;gt; ..              ...        ...      ...                 ...        ...
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Remove incomplete coordinates&lt;/p&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;dframe&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sample_data_1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&amp;gt;%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;coord_incomplete&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;#&amp;gt; &amp;lt;scrubr dframe&amp;gt;
#&amp;gt; Size: 1306 X 5
#&amp;gt; Lat/Lon vars: latitude/longitude
#&amp;gt; 
#&amp;gt;                name  longitude latitude                date        key
#&amp;gt;               (chr)      (dbl)    (dbl)              (time)      (int)
#&amp;gt; 1  Ursus americanus  -79.68283 38.36662 2015-01-14 16:36:45 1065590124
#&amp;gt; 2  Ursus americanus  -82.42028 35.73304 2015-01-13 00:25:39 1065588899
#&amp;gt; 3  Ursus americanus  -99.09625 23.66893 2015-02-20 23:00:00 1098894889
#&amp;gt; 4  Ursus americanus  -72.77432 43.94883 2015-02-13 16:16:41 1065611122
#&amp;gt; 5  Ursus americanus  -72.34617 43.86464 2015-03-01 20:20:45 1088908315
#&amp;gt; 6  Ursus americanus -108.53674 32.65219 2015-03-29 17:06:54 1088932238
#&amp;gt; 7  Ursus americanus -108.53691 32.65237 2015-03-29 17:12:50 1088932273
#&amp;gt; 8  Ursus americanus -123.82900 40.13240 2015-03-28 23:00:00 1132403409
#&amp;gt; 9  Ursus americanus  -78.25027 36.93018 2015-03-20 21:11:24 1088923534
#&amp;gt; 10 Ursus americanus  -76.78671 35.53079 2015-04-05 23:00:00 1088954559
#&amp;gt; ..              ...        ...      ...                 ...        ...
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Remove unlikely coordinates (e.g., those at 0,0)&lt;/p&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;dframe&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sample_data_1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&amp;gt;%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;coord_unlikely&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;#&amp;gt; &amp;lt;scrubr dframe&amp;gt;
#&amp;gt; Size: 1488 X 5
#&amp;gt; Lat/Lon vars: latitude/longitude
#&amp;gt; 
#&amp;gt;                name  longitude latitude                date        key
#&amp;gt;               (chr)      (dbl)    (dbl)              (time)      (int)
#&amp;gt; 1  Ursus americanus  -79.68283 38.36662 2015-01-14 16:36:45 1065590124
#&amp;gt; 2  Ursus americanus  -82.42028 35.73304 2015-01-13 00:25:39 1065588899
#&amp;gt; 3  Ursus americanus  -99.09625 23.66893 2015-02-20 23:00:00 1098894889
#&amp;gt; 4  Ursus americanus  -72.77432 43.94883 2015-02-13 16:16:41 1065611122
#&amp;gt; 5  Ursus americanus  -72.34617 43.86464 2015-03-01 20:20:45 1088908315
#&amp;gt; 6  Ursus americanus -108.53674 32.65219 2015-03-29 17:06:54 1088932238
#&amp;gt; 7  Ursus americanus -108.53691 32.65237 2015-03-29 17:12:50 1088932273
#&amp;gt; 8  Ursus americanus -123.82900 40.13240 2015-03-28 23:00:00 1132403409
#&amp;gt; 9  Ursus americanus  -78.25027 36.93018 2015-03-20 21:11:24 1088923534
#&amp;gt; 10 Ursus americanus  -76.78671 35.53079 2015-04-05 23:00:00 1088954559
#&amp;gt; ..              ...        ...      ...                 ...        ...
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Do all three&lt;/p&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;dframe&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sample_data_1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&amp;gt;%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;coord_impossible&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&amp;gt;%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;coord_incomplete&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&amp;gt;%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;coord_unlikely&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;#&amp;gt; &amp;lt;scrubr dframe&amp;gt;
#&amp;gt; Size: 1294 X 5
#&amp;gt; Lat/Lon vars: latitude/longitude
#&amp;gt; 
#&amp;gt;                name  longitude latitude                date        key
#&amp;gt;               (chr)      (dbl)    (dbl)              (time)      (int)
#&amp;gt; 1  Ursus americanus  -79.68283 38.36662 2015-01-14 16:36:45 1065590124
#&amp;gt; 2  Ursus americanus  -82.42028 35.73304 2015-01-13 00:25:39 1065588899
#&amp;gt; 3  Ursus americanus  -99.09625 23.66893 2015-02-20 23:00:00 1098894889
#&amp;gt; 4  Ursus americanus  -72.77432 43.94883 2015-02-13 16:16:41 1065611122
#&amp;gt; 5  Ursus americanus  -72.34617 43.86464 2015-03-01 20:20:45 1088908315
#&amp;gt; 6  Ursus americanus -108.53674 32.65219 2015-03-29 17:06:54 1088932238
#&amp;gt; 7  Ursus americanus -108.53691 32.65237 2015-03-29 17:12:50 1088932273
#&amp;gt; 8  Ursus americanus -123.82900 40.13240 2015-03-28 23:00:00 1132403409
#&amp;gt; 9  Ursus americanus  -78.25027 36.93018 2015-03-20 21:11:24 1088923534
#&amp;gt; 10 Ursus americanus  -76.78671 35.53079 2015-04-05 23:00:00 1088954559
#&amp;gt; ..              ...        ...      ...                 ...        ...
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Do vs. don’t drop bad data&lt;/p&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;# do
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dframe&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sample_data_1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&amp;gt;%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;coord_incomplete&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;drop&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;TRUE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&amp;gt;%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NROW&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;#&amp;gt; [1] 1306
# don't
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dframe&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sample_data_1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&amp;gt;%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;coord_incomplete&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;drop&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;FALSE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&amp;gt;%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NROW&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;#&amp;gt; [1] 1500
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;deduplicate&quot;&gt;Deduplicate&lt;/h2&gt;

&lt;p&gt;Get a smaller subset of a data.frame&lt;/p&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;smalldf&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sample_data_1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;create a duplicate record&lt;/p&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;smalldf&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rbind&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;smalldf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;smalldf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,])&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;row.names&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;smalldf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;make it slightly different&lt;/p&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;smalldf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;21&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;key&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1088954555&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NROW&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;smalldf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;#&amp;gt; [1] 21
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;It’s 21 rows, including 1 duplicate. Do the deduplication&lt;/p&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dp&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dframe&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;smalldf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&amp;gt;%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dedup&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;#&amp;gt; &amp;lt;scrubr dframe&amp;gt;
#&amp;gt; Size: 20 X 5
#&amp;gt; 
#&amp;gt; 
#&amp;gt;                name  longitude latitude                date        key
#&amp;gt;               (chr)      (dbl)    (dbl)              (time)      (dbl)
#&amp;gt; 1  Ursus americanus  -79.68283 38.36662 2015-01-14 16:36:45 1065590124
#&amp;gt; 2  Ursus americanus  -82.42028 35.73304 2015-01-13 00:25:39 1065588899
#&amp;gt; 3  Ursus americanus  -99.09625 23.66893 2015-02-20 23:00:00 1098894889
#&amp;gt; 4  Ursus americanus  -72.77432 43.94883 2015-02-13 16:16:41 1065611122
#&amp;gt; 5  Ursus americanus  -72.34617 43.86464 2015-03-01 20:20:45 1088908315
#&amp;gt; 6  Ursus americanus -108.53674 32.65219 2015-03-29 17:06:54 1088932238
#&amp;gt; 7  Ursus americanus -108.53691 32.65237 2015-03-29 17:12:50 1088932273
#&amp;gt; 8  Ursus americanus -123.82900 40.13240 2015-03-28 23:00:00 1132403409
#&amp;gt; 9  Ursus americanus  -78.25027 36.93018 2015-03-20 21:11:24 1088923534
#&amp;gt; 10 Ursus americanus -103.30058 29.27042 2015-04-29 22:00:00 1088964797
#&amp;gt; ..              ...        ...      ...                 ...        ...
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Now its 20 rows, duplicate removed&lt;/p&gt;

&lt;p&gt;Here’s the duplicates&lt;/p&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nf&quot;&gt;attr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;dups&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;#&amp;gt; &amp;lt;scrubr dframe&amp;gt;
#&amp;gt; Size: 1 X 5
#&amp;gt; 
#&amp;gt; 
#&amp;gt;               name longitude latitude                date        key
#&amp;gt;              (chr)     (dbl)    (dbl)              (time)      (dbl)
#&amp;gt; 1 Ursus americanus -76.78671 35.53079 2015-04-05 23:00:00 1088954555
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;dates&quot;&gt;Dates&lt;/h2&gt;

&lt;p&gt;Standardize/convert dates&lt;/p&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sample_data_1&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dframe&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&amp;gt;%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; 
  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;date_standardize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;%d%b%Y&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;#&amp;gt; &amp;lt;scrubr dframe&amp;gt;
#&amp;gt; Size: 1500 X 5
#&amp;gt; 
#&amp;gt; 
#&amp;gt;                name  longitude latitude      date        key
#&amp;gt;               (chr)      (dbl)    (dbl)     (chr)      (int)
#&amp;gt; 1  Ursus americanus  -79.68283 38.36662 14Jan2015 1065590124
#&amp;gt; 2  Ursus americanus  -82.42028 35.73304 13Jan2015 1065588899
#&amp;gt; 3  Ursus americanus  -99.09625 23.66893 20Feb2015 1098894889
#&amp;gt; 4  Ursus americanus  -72.77432 43.94883 13Feb2015 1065611122
#&amp;gt; 5  Ursus americanus  -72.34617 43.86464 01Mar2015 1088908315
#&amp;gt; 6  Ursus americanus -108.53674 32.65219 29Mar2015 1088932238
#&amp;gt; 7  Ursus americanus -108.53691 32.65237 29Mar2015 1088932273
#&amp;gt; 8  Ursus americanus -123.82900 40.13240 28Mar2015 1132403409
#&amp;gt; 9  Ursus americanus  -78.25027 36.93018 20Mar2015 1088923534
#&amp;gt; 10 Ursus americanus  -76.78671 35.53079 05Apr2015 1088954559
#&amp;gt; ..              ...        ...      ...       ...        ...
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Drop records without dates&lt;/p&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;NROW&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;#&amp;gt; [1] 1500
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NROW&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dframe&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&amp;gt;%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;date_missing&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;#&amp;gt; [1] 1498
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Create date field from other fields&lt;/p&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;dframe&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sample_data_2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&amp;gt;%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; 
  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;date_create&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;year&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;month&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;day&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;#&amp;gt; &amp;lt;scrubr dframe&amp;gt;
#&amp;gt; Size: 1500 X 8
#&amp;gt; 
#&amp;gt; 
#&amp;gt;                name  longitude latitude        key  year month   day
#&amp;gt;               (chr)      (dbl)    (dbl)      (int) (chr) (chr) (chr)
#&amp;gt; 1  Ursus americanus  -79.68283 38.36662 1065590124  2015    01    14
#&amp;gt; 2  Ursus americanus  -82.42028 35.73304 1065588899  2015    01    13
#&amp;gt; 3  Ursus americanus  -99.09625 23.66893 1098894889  2015    02    20
#&amp;gt; 4  Ursus americanus  -72.77432 43.94883 1065611122  2015    02    13
#&amp;gt; 5  Ursus americanus  -72.34617 43.86464 1088908315  2015    03    01
#&amp;gt; 6  Ursus americanus -108.53674 32.65219 1088932238  2015    03    29
#&amp;gt; 7  Ursus americanus -108.53691 32.65237 1088932273  2015    03    29
#&amp;gt; 8  Ursus americanus -123.82900 40.13240 1132403409  2015    03    28
#&amp;gt; 9  Ursus americanus  -78.25027 36.93018 1088923534  2015    03    20
#&amp;gt; 10 Ursus americanus  -76.78671 35.53079 1088954559  2015    04    05
#&amp;gt; ..              ...        ...      ...        ...   ...   ...   ...
#&amp;gt; Variables not shown: date (chr).
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;bugs-and-such&quot;&gt;bugs and such&lt;/h2&gt;

&lt;p&gt;Report them in the &lt;a href=&quot;https://github.com/ropenscilabs/scrubr/issues&quot;&gt;scrubr issue tracker&lt;/a&gt;&lt;/p&gt;
</description>
				<published>2016-03-04 00:00:00 -0800</published>
				<link>http://localhost:4000/2016/03/scrubr/</link>
			</item>
		
	</channel>
</rss>
