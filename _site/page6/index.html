<!DOCTYPE html>

<html>
  <head>

    <meta http-equiv="Content-type" content="text/html;charset=UTF-8">

    <title>Recology: An exploration of using R for ecology, evolution, and open science.</title>

    <script type="text/javascript" src="http://use.typekit.com/jjw2jrj.js"></script>
    <script type="text/javascript">try{Typekit.load();}catch(e){}</script>

    <link type="text/css" rel="stylesheet" href="/stylesheets/reset.css">
    <link type="text/css" rel="stylesheet" href="/stylesheets/screen.css">
    <link type="text/css" rel="stylesheet" href="/stylesheets/code.css">
    <link rel="alternate" type="application/atom+xml"
      title="User Obsessed Feed" href="http://feeds.feedburner.com/userobsessed" />

    <link rel="apple-touch-icon" href="/images/iOS-114.png" />
    <link rel="apple-touch-icon-precomposed" href="/images/iOS-57.png" />
    <link rel="apple-touch-icon-precomposed" sizes="72x72" media="screen and (resolution: 132dpi)" href="/images/iOS-72.png" />
    <link rel="apple-touch-icon-precomposed" sizes="114x114" media="screen and (resolution: 326dpi)" href="/images/iOS-114.png" />

    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0" />



  </head>
  <body class="default">

    <section id="main">

      <section id="masthead" class="group">
        <header class="group">
          <p><a href="/">Recology</a></p>
          <h1>An exploration of using R for ecology, evolution, and open science.</h1>
          <img src="/images/uo-logo.png">
        </header>
      </section>

      <section id="focus" class="group">

        <section id="content" class="group">
          <section id="posts">
  <ol>
    
    <li>
      <article class="instapaper_body">
  <header>
    <h2 class="instapaper_title"><a href="/2011/05/13/plyr-s-idata-frame-vs-data-frame/">plyr's idata.frame VS. data.frame</a></h2>
  </header>
  
    I had seen the function idata.frame in plyr before, but not really tested it. From the plyr documentation:<br /><br />"An immutable data frame works like an ordinary data frame, except that when you subset it, it<br />returns a reference to the original data frame, not a a copy. This makes subsetting substantially<br />faster and has a big impact when you are working with large datasets with many groups."<br /><br />For example, although baseball is a data.frame, its immutable counterpart is a reference to it:<br /><span class="Apple-style-span" style="font-family: Monaco; font-size: 12px; line-height: 17px; white-space: pre-wrap;"></span><br /><pre class="G1dpdwhmFL" style="border-bottom-style: none; border-color: initial; border-left-style: none; border-right-style: none; border-top-style: none; border-width: initial; font-family: Monaco; font-size: 9pt !important; line-height: 1.45; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px; outline-color: initial; outline-style: none; outline-width: initial; white-space: pre-wrap !important;" tabindex="0"><span class="G1dpdwhmIL  ace_keyword" style="white-space: pre;">&gt; </span><span class="G1dpdwhmMK  ace_keyword">idata.frame(baseball)<br /></span>&lt;environment: 0x1022c74e8&gt;<br />attr(,"class")<br />[1] "idf"         "environment"</pre><br /><br />Here are a few comparisons of operations on normal data frames and immutable data frames. Immutable data frames don't work with the doBy package, but do work with aggregate in base functions. &nbsp;Overall, the speed gains using idata.frame are quite impressive - I will use it more often for sure.<br /><br /><br />Get the github code below <a href="https://gist.github.com/971191">here</a>.<br /><br /><br /><br /><br /><br />Here's the comparisons of idata.frames and data.frames:<br /><br /><div style="overflow: auto;"><div class="geshifilter"><pre class="r geshifilter-R" style="font-family: monospace;">&gt; <span style="color: #666666; font-style: italic;"># load packages</span><br /><a href="http://inside-r.org/r-doc/base/require"><span style="color: #003399; font-weight: bold;">require</span></a><span style="color: #009900;">(</span><a href="http://inside-r.org/packages/cran/plyr">plyr</a><span style="color: #009900;">)</span><span style="color: #339933;">;</span> <a href="http://inside-r.org/r-doc/base/require"><span style="color: #003399; font-weight: bold;">require</span></a><span style="color: #009900;">(</span>reshape2<span style="color: #009900;">)</span><br />&nbsp;<br />&gt; <span style="color: #666666; font-style: italic;"># Make immutable data frame</span><br />baseball_i &lt;- idata.frame<span style="color: #009900;">(</span>baseball<span style="color: #009900;">)</span><br />&nbsp;<br />&gt; <span style="color: #666666; font-style: italic;"># Example 1 - idata.frame more than twice as fast</span><br /><a href="http://inside-r.org/r-doc/base/system.time"><span style="color: #003399; font-weight: bold;">system.time</span></a><span style="color: #009900;">(</span> <a href="http://inside-r.org/r-doc/base/replicate"><span style="color: #003399; font-weight: bold;">replicate</span></a><span style="color: #009900;">(</span><span style="color: #cc66cc;">50</span><span style="color: #339933;">,</span> ddply<span style="color: #009900;">(</span> baseball<span style="color: #339933;">,</span> <span style="color: blue;">"year"</span><span style="color: #339933;">,</span> summarise<span style="color: #339933;">,</span> <a href="http://inside-r.org/r-doc/base/mean"><span style="color: #003399; font-weight: bold;">mean</span></a><span style="color: #009900;">(</span>rbi<span style="color: #009900;">)</span><span style="color: #009900;">)</span><span style="color: #009900;">)</span> <span style="color: #009900;">)</span><br />   user  <a href="http://inside-r.org/r-doc/base/system"><span style="color: #003399; font-weight: bold;">system</span></a> elapsed <br /> <span style="color: #cc66cc;">14.812</span>   <span style="color: #cc66cc;">0.252</span>  <span style="color: #cc66cc;">15.065</span> <br />&gt; <a href="http://inside-r.org/r-doc/base/system.time"><span style="color: #003399; font-weight: bold;">system.time</span></a><span style="color: #009900;">(</span> <a href="http://inside-r.org/r-doc/base/replicate"><span style="color: #003399; font-weight: bold;">replicate</span></a><span style="color: #009900;">(</span><span style="color: #cc66cc;">50</span><span style="color: #339933;">,</span> ddply<span style="color: #009900;">(</span> baseball_i<span style="color: #339933;">,</span> <span style="color: blue;">"year"</span><span style="color: #339933;">,</span> summarise<span style="color: #339933;">,</span> <a href="http://inside-r.org/r-doc/base/mean"><span style="color: #003399; font-weight: bold;">mean</span></a><span style="color: #009900;">(</span>rbi<span style="color: #009900;">)</span><span style="color: #009900;">)</span><span style="color: #009900;">)</span> <span style="color: #009900;">)</span><br />   user  <a href="http://inside-r.org/r-doc/base/system"><span style="color: #003399; font-weight: bold;">system</span></a> elapsed <br />  <span style="color: #cc66cc;">6.895</span>   <span style="color: #cc66cc;">0.020</span>   <span style="color: #cc66cc;">6.915</span>&nbsp;</pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"><span class="Apple-style-span" style="font-family: Times; white-space: normal;"><pre class="r geshifilter-R" style="font-family: monospace; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;">&gt; <span style="color: #666666; font-style: italic;"># Example 2 - Bummer, this does not work with idata.frame's</span></pre></span>&gt; colwise<span style="color: #009900;">(</span><a href="http://inside-r.org/r-doc/base/max"><span style="color: #003399; font-weight: bold;">max</span></a><span style="color: #339933;">,</span> <a href="http://inside-r.org/r-doc/base/is.numeric"><span style="color: #003399; font-weight: bold;">is.numeric</span></a><span style="color: #009900;">)</span> <span style="color: #009900;">(</span> baseball <span style="color: #009900;">)</span> <span style="color: #666666; font-style: italic;"># works</span>  year stint   g  ab   r   h X2b X3b hr rbi sb cs  <a href="http://inside-r.org/packages/cran/BB">bb</a> so ibb hbp sh sf gidp<span style="color: #cc66cc;">1</span> <span style="color: #cc66cc;">2007</span>     <span style="color: #cc66cc;">4</span> <span style="color: #cc66cc;">165</span> <span style="color: #cc66cc;">705</span> <span style="color: #cc66cc;">177</span> <span style="color: #cc66cc;">257</span>  <span style="color: #cc66cc;">64</span>  <span style="color: #cc66cc;">28</span> <span style="color: #cc66cc;">73</span>  <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: #cc66cc;">232</span> <span style="color: black; font-weight: bold;">NA</span>  <span style="color: black; font-weight: bold;">NA</span>  <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span>   <span style="color: black; font-weight: bold;">NA</span>&gt; colwise<span style="color: #009900;">(</span><a href="http://inside-r.org/r-doc/base/max"><span style="color: #003399; font-weight: bold;">max</span></a><span style="color: #339933;">,</span> <a href="http://inside-r.org/r-doc/base/is.numeric"><span style="color: #003399; font-weight: bold;">is.numeric</span></a><span style="color: #009900;">)</span> <span style="color: #009900;">(</span> baseball_i <span style="color: #009900;">)</span> <span style="color: #666666; font-style: italic;"># doesn't work</span>Error: <a href="http://inside-r.org/r-doc/base/is.data.frame"><span style="color: #003399; font-weight: bold;">is.data.frame</span></a><span style="color: #009900;">(</span><a href="http://inside-r.org/r-doc/stats/df"><span style="color: #003399; font-weight: bold;">df</span></a><span style="color: #009900;">)</span> <a href="http://inside-r.org/r-doc/methods/is"><span style="color: #003399; font-weight: bold;">is</span></a> not <span style="color: black; font-weight: bold;">TRUE</span></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;">&gt; <span style="color: #666666; font-style: italic;"># Example 3 - idata.frame twice as fast</span><br /><a href="http://inside-r.org/r-doc/base/system.time"><span style="color: #003399; font-weight: bold;">system.time</span></a><span style="color: #009900;">(</span> <a href="http://inside-r.org/r-doc/base/replicate"><span style="color: #003399; font-weight: bold;">replicate</span></a><span style="color: #009900;">(</span><span style="color: #cc66cc;">100</span><span style="color: #339933;">,</span> baseball<span style="color: #009900;">[</span>baseball$year == <span style="color: blue;">"1884"</span><span style="color: #339933;">,</span> <span style="color: #009900;">]</span> <span style="color: #009900;">)</span> <span style="color: #009900;">)</span><br />   user  <a href="http://inside-r.org/r-doc/base/system"><span style="color: #003399; font-weight: bold;">system</span></a> elapsed <br />  <span style="color: #cc66cc;">1.155</span>   <span style="color: #cc66cc;">0.048</span>   <span style="color: #cc66cc;">1.203</span> <br />&gt; <a href="http://inside-r.org/r-doc/base/system.time"><span style="color: #003399; font-weight: bold;">system.time</span></a><span style="color: #009900;">(</span> <a href="http://inside-r.org/r-doc/base/replicate"><span style="color: #003399; font-weight: bold;">replicate</span></a><span style="color: #009900;">(</span><span style="color: #cc66cc;">100</span><span style="color: #339933;">,</span> baseball_i<span style="color: #009900;">[</span>baseball_i$year == <span style="color: blue;">"1884"</span><span style="color: #339933;">,</span> <span style="color: #009900;">]</span> <span style="color: #009900;">)</span> <span style="color: #009900;">)</span><br />   user  <a href="http://inside-r.org/r-doc/base/system"><span style="color: #003399; font-weight: bold;">system</span></a> elapsed <br />  <span style="color: #cc66cc;">0.598</span>   <span style="color: #cc66cc;">0.011</span>   <span style="color: #cc66cc;">0.609</span> <br /></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;">&gt; <span style="color: #666666; font-style: italic;"># Example 4 - idata.frame faster</span><br /><a href="http://inside-r.org/r-doc/base/system.time"><span style="color: #003399; font-weight: bold;">system.time</span></a><span style="color: #009900;">(</span> <a href="http://inside-r.org/r-doc/base/replicate"><span style="color: #003399; font-weight: bold;">replicate</span></a><span style="color: #009900;">(</span><span style="color: #cc66cc;">50</span><span style="color: #339933;">,</span> melt<span style="color: #009900;">(</span>baseball<span style="color: #009900;">[</span><span style="color: #339933;">,</span> <span style="color: #cc66cc;">1</span>:<span style="color: #cc66cc;">4</span><span style="color: #009900;">]</span><span style="color: #339933;">,</span> id = <span style="color: #cc66cc;">1</span><span style="color: #009900;">)</span> <span style="color: #009900;">)</span> <span style="color: #009900;">)</span><br />   user  <a href="http://inside-r.org/r-doc/base/system"><span style="color: #003399; font-weight: bold;">system</span></a> elapsed <br /> <span style="color: #cc66cc;">16.587</span>   <span style="color: #cc66cc;">1.169</span>  <span style="color: #cc66cc;">17.755</span> <br />&gt; <a href="http://inside-r.org/r-doc/base/system.time"><span style="color: #003399; font-weight: bold;">system.time</span></a><span style="color: #009900;">(</span> <a href="http://inside-r.org/r-doc/base/replicate"><span style="color: #003399; font-weight: bold;">replicate</span></a><span style="color: #009900;">(</span><span style="color: #cc66cc;">50</span><span style="color: #339933;">,</span> melt<span style="color: #009900;">(</span>baseball_i<span style="color: #009900;">[</span><span style="color: #339933;">,</span> <span style="color: #cc66cc;">1</span>:<span style="color: #cc66cc;">4</span><span style="color: #009900;">]</span><span style="color: #339933;">,</span> id = <span style="color: #cc66cc;">1</span><span style="color: #009900;">)</span> <span style="color: #009900;">)</span> <span style="color: #009900;">)</span><br />   user  <a href="http://inside-r.org/r-doc/base/system"><span style="color: #003399; font-weight: bold;">system</span></a> elapsed <br />  <span style="color: #cc66cc;">0.869</span>   <span style="color: #cc66cc;">0.196</span>   <span style="color: #cc66cc;">1.065</span> <br /></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;">&gt; <span style="color: #666666; font-style: italic;"># And you can go back to a data frame by </span><br />d &lt;- <a href="http://inside-r.org/r-doc/base/as.data.frame"><span style="color: #003399; font-weight: bold;">as.data.frame</span></a><span style="color: #009900;">(</span>baseball_i<span style="color: #009900;">)</span><br /><a href="http://inside-r.org/r-doc/utils/str"><span style="color: #003399; font-weight: bold;">str</span></a><span style="color: #009900;">(</span>d<span style="color: #009900;">)</span><br />&nbsp;<br /><span style="color: blue;">'data.frame'</span>: <span style="color: #cc66cc;">21699</span> obs. of  <span style="color: #cc66cc;">23</span> variables:<br /> $ id   : chr  <span style="color: blue;">"ansonca01"</span> <span style="color: blue;">"forceda01"</span> <span style="color: blue;">"mathebo01"</span> <span style="color: blue;">"startjo01"</span> ...<br /> $ year : int  <span style="color: #cc66cc;">1871</span> <span style="color: #cc66cc;">1871</span> <span style="color: #cc66cc;">1871</span> <span style="color: #cc66cc;">1871</span> <span style="color: #cc66cc;">1871</span> <span style="color: #cc66cc;">1871</span> <span style="color: #cc66cc;">1871</span> <span style="color: #cc66cc;">1872</span> <span style="color: #cc66cc;">1872</span> <span style="color: #cc66cc;">1872</span> ...<br /> $ stint: int  <span style="color: #cc66cc;">1</span> <span style="color: #cc66cc;">1</span> <span style="color: #cc66cc;">1</span> <span style="color: #cc66cc;">1</span> <span style="color: #cc66cc;">1</span> <span style="color: #cc66cc;">1</span> <span style="color: #cc66cc;">1</span> <span style="color: #cc66cc;">1</span> <span style="color: #cc66cc;">1</span> <span style="color: #cc66cc;">1</span> ...<br /> $ team : chr  <span style="color: blue;">"RC1"</span> <span style="color: blue;">"WS3"</span> <span style="color: blue;">"FW1"</span> <span style="color: blue;">"NY2"</span> ...<br /> $ lg   : chr  <span style="color: blue;">""</span> <span style="color: blue;">""</span> <span style="color: blue;">""</span> <span style="color: blue;">""</span> ...<br /> $ g    : int  <span style="color: #cc66cc;">25</span> <span style="color: #cc66cc;">32</span> <span style="color: #cc66cc;">19</span> <span style="color: #cc66cc;">33</span> <span style="color: #cc66cc;">29</span> <span style="color: #cc66cc;">29</span> <span style="color: #cc66cc;">29</span> <span style="color: #cc66cc;">46</span> <span style="color: #cc66cc;">37</span> <span style="color: #cc66cc;">25</span> ...<br /> $ ab   : int  <span style="color: #cc66cc;">120</span> <span style="color: #cc66cc;">162</span> <span style="color: #cc66cc;">89</span> <span style="color: #cc66cc;">161</span> <span style="color: #cc66cc;">128</span> <span style="color: #cc66cc;">146</span> <span style="color: #cc66cc;">145</span> <span style="color: #cc66cc;">217</span> <span style="color: #cc66cc;">174</span> <span style="color: #cc66cc;">130</span> ...<br /> $ r    : int  <span style="color: #cc66cc;">29</span> <span style="color: #cc66cc;">45</span> <span style="color: #cc66cc;">15</span> <span style="color: #cc66cc;">35</span> <span style="color: #cc66cc;">35</span> <span style="color: #cc66cc;">40</span> <span style="color: #cc66cc;">36</span> <span style="color: #cc66cc;">60</span> <span style="color: #cc66cc;">26</span> <span style="color: #cc66cc;">40</span> ...<br /> $ h    : int  <span style="color: #cc66cc;">39</span> <span style="color: #cc66cc;">45</span> <span style="color: #cc66cc;">24</span> <span style="color: #cc66cc;">58</span> <span style="color: #cc66cc;">45</span> <span style="color: #cc66cc;">47</span> <span style="color: #cc66cc;">37</span> <span style="color: #cc66cc;">90</span> <span style="color: #cc66cc;">46</span> <span style="color: #cc66cc;">53</span> ...<br /> $ X2b  : int  <span style="color: #cc66cc;">11</span> <span style="color: #cc66cc;">9</span> <span style="color: #cc66cc;">3</span> <span style="color: #cc66cc;">5</span> <span style="color: #cc66cc;">3</span> <span style="color: #cc66cc;">6</span> <span style="color: #cc66cc;">5</span> <span style="color: #cc66cc;">10</span> <span style="color: #cc66cc;">3</span> <span style="color: #cc66cc;">11</span> ...<br /> $ X3b  : int  <span style="color: #cc66cc;">3</span> <span style="color: #cc66cc;">4</span> <span style="color: #cc66cc;">1</span> <span style="color: #cc66cc;">1</span> <span style="color: #cc66cc;">7</span> <span style="color: #cc66cc;">5</span> <span style="color: #cc66cc;">7</span> <span style="color: #cc66cc;">7</span> <span style="color: #cc66cc;">0</span> <span style="color: #cc66cc;">0</span> ...<br /> $ hr   : int  <span style="color: #cc66cc;">0</span> <span style="color: #cc66cc;">0</span> <span style="color: #cc66cc;">0</span> <span style="color: #cc66cc;">1</span> <span style="color: #cc66cc;">3</span> <span style="color: #cc66cc;">1</span> <span style="color: #cc66cc;">2</span> <span style="color: #cc66cc;">0</span> <span style="color: #cc66cc;">0</span> <span style="color: #cc66cc;">0</span> ...<br /> $ rbi  : int  <span style="color: #cc66cc;">16</span> <span style="color: #cc66cc;">29</span> <span style="color: #cc66cc;">10</span> <span style="color: #cc66cc;">34</span> <span style="color: #cc66cc;">23</span> <span style="color: #cc66cc;">21</span> <span style="color: #cc66cc;">23</span> <span style="color: #cc66cc;">50</span> <span style="color: #cc66cc;">15</span> <span style="color: #cc66cc;">16</span> ...<br /> $ sb   : int  <span style="color: #cc66cc;">6</span> <span style="color: #cc66cc;">8</span> <span style="color: #cc66cc;">2</span> <span style="color: #cc66cc;">4</span> <span style="color: #cc66cc;">3</span> <span style="color: #cc66cc;">2</span> <span style="color: #cc66cc;">2</span> <span style="color: #cc66cc;">6</span> <span style="color: #cc66cc;">0</span> <span style="color: #cc66cc;">2</span> ...<br /> $ cs   : int  <span style="color: #cc66cc;">2</span> <span style="color: #cc66cc;">0</span> <span style="color: #cc66cc;">1</span> <span style="color: #cc66cc;">2</span> <span style="color: #cc66cc;">1</span> <span style="color: #cc66cc;">2</span> <span style="color: #cc66cc;">2</span> <span style="color: #cc66cc;">6</span> <span style="color: #cc66cc;">1</span> <span style="color: #cc66cc;">2</span> ...<br /> $ <a href="http://inside-r.org/packages/cran/BB">bb</a>   : int  <span style="color: #cc66cc;">2</span> <span style="color: #cc66cc;">4</span> <span style="color: #cc66cc;">2</span> <span style="color: #cc66cc;">3</span> <span style="color: #cc66cc;">1</span> <span style="color: #cc66cc;">4</span> <span style="color: #cc66cc;">9</span> <span style="color: #cc66cc;">16</span> <span style="color: #cc66cc;">1</span> <span style="color: #cc66cc;">1</span> ...<br /> $ so   : int  <span style="color: #cc66cc;">1</span> <span style="color: #cc66cc;">0</span> <span style="color: #cc66cc;">0</span> <span style="color: #cc66cc;">0</span> <span style="color: #cc66cc;">0</span> <span style="color: #cc66cc;">1</span> <span style="color: #cc66cc;">1</span> <span style="color: #cc66cc;">3</span> <span style="color: #cc66cc;">1</span> <span style="color: #cc66cc;">0</span> ...<br /> $ ibb  : int  <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> ...<br /> $ hbp  : int  <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> ...<br /> $ sh   : int  <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> ...<br /> $ sf   : int  <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> ...<br /> $ gidp : int  <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> <span style="color: black; font-weight: bold;">NA</span> ...<br /> $ teamf: Factor w/ <span style="color: #cc66cc;">132</span> <a href="http://inside-r.org/r-doc/base/levels"><span style="color: #003399; font-weight: bold;">levels</span></a> <span style="color: blue;">"ALT"</span><span style="color: #339933;">,</span><span style="color: blue;">"ANA"</span><span style="color: #339933;">,</span><span style="color: blue;">"ARI"</span><span style="color: #339933;">,</span>..: <span style="color: #cc66cc;">99</span> <span style="color: #cc66cc;">127</span> <span style="color: #cc66cc;">51</span> <span style="color: #cc66cc;">79</span> <span style="color: #cc66cc;">35</span> <span style="color: #cc66cc;">35</span> <span style="color: #cc66cc;">122</span> <span style="color: #cc66cc;">86</span> <span style="color: #cc66cc;">16</span> <span style="color: #cc66cc;">122</span> ...<br /></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;">&gt; <span style="color: #666666; font-style: italic;"># idata.frame doesn't work with the doBy package</span><br /><a href="http://inside-r.org/r-doc/base/require"><span style="color: #003399; font-weight: bold;">require</span></a><span style="color: #009900;">(</span><a href="http://inside-r.org/packages/cran/doBy">doBy</a><span style="color: #009900;">)</span><br />summaryBy<span style="color: #009900;">(</span>rbi ~ year<span style="color: #339933;">,</span> baseball_i<span style="color: #339933;">,</span> FUN=<a href="http://inside-r.org/r-doc/base/c"><span style="color: #003399; font-weight: bold;">c</span></a><span style="color: #009900;">(</span><a href="http://inside-r.org/r-doc/base/mean"><span style="color: #003399; font-weight: bold;">mean</span></a><span style="color: #009900;">)</span><span style="color: #339933;">,</span> na.rm=T<span style="color: #009900;">)</span><br />Error <span style="color: black; font-weight: bold;">in</span> <a href="http://inside-r.org/r-doc/base/as.vector"><span style="color: #003399; font-weight: bold;">as.vector</span></a><span style="color: #009900;">(</span>x<span style="color: #339933;">,</span> <a href="http://inside-r.org/r-doc/base/mode"><span style="color: #003399; font-weight: bold;">mode</span></a><span style="color: #009900;">)</span> : <br />  cannot coerce type <span style="color: blue;">'environment'</span> to <a href="http://inside-r.org/r-doc/base/vector"><span style="color: #003399; font-weight: bold;">vector</span></a> of type <span style="color: blue;">'any'</span><br /></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;">&gt; <span style="color: #666666; font-style: italic;"># But idata.frame works with aggregate in base (but with minimal speed gains)</span><br /><span style="color: #666666; font-style: italic;"># and aggregate is faster than ddply of course </span><br /><a href="http://inside-r.org/r-doc/base/system.time"><span style="color: #003399; font-weight: bold;">system.time</span></a><span style="color: #009900;">(</span> <a href="http://inside-r.org/r-doc/base/replicate"><span style="color: #003399; font-weight: bold;">replicate</span></a><span style="color: #009900;">(</span><span style="color: #cc66cc;">100</span><span style="color: #339933;">,</span> <a href="http://inside-r.org/r-doc/stats/aggregate"><span style="color: #003399; font-weight: bold;">aggregate</span></a><span style="color: #009900;">(</span>rbi ~ year<span style="color: #339933;">,</span> baseball<span style="color: #339933;">,</span> <a href="http://inside-r.org/r-doc/base/mean"><span style="color: #003399; font-weight: bold;">mean</span></a><span style="color: #009900;">)</span> <span style="color: #009900;">)</span> <span style="color: #009900;">)</span><br />   user  <a href="http://inside-r.org/r-doc/base/system"><span style="color: #003399; font-weight: bold;">system</span></a> elapsed <br />  <span style="color: #cc66cc;">4.117</span>   <span style="color: #cc66cc;">0.423</span>   <span style="color: #cc66cc;">4.541</span> <br />&gt; <a href="http://inside-r.org/r-doc/base/system.time"><span style="color: #003399; font-weight: bold;">system.time</span></a><span style="color: #009900;">(</span> <a href="http://inside-r.org/r-doc/base/replicate"><span style="color: #003399; font-weight: bold;">replicate</span></a><span style="color: #009900;">(</span><span style="color: #cc66cc;">100</span><span style="color: #339933;">,</span> <a href="http://inside-r.org/r-doc/stats/aggregate"><span style="color: #003399; font-weight: bold;">aggregate</span></a><span style="color: #009900;">(</span>rbi ~ year<span style="color: #339933;">,</span> baseball_i<span style="color: #339933;">,</span> <a href="http://inside-r.org/r-doc/base/mean"><span style="color: #003399; font-weight: bold;">mean</span></a><span style="color: #009900;">)</span> <span style="color: #009900;">)</span> <span style="color: #009900;">)</span><br />   user  <a href="http://inside-r.org/r-doc/base/system"><span style="color: #003399; font-weight: bold;">system</span></a> elapsed <br />  <span style="color: #cc66cc;">3.908</span>   <span style="color: #cc66cc;">0.383</span>   <span style="color: #cc66cc;">4.291</span> <br />&gt; <a href="http://inside-r.org/r-doc/base/system.time"><span style="color: #003399; font-weight: bold;">system.time</span></a><span style="color: #009900;">(</span> <a href="http://inside-r.org/r-doc/base/replicate"><span style="color: #003399; font-weight: bold;">replicate</span></a><span style="color: #009900;">(</span><span style="color: #cc66cc;">100</span><span style="color: #339933;">,</span> ddply<span style="color: #009900;">(</span> baseball_i<span style="color: #339933;">,</span> <span style="color: blue;">"year"</span><span style="color: #339933;">,</span> summarise<span style="color: #339933;">,</span> <a href="http://inside-r.org/r-doc/base/mean"><span style="color: #003399; font-weight: bold;">mean</span></a><span style="color: #009900;">(</span>rbi<span style="color: #009900;">)</span><span style="color: #009900;">)</span> <span style="color: #009900;">)</span> <span style="color: #009900;">)</span><br />   user  <a href="http://inside-r.org/r-doc/base/system"><span style="color: #003399; font-weight: bold;">system</span></a> elapsed <br /> <span style="color: #cc66cc;">14.015</span>   <span style="color: #cc66cc;">0.048</span>  <span style="color: #cc66cc;">14.082</span> </pre></div></div><a href="http://www.inside-r.org/pretty-r" title="Created by Pretty R at inside-R.org">Created by Pretty R at inside-R.org</a>

  
  <footer class="group">
    <p>
      
      
      
        
      
      <time pubdate datetime="2011-05-13T12:00:00-05:00">Friday, May 13</time>
      
      <a class="icon" href="http://www.instapaper.com/hello2?u=http%3A%2F%2Fschamberlain.github.com%2Frecology%2F%2F2011%2F05%2F13%2Fplyr-s-idata-frame-vs-data-frame%2F&amp;title=plyr's%20idata.frame%20VS.%20data.frame" rel="alternate" title="Save to Instapaper">Read Later</a>
      
    </p>
  </footer>
</article>


    </li>
    
    <li>
      <article class="instapaper_body">
  <header>
    <h2 class="instapaper_title"><a href="/2011/05/13/mvmeta-a-new-package-for-multivariate-meta-analysis/">mvmeta: a new package for multivariate meta-analysis</a></h2>
  </header>
  
    A relatively new package (<a href="http://cran.r-project.org/web/packages/mvmeta/index.html">mvmeta</a>) is out for multivariate meta-analysis. That is, meta-analysis with multiple response variables.

  
  <footer class="group">
    <p>
      
      
      
        
      
      <time pubdate datetime="2011-05-13T12:00:00-05:00">Friday, May 13</time>
      
      <a class="icon" href="http://www.instapaper.com/hello2?u=http%3A%2F%2Fschamberlain.github.com%2Frecology%2F%2F2011%2F05%2F13%2Fmvmeta-a-new-package-for-multivariate-meta-analysis%2F&amp;title=mvmeta%3A%20a%20new%20package%20for%20multivariate%20meta-analysis" rel="alternate" title="Save to Instapaper">Read Later</a>
      
    </p>
  </footer>
</article>


    </li>
    
    <li>
      <article class="instapaper_body">
  <header>
    <h2 class="instapaper_title"><a href="/2011/05/12/google-reader/">google reader</a></h2>
  </header>
  
    I just realized that the gists code blocks don't show up in Google Reader, so you have to click the link to my blog to see the gists. Apologies for that!<br /><br />-S

  
  <footer class="group">
    <p>
      
      
      
        
      
      <time pubdate datetime="2011-05-12T12:00:00-05:00">Thursday, May 12</time>
      
      <a class="icon" href="http://www.instapaper.com/hello2?u=http%3A%2F%2Fschamberlain.github.com%2Frecology%2F%2F2011%2F05%2F12%2Fgoogle-reader%2F&amp;title=google%20reader" rel="alternate" title="Save to Instapaper">Read Later</a>
      
    </p>
  </footer>
</article>


    </li>
    
    <li>
      <article class="instapaper_body">
  <header>
    <h2 class="instapaper_title"><a href="/2011/05/11/comparison-of-functions-for-comparative-phylogenetics/">Comparison of functions for comparative phylogenetics</a></h2>
  </header>
  
    With all the packages (and beta stage groups of functions) for comparative phylogenetics in R (tested here: picante, geiger, ape, motmot, Liam Revell's functions), I was simply interested in which functions to use in cases where multiple functions exist to do the same thing. I only show default settings, so perhaps these functions would differ under different parameter settings. &nbsp;[I am using a Mac 2.4 GHz i5, 4GB RAM]<br /><br />Get motmot here:&nbsp;<a href="https://r-forge.r-project.org/R/?group_id=782">https://r-forge.r-project.org/R/?group_id=782</a><br />Get Liam Revell's functions here:&nbsp;<a href="http://anolis.oeb.harvard.edu/~liam/R-phylogenetics/">http://anolis.oeb.harvard.edu/~liam/R-phylogenetics/</a><br /><br /><br /><div style="overflow: auto;"><div class="geshifilter"><pre class="r geshifilter-R" style="font-family: monospace;">&gt; <span style="color: #666666; font-style: italic;"># Load </span><br /><a href="http://inside-r.org/r-doc/base/require"><span style="color: #003399; font-weight: bold;">require</span></a><span style="color: #009900;">(</span>motmot<span style="color: #009900;">)</span><span style="color: #339933;">;</span> <a href="http://inside-r.org/r-doc/base/require"><span style="color: #003399; font-weight: bold;">require</span></a><span style="color: #009900;">(</span><a href="http://inside-r.org/packages/cran/geiger">geiger</a><span style="color: #009900;">)</span><span style="color: #339933;">;</span> <a href="http://inside-r.org/r-doc/base/require"><span style="color: #003399; font-weight: bold;">require</span></a><span style="color: #009900;">(</span><a href="http://inside-r.org/packages/cran/picante">picante</a><span style="color: #009900;">)</span><br /><a href="http://inside-r.org/r-doc/base/source"><span style="color: #003399; font-weight: bold;">source</span></a><span style="color: #009900;">(</span><span style="color: blue;">"http://anolis.oeb.harvard.edu/~liam/R-phylogenetics/phylosig/v0.3/phylosig.R"</span><span style="color: #009900;">)</span><br /><a href="http://inside-r.org/r-doc/base/source"><span style="color: #003399; font-weight: bold;">source</span></a><span style="color: #009900;">(</span><span style="color: blue;">"http://anolis.oeb.harvard.edu/~liam/R-phylogenetics/fastBM/v0.4/fastBM.R"</span><span style="color: #009900;">)</span><br />&nbsp;<br /><span style="color: #666666; font-style: italic;"># Make tree</span><br /><a href="http://inside-r.org/packages/cran/tree">tree</a> &lt;- rcoal<span style="color: #009900;">(</span><span style="color: #cc66cc;">10</span><span style="color: #009900;">)</span><br />&nbsp;<br /><br /></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"><span style="color: #666666; font-style: italic;"><br /></span></pre><pre class="r geshifilter-R" style="font-family: monospace;"><span style="color: #666666; font-style: italic;"><br /></span></pre><pre class="r geshifilter-R" style="font-family: monospace;"><span style="color: #666666; font-style: italic;"><br /></span></pre><pre class="r geshifilter-R" style="font-family: monospace;"><span style="color: #666666; font-style: italic;"># Transform branch lengths</span><br />&gt; <a href="http://inside-r.org/r-doc/base/system.time"><span style="color: #003399; font-weight: bold;">system.time</span></a><span style="color: #009900;">(</span> <a href="http://inside-r.org/r-doc/base/replicate"><span style="color: #003399; font-weight: bold;">replicate</span></a><span style="color: #009900;">(</span><span style="color: #cc66cc;">1000</span><span style="color: #339933;">,</span> transformPhylo<span style="color: #009900;">(</span><a href="http://inside-r.org/packages/cran/tree">tree</a><span style="color: #339933;">,</span> model = <span style="color: blue;">"lambda"</span><span style="color: #339933;">,</span> lambda = <span style="color: #cc66cc;">0.5</span><span style="color: #009900;">)</span><span style="color: #009900;">)</span> <span style="color: #009900;">)</span> <span style="color: #666666; font-style: italic;"># motmot</span><br />   user  <a href="http://inside-r.org/r-doc/base/system"><span style="color: #003399; font-weight: bold;">system</span></a> elapsed <br />  <span style="color: #cc66cc;">1.757</span>   <span style="color: #cc66cc;">0.004</span>   <span style="color: #cc66cc;">1.762</span> <br />&gt; <a href="http://inside-r.org/r-doc/base/system.time"><span style="color: #003399; font-weight: bold;">system.time</span></a><span style="color: #009900;">(</span> <a href="http://inside-r.org/r-doc/base/replicate"><span style="color: #003399; font-weight: bold;">replicate</span></a><span style="color: #009900;">(</span><span style="color: #cc66cc;">1000</span><span style="color: #339933;">,</span> lambdaTree<span style="color: #009900;">(</span><a href="http://inside-r.org/packages/cran/tree">tree</a><span style="color: #339933;">,</span> <span style="color: #cc66cc;">0.9</span><span style="color: #009900;">)</span><span style="color: #009900;">)</span> <span style="color: #009900;">)</span> <span style="color: #666666; font-style: italic;"># geiger</span><br />   user  <a href="http://inside-r.org/r-doc/base/system"><span style="color: #003399; font-weight: bold;">system</span></a> elapsed <br />  <span style="color: #cc66cc;">3.708</span>   <span style="color: #cc66cc;">0.008</span>   <span style="color: #cc66cc;">3.716</span> <br />&gt;   <span style="color: #666666; font-style: italic;"># motmot wins!!!</span><br /></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"><span class="Apple-style-span" style="color: #666666; font-style: italic;"><br /></span></pre><pre class="r geshifilter-R" style="font-family: monospace;"><span class="Apple-style-span" style="color: #666666; font-style: italic;"><br /></span></pre><pre class="r geshifilter-R" style="font-family: monospace;"><span class="Apple-style-span" style="color: #666666; font-style: italic;"># Simulate trait evolution</span></pre><pre class="r geshifilter-R" style="font-family: monospace;"><a href="http://inside-r.org/r-doc/base/system.time"><span style="color: #003399; font-weight: bold;">system.time</span></a><span style="color: #009900;">(</span> <a href="http://inside-r.org/r-doc/base/replicate"><span style="color: #003399; font-weight: bold;">replicate</span></a><span style="color: #009900;">(</span><span style="color: #cc66cc;">1000</span><span style="color: #339933;">,</span> transformPhylo.sim<span style="color: #009900;">(</span><a href="http://inside-r.org/packages/cran/tree">tree</a><span style="color: #339933;">,</span> model = <span style="color: blue;">"bm"</span><span style="color: #009900;">)</span><span style="color: #009900;">)</span> <span style="color: #009900;">)</span> <span style="color: #666666; font-style: italic;"># motmot</span><br />   user  <a href="http://inside-r.org/r-doc/base/system"><span style="color: #003399; font-weight: bold;">system</span></a> elapsed <br />  <span style="color: #cc66cc;">3.732</span>   <span style="color: #cc66cc;">0.007</span>   <span style="color: #cc66cc;">3.741</span> <br />&gt; <a href="http://inside-r.org/r-doc/base/system.time"><span style="color: #003399; font-weight: bold;">system.time</span></a><span style="color: #009900;">(</span> <a href="http://inside-r.org/r-doc/base/replicate"><span style="color: #003399; font-weight: bold;">replicate</span></a><span style="color: #009900;">(</span><span style="color: #cc66cc;">1000</span><span style="color: #339933;">,</span> rTraitCont<span style="color: #009900;">(</span><a href="http://inside-r.org/packages/cran/tree">tree</a><span style="color: #339933;">,</span> model = <span style="color: blue;">"BM"</span><span style="color: #009900;">)</span><span style="color: #009900;">)</span> <span style="color: #009900;">)</span> <span style="color: #666666; font-style: italic;"># ape</span><br />   user  <a href="http://inside-r.org/r-doc/base/system"><span style="color: #003399; font-weight: bold;">system</span></a> elapsed <br />  <span style="color: #cc66cc;">0.312</span>   <span style="color: #cc66cc;">0.009</span>   <span style="color: #cc66cc;">0.321</span> <br />&gt; <a href="http://inside-r.org/r-doc/base/system.time"><span style="color: #003399; font-weight: bold;">system.time</span></a><span style="color: #009900;">(</span> <a href="http://inside-r.org/r-doc/base/replicate"><span style="color: #003399; font-weight: bold;">replicate</span></a><span style="color: #009900;">(</span><span style="color: #cc66cc;">1000</span><span style="color: #339933;">,</span> fastBM<span style="color: #009900;">(</span><a href="http://inside-r.org/packages/cran/tree">tree</a><span style="color: #009900;">)</span><span style="color: #009900;">)</span> <span style="color: #009900;">)</span> <span style="color: #666666; font-style: italic;"># Revell</span><br />   user  <a href="http://inside-r.org/r-doc/base/system"><span style="color: #003399; font-weight: bold;">system</span></a> elapsed <br />  <span style="color: #cc66cc;">1.315</span>   <span style="color: #cc66cc;">0.005</span>   <span style="color: #cc66cc;">1.320</span> <br />&gt;   <span style="color: #666666; font-style: italic;"># ape wins!!!</span><br /><span style="color: #666666; font-style: italic;"><br /></span></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"># Phylogenetically independent contrasts<br />trait &lt;- <a href="http://inside-r.org/r-doc/stats/rnorm"><span style="color: #003399; font-weight: bold;">rnorm</span></a><span style="color: #009900;">(</span><span style="color: #cc66cc;">10</span><span style="color: #009900;">)</span><br /><a href="http://inside-r.org/r-doc/base/names"><span style="color: #003399; font-weight: bold;">names</span></a><span style="color: #009900;">(</span>trait<span style="color: #009900;">)</span> &lt;- <a href="http://inside-r.org/packages/cran/tree">tree</a>$tip.label<br />&nbsp;<br />&gt; <a href="http://inside-r.org/r-doc/base/system.time"><span style="color: #003399; font-weight: bold;">system.time</span></a><span style="color: #009900;">(</span> <a href="http://inside-r.org/r-doc/base/replicate"><span style="color: #003399; font-weight: bold;">replicate</span></a><span style="color: #009900;">(</span><span style="color: #cc66cc;">10000</span><span style="color: #339933;">,</span> pic.motmot<span style="color: #009900;">(</span>trait<span style="color: #339933;">,</span> <a href="http://inside-r.org/packages/cran/tree">tree</a><span style="color: #009900;">)</span>$contr<span style="color: #009900;">[</span><span style="color: #339933;">,</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">]</span><span style="color: #009900;">)</span>  <span style="color: #009900;">)</span> <span style="color: #666666; font-style: italic;"># motmot</span><br />   user  <a href="http://inside-r.org/r-doc/base/system"><span style="color: #003399; font-weight: bold;">system</span></a> elapsed <br />  <span style="color: #cc66cc;">3.062</span>   <span style="color: #cc66cc;">0.007</span>   <span style="color: #cc66cc;">3.070</span> <br />&gt; <a href="http://inside-r.org/r-doc/base/system.time"><span style="color: #003399; font-weight: bold;">system.time</span></a><span style="color: #009900;">(</span> <a href="http://inside-r.org/r-doc/base/replicate"><span style="color: #003399; font-weight: bold;">replicate</span></a><span style="color: #009900;">(</span><span style="color: #cc66cc;">10000</span><span style="color: #339933;">,</span> pic<span style="color: #009900;">(</span>trait<span style="color: #339933;">,</span> <a href="http://inside-r.org/packages/cran/tree">tree</a><span style="color: #009900;">)</span><span style="color: #009900;">)</span> <span style="color: #009900;">)</span> <span style="color: #666666; font-style: italic;"># ape</span><br />   user  <a href="http://inside-r.org/r-doc/base/system"><span style="color: #003399; font-weight: bold;">system</span></a> elapsed <br />  <span style="color: #cc66cc;">2.846</span>   <span style="color: #cc66cc;">0.007</span>   <span style="color: #cc66cc;">2.853</span> <br />&gt;   <span style="color: #666666; font-style: italic;"># ape wins!!!</span><br /><span style="color: #666666; font-style: italic;"><br /></span></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"># Phylogenetic signal, Blomberg's K<br />&gt; <a href="http://inside-r.org/r-doc/base/system.time"><span style="color: #003399; font-weight: bold;">system.time</span></a><span style="color: #009900;">(</span> <a href="http://inside-r.org/r-doc/base/replicate"><span style="color: #003399; font-weight: bold;">replicate</span></a><span style="color: #009900;">(</span><span style="color: #cc66cc;">100</span><span style="color: #339933;">,</span> Kcalc<span style="color: #009900;">(</span>trait<span style="color: #339933;">,</span> <a href="http://inside-r.org/packages/cran/tree">tree</a><span style="color: #009900;">)</span><span style="color: #009900;">)</span>  <span style="color: #009900;">)</span> <span style="color: #666666; font-style: italic;"># picante</span><br />   user  <a href="http://inside-r.org/r-doc/base/system"><span style="color: #003399; font-weight: bold;">system</span></a> elapsed <br />  <span style="color: #cc66cc;">1.311</span>   <span style="color: #cc66cc;">0.005</span>   <span style="color: #cc66cc;">1.316</span> <br />&gt; <a href="http://inside-r.org/r-doc/base/system.time"><span style="color: #003399; font-weight: bold;">system.time</span></a><span style="color: #009900;">(</span> <a href="http://inside-r.org/r-doc/base/replicate"><span style="color: #003399; font-weight: bold;">replicate</span></a><span style="color: #009900;">(</span><span style="color: #cc66cc;">100</span><span style="color: #339933;">,</span> phylosig<span style="color: #009900;">(</span><a href="http://inside-r.org/packages/cran/tree">tree</a><span style="color: #339933;">,</span> trait<span style="color: #339933;">,</span> method = <span style="color: blue;">"K"</span><span style="color: #009900;">)</span><span style="color: #009900;">)</span> <span style="color: #009900;">)</span> <span style="color: #666666; font-style: italic;"># Revell</span><br />   user  <a href="http://inside-r.org/r-doc/base/system"><span style="color: #003399; font-weight: bold;">system</span></a> elapsed <br />  <span style="color: #cc66cc;">0.201</span>   <span style="color: #cc66cc;">0.000</span>   <span style="color: #cc66cc;">0.202</span> <br />&gt;   <span style="color: #666666; font-style: italic;"># Liam Revell wins!!!</span><br /><span style="color: #666666; font-style: italic;"><br /></span></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"># Ancestral character state estimation<br />&gt; <a href="http://inside-r.org/r-doc/base/system.time"><span style="color: #003399; font-weight: bold;">system.time</span></a><span style="color: #009900;">(</span> <a href="http://inside-r.org/r-doc/base/replicate"><span style="color: #003399; font-weight: bold;">replicate</span></a><span style="color: #009900;">(</span><span style="color: #cc66cc;">100</span><span style="color: #339933;">,</span> ace<span style="color: #009900;">(</span>trait<span style="color: #339933;">,</span> <a href="http://inside-r.org/packages/cran/tree">tree</a><span style="color: #009900;">)</span>$ace<span style="color: #009900;">)</span> <span style="color: #009900;">)</span> <span style="color: #666666; font-style: italic;"># ape</span><br />   user  <a href="http://inside-r.org/r-doc/base/system"><span style="color: #003399; font-weight: bold;">system</span></a> elapsed <br />  <span style="color: #cc66cc;">4.988</span>   <span style="color: #cc66cc;">0.018</span>   <span style="color: #cc66cc;">5.007</span> <br />&gt; <a href="http://inside-r.org/r-doc/base/system.time"><span style="color: #003399; font-weight: bold;">system.time</span></a><span style="color: #009900;">(</span> <a href="http://inside-r.org/r-doc/base/replicate"><span style="color: #003399; font-weight: bold;">replicate</span></a><span style="color: #009900;">(</span><span style="color: #cc66cc;">100</span><span style="color: #339933;">,</span> getAncStates<span style="color: #009900;">(</span>trait<span style="color: #339933;">,</span> <a href="http://inside-r.org/packages/cran/tree">tree</a><span style="color: #009900;">)</span><span style="color: #009900;">)</span> <span style="color: #009900;">)</span> <span style="color: #666666; font-style: italic;"># geiger</span><br />   user  <a href="http://inside-r.org/r-doc/base/system"><span style="color: #003399; font-weight: bold;">system</span></a> elapsed <br />  <span style="color: #cc66cc;">2.253</span>   <span style="color: #cc66cc;">0.005</span>   <span style="color: #cc66cc;">2.258</span> <br />&gt;   <span style="color: #666666; font-style: italic;"># geiger wins!!!</span></pre><pre class="r geshifilter-R" style="font-family: monospace;"><span style="color: #666666; font-style: italic;"><br /></span></pre></div></div><a href="http://www.inside-r.org/pretty-r" title="Created by Pretty R at inside-R.org">Created by Pretty R at inside-R.org</a><br /><br /><br />__________<br />It's hard to pick an overall winner because not all functions are available in all packages, but there are definitely some functions that are faster than others.

  
  <footer class="group">
    <p>
      
      
      
        
      
      <time pubdate datetime="2011-05-11T12:00:00-05:00">Wednesday, May 11</time>
      
      <a class="icon" href="http://www.instapaper.com/hello2?u=http%3A%2F%2Fschamberlain.github.com%2Frecology%2F%2F2011%2F05%2F11%2Fcomparison-of-functions-for-comparative-phylogenetics%2F&amp;title=Comparison%20of%20functions%20for%20comparative%20phylogenetics" rel="alternate" title="Save to Instapaper">Read Later</a>
      
    </p>
  </footer>
</article>


    </li>
    
    <li>
      <article class="instapaper_body">
  <header>
    <h2 class="instapaper_title"><a href="/2011/05/10/graduate-students-and-ddigs/">Graduate students and DDIGs</a></h2>
  </header>
  
    
  
  <footer class="group">
    <p>
      
      
      
        
      
      <time pubdate datetime="2011-05-10T12:00:00-05:00">Tuesday, May 10</time>
      
      <a class="icon" href="http://www.instapaper.com/hello2?u=http%3A%2F%2Fschamberlain.github.com%2Frecology%2F%2F2011%2F05%2F10%2Fgraduate-students-and-ddigs%2F&amp;title=Graduate%20students%20and%20DDIGs" rel="alternate" title="Save to Instapaper">Read Later</a>
      
    </p>
  </footer>
</article>


    </li>
    
    <li>
      <article class="instapaper_body">
  <header>
    <h2 class="instapaper_title"><a href="/2011/05/06/the-decline-effect/">The Decline Effect</a></h2>
  </header>
  
    The decline effect, DEFINITION, was talked about in a recent podcast <a href="http://www.radiolab.org/blogs/radiolab-blog/2011/may/03/cosmic-habituation/">Cosmic Habituation</a> by Radiolab. They discussed the surprising finding by Jonathan Schooler in the 1990s that, after replication many times, seemed to decrease in magnitude. Jonathan Schooler wrote <a href="http://www.nature.com/news/2011/110223/full/470437a.html">a recent commentary in Nature magazine</a>, and a&nbsp;story in <a href="http://www.newyorker.com/reporting/2010/12/13/101213fa_fact_lehrer?currentPage=all">The New Yorker</a> by the awesome Jonah Lehrer also discussed the decline effect. The decline effect was also discussed at the&nbsp;EEB&amp;Flow blog&nbsp;<a href="http://evol-eco.blogspot.com/2011/02/further-studies-of-decline-effect-find.html">here</a>, in response to Jonathan's article in Nature.<br /><br />I thought it was appropriate to examine the possible decline effect in ecological meta-analyses. Here is one exploration of the effect.<br /><br />The data set is from XXXX. Bla bla....<br /><br /><br />Here's the code:<br />[insert gist code]<br /><br />As you can see, XXXXXXX.<br />[insert figure]

  
  <footer class="group">
    <p>
      
      
      
        
      
      <time pubdate datetime="2011-05-06T12:00:00-05:00">Friday, May  6</time>
      
      <a class="icon" href="http://www.instapaper.com/hello2?u=http%3A%2F%2Fschamberlain.github.com%2Frecology%2F%2F2011%2F05%2F06%2Fthe-decline-effect%2F&amp;title=The%20Decline%20Effect" rel="alternate" title="Save to Instapaper">Read Later</a>
      
    </p>
  </footer>
</article>


    </li>
    
    <li>
      <article class="instapaper_body">
  <header>
    <h2 class="instapaper_title"><a href="/2011/05/06/motmot-r-package-for-fitting-models-of-trait-evolution/">motmot: R package for fitting models of trait evolution</a></h2>
  </header>
  
    
  
  <footer class="group">
    <p>
      
      
      
        
      
      <time pubdate datetime="2011-05-06T12:00:00-05:00">Friday, May  6</time>
      
      <a class="icon" href="http://www.instapaper.com/hello2?u=http%3A%2F%2Fschamberlain.github.com%2Frecology%2F%2F2011%2F05%2F06%2Fmotmot-r-package-for-fitting-models-of-trait-evolution%2F&amp;title=motmot%3A%20R%20package%20for%20fitting%20models%20of%20trait%20evolution" rel="alternate" title="Save to Instapaper">Read Later</a>
      
    </p>
  </footer>
</article>


    </li>
    
    <li>
      <article class="instapaper_body">
  <header>
    <h2 class="instapaper_title"><a href="/2011/05/04/rhipe-package-in-r-for-interfacing-between-hadoop-and-r/">RHIPE package in R for interfacing between Hadoop and R</a></h2>
  </header>
  
    <div><strong><a href="http://www.lecturemaker.com/2011/02/rhipe/#video" title="Click link to go to the video page">RHIPE: An Interface Between Hadoop and R</a></strong><br />Presented by Saptarshi Guha</div><a href="http://www.lecturemaker.com/2011/02/rhipe/#video"><img alt="Video Link" border="0" height="169" src="http://www.lecturemaker.com/lectures/RMeetUp2010/RHIPE_Lecture.jpg" title="Click image to go to the video page" width="300" /></a>          <br /><br /><br />And <a href="http://blog.piccolboni.info/2011/04/looking-for-map-reduce-language.html">this review</a> of methods for interfacing with Hadoop suggests R's RHIPE is quite nice.

  
  <footer class="group">
    <p>
      
      
      
        
      
      <time pubdate datetime="2011-05-04T12:00:00-05:00">Wednesday, May  4</time>
      
      <a class="icon" href="http://www.instapaper.com/hello2?u=http%3A%2F%2Fschamberlain.github.com%2Frecology%2F%2F2011%2F05%2F04%2Frhipe-package-in-r-for-interfacing-between-hadoop-and-r%2F&amp;title=RHIPE%20package%20in%20R%20for%20interfacing%20between%20Hadoop%20and%20R" rel="alternate" title="Save to Instapaper">Read Later</a>
      
    </p>
  </footer>
</article>


    </li>
    
    <li>
      <article class="instapaper_body">
  <header>
    <h2 class="instapaper_title"><a href="/2011/05/03/treebase-trees-from-r/">Treebase trees from R</a></h2>
  </header>
  
    UPDATE: See Carl Boettiger's functions/package at Github for searching Treebase <a href="https://github.com/ropensci/treeBASE">here</a>.<br /><br /><br /><br />Treebase is a great resource for phylogenetic trees, and has a nice interface for searching for certain types of trees. However, if you want to simply download a lot of trees for analyses (like that in <a href="http://biology.mcgill.ca/faculty/davies/pdfs/Davies_etal_Evolution_2011.pdf">Davies et al.</a>), then you want to be able to access trees in bulk (I believe Treebase folks are working on an API though). I wrote some simple code for extracting trees from <a href="http://treebase.org/">Treebase.org</a>.<br /><br />It reads an xml file of (in this case consensus) URL's for each tree, parses the xml, makes a vector of URL's, reads the nexus files with error checking, remove trees that gave errors, then a simple plot looking at metrics of the trees.<br /><br />Is there an easier way to do this?<br /><br /><br /><br /><script src="https://gist.github.com/953468.js?file=treebase_code.R"></script><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-AaMexPVCreo/TcAW171ZBaI/AAAAAAAAEbc/bDafe7YgGcw/s1600/sampetreebaseplot.png" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"><img border="0" height="256" src="http://2.bp.blogspot.com/-AaMexPVCreo/TcAW171ZBaI/AAAAAAAAEbc/bDafe7YgGcw/s320/sampetreebaseplot.png" width="320" /></a></div>

  
  <footer class="group">
    <p>
      
      
      
        
      
      <time pubdate datetime="2011-05-03T12:00:00-05:00">Tuesday, May  3</time>
      
      <a class="icon" href="http://www.instapaper.com/hello2?u=http%3A%2F%2Fschamberlain.github.com%2Frecology%2F%2F2011%2F05%2F03%2Ftreebase-trees-from-r%2F&amp;title=Treebase%20trees%20from%20R" rel="alternate" title="Save to Instapaper">Read Later</a>
      
    </p>
  </footer>
</article>


    </li>
    
    <li>
      <article class="instapaper_body">
  <header>
    <h2 class="instapaper_title"><a href="/2011/04/28/processing-nested-lists/">Processing nested lists</a></h2>
  </header>
  
    So perhaps you have all figured this out already, but I was excited to figure out how to finally neatly get all the data frames, lists, vectors, etc. out of a nested list. It is as easy as nesting calls to the apply family of functions, in the case below, using plyr's apply like functions. Take this example:<br /><br /><br /><br /><div style="overflow: auto;"><div class="geshifilter"><pre class="r geshifilter-R"><span style="color: #666666; font-family: monospace; font-style: italic;"># Nested lists code, an example</span><br /><span style="color: #666666; font-family: monospace; font-style: italic;"># Make a nested list</span><br />mylist <span style="font-family: monospace;">&lt;-</span> <a href="http://inside-r.org/r-doc/base/list" style="font-family: monospace;"><span style="color: #003399; font-weight: bold;">list</span></a><span style="color: #009900; font-family: monospace;">(</span><span style="color: #009900; font-family: monospace;">)</span><br />mylist_ <span style="font-family: monospace;">&lt;-</span> <a href="http://inside-r.org/r-doc/base/list" style="font-family: monospace;"><span style="color: #003399; font-weight: bold;">list</span></a><span style="color: #009900; font-family: monospace;">(</span><span style="color: #009900; font-family: monospace;">)</span><br /><span style="color: black; font-family: monospace; font-weight: bold;">for</span><span style="color: #009900; font-family: monospace;">(</span>i <span style="color: black; font-family: monospace; font-weight: bold;">in</span> <span style="color: #cc66cc; font-family: monospace;">1</span><span style="font-family: monospace;">:</span><span style="color: #cc66cc; font-family: monospace;">5</span><span style="color: #009900; font-family: monospace;">)</span> <span style="color: #009900; font-family: monospace;">{</span><br /> <span style="color: black; font-family: monospace; font-weight: bold;">for</span><span style="color: #009900; font-family: monospace;">(</span>j <span style="color: black; font-family: monospace; font-weight: bold;">in</span> <span style="color: #cc66cc; font-family: monospace;">1</span><span style="font-family: monospace;">:</span><span style="color: #cc66cc; font-family: monospace;">5</span><span style="color: #009900; font-family: monospace;">)</span> <span style="color: #009900; font-family: monospace;">{</span><br />  mylist<span style="color: #009900; font-family: monospace;">[</span><span style="color: #009900; font-family: monospace;">[</span>j<span style="color: #009900; font-family: monospace;">]</span><span style="color: #009900; font-family: monospace;">]</span> <span style="font-family: monospace;">&lt;-</span> i<span style="font-family: monospace;">*</span>j<br /> <span style="color: #009900; font-family: monospace;">}</span><br />mylist_<span style="color: #009900; font-family: monospace;">[</span><span style="color: #009900; font-family: monospace;">[</span>i<span style="color: #009900; font-family: monospace;">]</span><span style="color: #009900; font-family: monospace;">]</span> <span style="font-family: monospace;">&lt;-</span> mylist<br /><span style="color: #009900; font-family: monospace;">}</span><br />&nbsp;<br /><span style="color: #666666; font-family: monospace; font-style: italic;"># return values from first part of list</span><br />laply<span style="color: #009900; font-family: monospace;">(</span>mylist_<span style="color: #009900; font-family: monospace;">[</span><span style="color: #009900; font-family: monospace;">[</span><span style="color: #cc66cc; font-family: monospace;">1</span><span style="color: #009900; font-family: monospace;">]</span><span style="color: #009900; font-family: monospace;">]</span><span style="color: #339933; font-family: monospace;">,</span> <a href="http://inside-r.org/r-doc/base/identity" style="font-family: monospace;"><span style="color: #003399; font-weight: bold;">identity</span></a><span style="color: #009900; font-family: monospace;">)</span><br />[1] 1 2 3 4 5</pre><pre class="r geshifilter-R">&nbsp;<br /><span style="color: #666666; font-family: monospace; font-style: italic;"># return all values</span><br />laply<span style="color: #009900; font-family: monospace;">(</span>mylist_<span style="color: #339933; font-family: monospace;">,</span> <a href="http://inside-r.org/r-doc/base/function" style="font-family: monospace;"><span style="color: #003399; font-weight: bold;">function</span></a><span style="color: #009900; font-family: monospace;">(</span>x<span style="color: #009900; font-family: monospace;">)</span> laply<span style="color: #009900; font-family: monospace;">(</span>x<span style="color: #339933; font-family: monospace;">,</span> <a href="http://inside-r.org/r-doc/base/identity" style="font-family: monospace;"><span style="color: #003399; font-weight: bold;">identity</span></a><span style="color: #009900; font-family: monospace;">)</span><span style="color: #009900; font-family: monospace;">)</span><br />     1  2  3  4  5<br />[1,] 1  2  3  4  5<br />[2,] 2  4  6  8 10<br />[3,] 3  6  9 12 15<br />[4,] 4  8 12 16 20<br />[5,] 5 10 15 20 25</pre><pre class="r geshifilter-R" style="font-family: monospace;">&nbsp;<br /><span style="color: #666666; font-style: italic;"># perform some function, in this case sqrt of each value</span><br />laply<span style="color: #009900;">(</span>mylist_<span style="color: #339933;">,</span> <a href="http://inside-r.org/r-doc/base/function"><span style="color: #003399; font-weight: bold;">function</span></a><span style="color: #009900;">(</span>x<span style="color: #009900;">)</span> laply<span style="color: #009900;">(</span>x<span style="color: #339933;">,</span> <a href="http://inside-r.org/r-doc/base/function"><span style="color: #003399; font-weight: bold;">function</span></a><span style="color: #009900;">(</span>x<span style="color: #009900;">)</span> <a href="http://inside-r.org/r-doc/base/sqrt"><span style="color: #003399; font-weight: bold;">sqrt</span></a><span style="color: #009900;">(</span>x<span style="color: #009900;">)</span><span style="color: #009900;">)</span><span style="color: #009900;">)</span></pre><pre class="r geshifilter-R"><span style="color: #009900;">  </span><br />        1        2        3        4        5<br />[1,] 1.000000 1.414214 1.732051 2.000000 2.236068<br />[2,] 1.414214 2.000000 2.449490 2.828427 3.162278<br />[3,] 1.732051 2.449490 3.000000 3.464102 3.872983<br />[4,] 2.000000 2.828427 3.464102 4.000000 4.472136<br />[5,] 2.236068 3.162278 3.872983 4.472136 5.000000<br /></pre></div></div><br /><br /><a href="http://www.inside-r.org/pretty-r" title="Created by Pretty R at inside-R.org">Created by Pretty R at inside-R.org</a>

  
  <footer class="group">
    <p>
      
      
      
        
      
      <time pubdate datetime="2011-04-28T12:00:00-05:00">Thursday, April 28</time>
      
      <a class="icon" href="http://www.instapaper.com/hello2?u=http%3A%2F%2Fschamberlain.github.com%2Frecology%2F%2F2011%2F04%2F28%2Fprocessing-nested-lists%2F&amp;title=Processing%20nested%20lists" rel="alternate" title="Save to Instapaper">Read Later</a>
      
    </p>
  </footer>
</article>


    </li>
    
  </ol>

  
  <nav id="pagination">
    <ol>
      
        
      
      
      <li>
        <a href="/pagelayoutdefaulturl/page6/index.htmlcontent<section id="posts">
  <ol>
    {% for post in paginator.posts %}
    <li>
      {% include post.html %}
    </li>
    {% endfor %}
  </ol>

  {% if paginator.total_pages > 1 %}
  <nav id="pagination">
    <ol>
      {% if paginator.previous_page > 1 %}
        {% capture page_url %}page{{ page }}{% endcapture%}
      {% endif %}
      {% if paginator.previous_page %}
      <li>
        <a href="/{{ page_url }}" title="Go to previous page">
          &laquo;
        </a>
      </li>
      {% endif %}
      <li>
      {% for page in (1..paginator.total_pages) %}
      <li>
        {% if page > 1 %}
          {% capture page_url %}page{{ page }}{% endcapture%}
        {% endif %}
        {% if page == paginator.page %}
          {{ page }}
        {% else %}
          <a href="/{{ page_url }}">{{ page }}</a>
        {% endif %}
      </li>
      {% endfor %}
      {% if paginator.next_page %}
      <li>
        <a href="/page{{ paginator.next_page }}" title="Go to next page">
          &raquo;
        </a>
      </li>
      {% endif %}
    </ol>
  </nav>
  {% endif %}
</section>
" title="Go to previous page">
          &laquo;
        </a>
      </li>
      
      <li>
      
      <li>
        
        
          <a href="/pagelayoutdefaulturl/page6/index.htmlcontent<section id="posts">
  <ol>
    {% for post in paginator.posts %}
    <li>
      {% include post.html %}
    </li>
    {% endfor %}
  </ol>

  {% if paginator.total_pages > 1 %}
  <nav id="pagination">
    <ol>
      {% if paginator.previous_page > 1 %}
        {% capture page_url %}page{{ page }}{% endcapture%}
      {% endif %}
      {% if paginator.previous_page %}
      <li>
        <a href="/{{ page_url }}" title="Go to previous page">
          &laquo;
        </a>
      </li>
      {% endif %}
      <li>
      {% for page in (1..paginator.total_pages) %}
      <li>
        {% if page > 1 %}
          {% capture page_url %}page{{ page }}{% endcapture%}
        {% endif %}
        {% if page == paginator.page %}
          {{ page }}
        {% else %}
          <a href="/{{ page_url }}">{{ page }}</a>
        {% endif %}
      </li>
      {% endfor %}
      {% if paginator.next_page %}
      <li>
        <a href="/page{{ paginator.next_page }}" title="Go to next page">
          &raquo;
        </a>
      </li>
      {% endif %}
    </ol>
  </nav>
  {% endif %}
</section>
">1</a>
        
      </li>
      
      <li>
        
          
        
        
          <a href="/page2">2</a>
        
      </li>
      
      <li>
        
          
        
        
          <a href="/page3">3</a>
        
      </li>
      
      <li>
        
          
        
        
          <a href="/page4">4</a>
        
      </li>
      
      <li>
        
          
        
        
          <a href="/page5">5</a>
        
      </li>
      
      <li>
        
          
        
        
          6
        
      </li>
      
      <li>
        
          
        
        
          <a href="/page7">7</a>
        
      </li>
      
      <li>
        
          
        
        
          <a href="/page8">8</a>
        
      </li>
      
      <li>
        
          
        
        
          <a href="/page9">9</a>
        
      </li>
      
      <li>
        
          
        
        
          <a href="/page10">10</a>
        
      </li>
      
      
      <li>
        <a href="/page7" title="Go to next page">
          &raquo;
        </a>
      </li>
      
    </ol>
  </nav>
  
</section>

        </section>

        <section id="sidebar">

          <section id="meta-col1" class="meta group">
            <aside id="about">
              <header>
                <h3>About</h3>
              </header>
              <p>
                Recology is a blog that explores using R for ecology, evolution, and open science. <a href="/about">See more.</a>
              </p>
            </aside>

            <aside>
              <header>
                <h3>Stay up to date</h3>
              </header>
              <nav>
                <ul>
                  <li class="icon rss"><a href="http://feeds.feedburner.com/XX">RSS</a></li>
                  <li class="icon twitter"><a href="http://twitter.com/recology_">Twitter</a></li>
                  <li class="icon"><a href="/subscribe">More</a></li>
                </ul>
              </nav>
            </aside>

          </section>

          <section id="meta-col2" class="meta group">

            <aside id="bio">
              <header>
                <h3>The Author</h3>
              </header>
              <p>
              My name is Scott Chamberlain. I am a researcher in ecology and evolution.
              </p>
            </aside>

            <aside>
              <nav id="extra">
                <ul>
                  <li><a href="/colophon">Colophon</a></li>
                  <li><a href="/contact">Contact</a></li>
                </ul>
              </nav>
            </aside>

          </section>

        </section>

      </section>

      <section id="footer" class="group">
        <footer class="group">
          <nav id="site">
            <ul>
              <li><a href="/">Home</a></li>
              <li><a href="/about">About</a></li>
              <li><a href="/contact">Contact</a></li>
              <li><a href="/subscribe">Subscribe</a></li>
              <li><a href="/colophon">Colophon</a></li>
            </ul>
          </nav>
          <p class="copyright">
            &copy;2011 &ndash; Scott Chamberlain
          </p>
        </footer>
      </section>

    </section>

    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-23094691-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>

  </body>
</html>
