<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
  <link href="http://gmpg.org/xfn/11" rel="profile">

  <title>
    
    Recology, R/etc.
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/hyde.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Open+Sans:300,400italic,400,600,700|Abril+Fatface">

  <link rel="stylesheet" href="/public/css/bootstrap/css/bootstrap.css">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/favicon.ico">
  <link rel="shortcut icon" href="/public/favicon.ico">
  <link href="//netdna.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.css" rel="stylesheet">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>


  <body class="theme-base-0f layout-reverse">

    <header class="masthead">
      <div class="masthead-inner">
        <h1>Recology</h1>
        <!-- <h1> <a href="http://recology.info/">Recology</a></h1> -->
        <p class="lead">R/etc.</p>

        <div class="colophon">
          <ul class="colophon-links">
            <li>
              <a href="/"><i class="fa fa-home fa-lg"></i></a>&nbsp;
              <a href="/about"><i class="fa fa-info-circle fa-lg"></i></a>&nbsp;
              <a href="/archives"><i class="fa fa-archive fa-lg"></i></a>&nbsp;
              <a href="/rresources"><i class="fa fa-book fa-lg"></i></a>&nbsp;
              <a href="http://rforcats.net/" rel><i class="fa fa-graduation-cap fa-lg"></i></a>&nbsp;
              <a href="/feed.xml"><i class="fa fa-rss fa-lg"></i></a>&nbsp;
              <a href="https://twitter.com/sckottie"><i class="fa fa-twitter fa-lg"></i></a>&nbsp;
              <a href="/fork"><i class="fa fa-spinner fa-lg"></i></a>
            </li>
          </ul>
          <!-- <small><a href="https://github.com/mdo/hyde">Hyde</a> from <a href="https://twitter.com/mdo" target="_blank">@mdo</a>.</small> -->
        </div>
      </div>
    </header>

    <div class="content container">
      <div class="posts">
  <a style="float:right;" href="/archives" data-toggle="tooltip" data-placement="bottom" title="Archives"><i class="fa fa-archive fa-lg"></i></a>
  <a style="float:right;" href="/tags"><i class="fa fa-tags fa-lg"></i></a>&nbsp;
  
  <div class="post">
    <h1>
      <a href="/2015/12/binomen-taxonomy-tools/">
        binomen - Tools for slicing and dicing taxonomic names
      </a>
    </h1>

    <span class="post-date">08 Dec 2015</span>

    <p>The first version of <code>binomen</code> is now up on [CRAN][binomecran]. It provides various taxonomic classes for defining a single taxon, multiple taxa, and a taxonomic data.frame. It is designed as a companion to <a href="https://github.com/ropensci/taxize">taxize</a>, where you can get taxonomic data on taxonomic names from the web.</p>

<p>The classes (S3):</p>

<ul>
<li><code>taxon</code></li>
<li><code>taxonref</code></li>
<li><code>taxonrefs</code></li>
<li><code>binomial</code></li>
<li><code>grouping</code> (i.e., classification - used different term to avoid conflict with classification in <code>taxize</code>)</li>
</ul>

<p>For example, the <code>binomial</code> class is defined by a genus, epithet, authority, and optional full species name and canonical version.</p>
<div class="highlight"><pre><code class="language-r" data-lang="r">binomial<span class="p">(</span><span class="s">&quot;Poa&quot;</span><span class="p">,</span> <span class="s">&quot;annua&quot;</span><span class="p">,</span> authority<span class="o">=</span><span class="s">&quot;L.&quot;</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre><code class="language-r" data-lang="r"><span class="o">&lt;</span>binomial<span class="o">&gt;</span>
  genus<span class="o">:</span> Poa
  epithet<span class="o">:</span> annua
  canonical<span class="o">:</span>
  species<span class="o">:</span>
  authority<span class="o">:</span> L.
</code></pre></div>
<p>The package has a suite of functions to work on these taxonomic classes:</p>

<ul>
<li><code>gethier()</code> - get hierarchy from a <code>taxon</code> class</li>
<li><code>scatter()</code> - make each row in taxonomic data.frame (<code>taxondf</code>) a separate <code>taxon</code> object within a single <code>taxa</code> object</li>
<li><code>assemble()</code> - make a <code>taxa</code> object into a <code>taxondf</code> data.frame</li>
<li><code>pick()</code> - pick out one or more taxonomic groups</li>
<li><code>pop()</code> - pop out (drop) one or more taxonomic groups</li>
<li><code>span()</code> - pick a range between two taxonomic groups (inclusive)</li>
<li><code>strain()</code> - filter by taxonomic groups, like dplyr&#39;s filter</li>
<li><code>name()</code> - get the taxon name for each <code>taxonref</code> object</li>
<li><code>uri()</code> - get the reference uri for each <code>taxonref</code> object</li>
<li><code>rank()</code> - get the taxonomic rank for each <code>taxonref</code> object</li>
<li><code>id()</code> - get the reference uri for each <code>taxonref</code> object</li>
</ul>

<p>The approach in this package I suppose is sort of like <code>split-apply-combine</code> from <code>plyr</code>/<code>dplyr</code>, whereas this is aims to make it easy to do with taxonomic names.</p>

<h2>Install</h2>

<p>For examples below, you&#39;ll need the development version:</p>
<div class="highlight"><pre><code class="language-r" data-lang="r">install.packages<span class="p">(</span><span class="s">&quot;binomen&quot;</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre><code class="language-r" data-lang="r"><span class="kn">library</span><span class="p">(</span><span class="s">&quot;binomen&quot;</span><span class="p">)</span>
</code></pre></div>
<h2>Make a taxon</h2>

<p>Make a taxon object</p>
<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="p">(</span>obj <span class="o">&lt;-</span> make_taxon<span class="p">(</span>genus<span class="o">=</span><span class="s">&quot;Poa&quot;</span><span class="p">,</span> epithet<span class="o">=</span><span class="s">&quot;annua&quot;</span><span class="p">,</span> authority<span class="o">=</span><span class="s">&quot;L.&quot;</span><span class="p">,</span>
  family<span class="o">=</span><span class="s">&#39;Poaceae&#39;</span><span class="p">,</span> clazz<span class="o">=</span><span class="s">&#39;Poales&#39;</span><span class="p">,</span> kingdom<span class="o">=</span><span class="s">&#39;Plantae&#39;</span><span class="p">,</span> variety<span class="o">=</span><span class="s">&#39;annua&#39;</span><span class="p">))</span>
<span class="c1">#&gt; &lt;taxon&gt;</span>
<span class="c1">#&gt;   binomial: Poa annua</span>
<span class="c1">#&gt;   grouping: </span>
<span class="c1">#&gt;     kingdom: Plantae</span>
<span class="c1">#&gt;     clazz: Poales</span>
<span class="c1">#&gt;     family: Poaceae</span>
<span class="c1">#&gt;     genus: Poa</span>
<span class="c1">#&gt;     species: Poa annua</span>
<span class="c1">#&gt;     variety: annua</span>
</code></pre></div>
<p>Index to various parts of the object</p>

<p>The binomial</p>
<div class="highlight"><pre><code class="language-r" data-lang="r">obj<span class="o">$</span>binomial
<span class="c1">#&gt; &lt;binomial&gt;</span>
<span class="c1">#&gt;   genus: Poa</span>
<span class="c1">#&gt;   epithet: annua</span>
<span class="c1">#&gt;   canonical: Poa annua</span>
<span class="c1">#&gt;   species: Poa annua L.</span>
<span class="c1">#&gt;   authority: L.</span>
</code></pre></div>
<p>The authority</p>
<div class="highlight"><pre><code class="language-r" data-lang="r">obj<span class="o">$</span>binomial<span class="o">$</span>authority
<span class="c1">#&gt; [1] &quot;L.&quot;</span>
</code></pre></div>
<p>The classification</p>
<div class="highlight"><pre><code class="language-r" data-lang="r">obj<span class="o">$</span>grouping
<span class="c1">#&gt; &lt;grouping&gt;</span>
<span class="c1">#&gt;   kingdom: Plantae</span>
<span class="c1">#&gt;   clazz: Poales</span>
<span class="c1">#&gt;   family: Poaceae</span>
<span class="c1">#&gt;   genus: Poa</span>
<span class="c1">#&gt;   species: Poa annua</span>
<span class="c1">#&gt;   variety: annua</span>
</code></pre></div>
<p>The family</p>
<div class="highlight"><pre><code class="language-r" data-lang="r">obj<span class="o">$</span>grouping<span class="o">$</span>family
<span class="c1">#&gt; &lt;taxonref&gt;</span>
<span class="c1">#&gt;   rank: family</span>
<span class="c1">#&gt;   name: Poaceae</span>
<span class="c1">#&gt;   id: none</span>
<span class="c1">#&gt;   uri: none</span>
</code></pre></div>
<h2>Subset taxon objects</h2>

<p>Get one or more ranks via <code>pick()</code></p>
<div class="highlight"><pre><code class="language-r" data-lang="r">obj <span class="o">%&gt;%</span> pick<span class="p">(</span>family<span class="p">)</span>
<span class="c1">#&gt; &lt;taxon&gt;</span>
<span class="c1">#&gt;   binomial: Poa annua</span>
<span class="c1">#&gt;   grouping: </span>
<span class="c1">#&gt;     family: Poaceae</span>
obj <span class="o">%&gt;%</span> pick<span class="p">(</span>family<span class="p">,</span> genus<span class="p">)</span>
<span class="c1">#&gt; &lt;taxon&gt;</span>
<span class="c1">#&gt;   binomial: Poa annua</span>
<span class="c1">#&gt;   grouping: </span>
<span class="c1">#&gt;     family: Poaceae</span>
<span class="c1">#&gt;     genus: Poa</span>
</code></pre></div>
<p>Drop one or more ranks via <code>pop()</code></p>
<div class="highlight"><pre><code class="language-r" data-lang="r">obj <span class="o">%&gt;%</span> pop<span class="p">(</span>family<span class="p">)</span>
<span class="c1">#&gt; &lt;taxon&gt;</span>
<span class="c1">#&gt;   binomial: Poa annua</span>
<span class="c1">#&gt;   grouping: </span>
<span class="c1">#&gt;     kingdom: Plantae</span>
<span class="c1">#&gt;     clazz: Poales</span>
<span class="c1">#&gt;     genus: Poa</span>
<span class="c1">#&gt;     species: Poa annua</span>
<span class="c1">#&gt;     variety: annua</span>
obj <span class="o">%&gt;%</span> pop<span class="p">(</span>family<span class="p">,</span> genus<span class="p">)</span>
<span class="c1">#&gt; &lt;taxon&gt;</span>
<span class="c1">#&gt;   binomial: Poa annua</span>
<span class="c1">#&gt;   grouping: </span>
<span class="c1">#&gt;     kingdom: Plantae</span>
<span class="c1">#&gt;     clazz: Poales</span>
<span class="c1">#&gt;     species: Poa annua</span>
<span class="c1">#&gt;     variety: annua</span>
</code></pre></div>
<p>Get a range of ranks via <code>span()</code></p>
<div class="highlight"><pre><code class="language-r" data-lang="r">obj <span class="o">%&gt;%</span> span<span class="p">(</span>kingdom<span class="p">,</span> family<span class="p">)</span>
<span class="c1">#&gt; &lt;taxon&gt;</span>
<span class="c1">#&gt;   binomial: Poa annua</span>
<span class="c1">#&gt;   grouping: </span>
<span class="c1">#&gt;     kingdom: Plantae</span>
<span class="c1">#&gt;     clazz: Poales</span>
<span class="c1">#&gt;     family: Poaceae</span>
</code></pre></div>
<p>Extract classification as a <code>data.frame</code></p>
<div class="highlight"><pre><code class="language-r" data-lang="r">gethier<span class="p">(</span>obj<span class="p">)</span>
<span class="c1">#&gt;      rank      name</span>
<span class="c1">#&gt; 1 kingdom   Plantae</span>
<span class="c1">#&gt; 2   clazz    Poales</span>
<span class="c1">#&gt; 3  family   Poaceae</span>
<span class="c1">#&gt; 4   genus       Poa</span>
<span class="c1">#&gt; 5 species Poa annua</span>
<span class="c1">#&gt; 6 variety     annua</span>
</code></pre></div>
<h2>Taxonomic data.frame&#39;s</h2>

<p>Make one</p>
<div class="highlight"><pre><code class="language-r" data-lang="r">df <span class="o">&lt;-</span> <span class="kt">data.frame</span><span class="p">(</span>order <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&#39;Asterales&#39;</span><span class="p">,</span><span class="s">&#39;Asterales&#39;</span><span class="p">,</span><span class="s">&#39;Fagales&#39;</span><span class="p">,</span><span class="s">&#39;Poales&#39;</span><span class="p">,</span><span class="s">&#39;Poales&#39;</span><span class="p">,</span><span class="s">&#39;Poales&#39;</span><span class="p">),</span>
  family <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&#39;Asteraceae&#39;</span><span class="p">,</span><span class="s">&#39;Asteraceae&#39;</span><span class="p">,</span><span class="s">&#39;Fagaceae&#39;</span><span class="p">,</span><span class="s">&#39;Poaceae&#39;</span><span class="p">,</span><span class="s">&#39;Poaceae&#39;</span><span class="p">,</span><span class="s">&#39;Poaceae&#39;</span><span class="p">),</span>
  genus <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&#39;Helianthus&#39;</span><span class="p">,</span><span class="s">&#39;Helianthus&#39;</span><span class="p">,</span><span class="s">&#39;Quercus&#39;</span><span class="p">,</span><span class="s">&#39;Poa&#39;</span><span class="p">,</span><span class="s">&#39;Festuca&#39;</span><span class="p">,</span><span class="s">&#39;Holodiscus&#39;</span><span class="p">),</span>
  stringsAsFactors <span class="o">=</span> <span class="kc">FALSE</span><span class="p">)</span>
<span class="p">(</span>df2 <span class="o">&lt;-</span> taxon_df<span class="p">(</span>df<span class="p">))</span>
<span class="c1">#&gt;       order     family      genus</span>
<span class="c1">#&gt; 1 Asterales Asteraceae Helianthus</span>
<span class="c1">#&gt; 2 Asterales Asteraceae Helianthus</span>
<span class="c1">#&gt; 3   Fagales   Fagaceae    Quercus</span>
<span class="c1">#&gt; 4    Poales    Poaceae        Poa</span>
<span class="c1">#&gt; 5    Poales    Poaceae    Festuca</span>
<span class="c1">#&gt; 6    Poales    Poaceae Holodiscus</span>
</code></pre></div>
<p>Parse - get rank order via <code>pick()</code></p>
<div class="highlight"><pre><code class="language-r" data-lang="r">df2 <span class="o">%&gt;%</span> pick<span class="p">(</span><span class="kp">order</span><span class="p">)</span>
<span class="c1">#&gt;       order</span>
<span class="c1">#&gt; 1 Asterales</span>
<span class="c1">#&gt; 2 Asterales</span>
<span class="c1">#&gt; 3   Fagales</span>
<span class="c1">#&gt; 4    Poales</span>
<span class="c1">#&gt; 5    Poales</span>
<span class="c1">#&gt; 6    Poales</span>
</code></pre></div>
<p>get ranks order, family, and genus via <code>pick()</code></p>
<div class="highlight"><pre><code class="language-r" data-lang="r">df2 <span class="o">%&gt;%</span> pick<span class="p">(</span><span class="kp">order</span><span class="p">,</span> family<span class="p">,</span> genus<span class="p">)</span>
<span class="c1">#&gt;       order     family      genus</span>
<span class="c1">#&gt; 1 Asterales Asteraceae Helianthus</span>
<span class="c1">#&gt; 2 Asterales Asteraceae Helianthus</span>
<span class="c1">#&gt; 3   Fagales   Fagaceae    Quercus</span>
<span class="c1">#&gt; 4    Poales    Poaceae        Poa</span>
<span class="c1">#&gt; 5    Poales    Poaceae    Festuca</span>
<span class="c1">#&gt; 6    Poales    Poaceae Holodiscus</span>
</code></pre></div>
<p>get range of names via <code>span()</code>, from rank <code>X</code> to rank <code>Y</code></p>
<div class="highlight"><pre><code class="language-r" data-lang="r">df2 <span class="o">%&gt;%</span> span<span class="p">(</span>family<span class="p">,</span> genus<span class="p">)</span>
<span class="c1">#&gt;       family      genus</span>
<span class="c1">#&gt; 1 Asteraceae Helianthus</span>
<span class="c1">#&gt; 2 Asteraceae Helianthus</span>
<span class="c1">#&gt; 3   Fagaceae    Quercus</span>
<span class="c1">#&gt; 4    Poaceae        Poa</span>
<span class="c1">#&gt; 5    Poaceae    Festuca</span>
<span class="c1">#&gt; 6    Poaceae Holodiscus</span>
</code></pre></div>
<p>Separate each row into a <code>taxon</code> class (many <code>taxon</code> objects are a <code>taxa</code> class)</p>
<div class="highlight"><pre><code class="language-r" data-lang="r">scatter<span class="p">(</span>df2<span class="p">)</span>
<span class="c1">#&gt; [[1]]</span>
<span class="c1">#&gt; &lt;taxon&gt;</span>
<span class="c1">#&gt;   binomial: Helianthus none</span>
<span class="c1">#&gt;   grouping: </span>
<span class="c1">#&gt;     order: Asterales</span>
<span class="c1">#&gt;     family: Asteraceae</span>
<span class="c1">#&gt;     genus: Helianthus</span>
<span class="c1">#&gt;     species: Helianthus none</span>
<span class="c1">#&gt; </span>
<span class="c1">#&gt; [[2]]</span>
<span class="c1">#&gt; &lt;taxon&gt;</span>
<span class="c1">#&gt;   binomial: Helianthus none</span>
<span class="c1">#&gt;   grouping: </span>
<span class="c1">#&gt;     order: Asterales</span>
<span class="c1">#&gt;     family: Asteraceae</span>
<span class="c1">#&gt;     genus: Helianthus</span>
<span class="c1">#&gt;     species: Helianthus none</span>
<span class="c1">#&gt; </span>
<span class="c1">#&gt; [[3]]</span>
<span class="c1">#&gt; &lt;taxon&gt;</span>
<span class="c1">#&gt;   binomial: Quercus none</span>
<span class="c1">#&gt;   grouping: </span>
<span class="c1">#&gt;     order: Fagales</span>
<span class="c1">#&gt;     family: Fagaceae</span>
<span class="c1">#&gt;     genus: Quercus</span>
<span class="c1">#&gt;     species: Quercus none</span>
<span class="c1">#&gt; </span>
<span class="c1">#&gt; [[4]]</span>
<span class="c1">#&gt; &lt;taxon&gt;</span>
<span class="c1">#&gt;   binomial: Poa none</span>
<span class="c1">#&gt;   grouping: </span>
<span class="c1">#&gt;     order: Poales</span>
<span class="c1">#&gt;     family: Poaceae</span>
<span class="c1">#&gt;     genus: Poa</span>
<span class="c1">#&gt;     species: Poa none</span>
<span class="c1">#&gt; </span>
<span class="c1">#&gt; [[5]]</span>
<span class="c1">#&gt; &lt;taxon&gt;</span>
<span class="c1">#&gt;   binomial: Festuca none</span>
<span class="c1">#&gt;   grouping: </span>
<span class="c1">#&gt;     order: Poales</span>
<span class="c1">#&gt;     family: Poaceae</span>
<span class="c1">#&gt;     genus: Festuca</span>
<span class="c1">#&gt;     species: Festuca none</span>
<span class="c1">#&gt; </span>
<span class="c1">#&gt; [[6]]</span>
<span class="c1">#&gt; &lt;taxon&gt;</span>
<span class="c1">#&gt;   binomial: Holodiscus none</span>
<span class="c1">#&gt;   grouping: </span>
<span class="c1">#&gt;     order: Poales</span>
<span class="c1">#&gt;     family: Poaceae</span>
<span class="c1">#&gt;     genus: Holodiscus</span>
<span class="c1">#&gt;     species: Holodiscus none</span>
<span class="c1">#&gt; </span>
<span class="c1">#&gt; attr(,&quot;class&quot;)</span>
<span class="c1">#&gt; [1] &quot;taxa&quot;</span>
</code></pre></div>
<p>And you can re-assemble a data.frame from the output of <code>scatter()</code> with <code>assemble()</code></p>
<div class="highlight"><pre><code class="language-r" data-lang="r">out <span class="o">&lt;-</span> scatter<span class="p">(</span>df2<span class="p">)</span>
assemble<span class="p">(</span>out<span class="p">)</span>
<span class="c1">#&gt;       order     family      genus         species</span>
<span class="c1">#&gt; 1 Asterales Asteraceae Helianthus Helianthus none</span>
<span class="c1">#&gt; 2 Asterales Asteraceae Helianthus Helianthus none</span>
<span class="c1">#&gt; 3   Fagales   Fagaceae    Quercus    Quercus none</span>
<span class="c1">#&gt; 4    Poales    Poaceae        Poa        Poa none</span>
<span class="c1">#&gt; 5    Poales    Poaceae    Festuca    Festuca none</span>
<span class="c1">#&gt; 6    Poales    Poaceae Holodiscus Holodiscus none</span>
</code></pre></div>
  </div>
  
  <div class="post">
    <h1>
      <a href="/2015/11/crossref-clients/">
        Crossref programmatic clients
      </a>
    </h1>

    <span class="post-date">30 Nov 2015</span>

    <p>I gave two talks recently at the annual <a href="http://www.crossref.org/annualmeeting/agenda.html">Crossref meeting</a>, one of which was a somewhat technical overview of programmatic clients for Crossref APIs. Check out the talk <a href="https://crossref.wistia.com/medias/8rh0jm5eda">here</a>. I talked about the motivation for working with Crossref data by writing code/etc. rather than going the GUI route, then went over the various clients, with brief examples.</p>

<p>We (rOpenSci) have been working on the R client <a href="https://github.com/ropensci/rcrossref">rcrossref</a> for a while now, but I&#39;m also working on the Python and Ruby clients for Crossref. In addition, the Ruby client has a CLI client inside. The Javascript client is worked on independently by <a href="https://science.ai/">ScienceAI</a>.</p>

<p>The R, Ruby, and Python clients are useable but not feature complete yet, and would benefit from lots of users surfacing bugs and highlighting nice to have features.</p>

<p>The main Crossref API used in all the clients is documented at <a href="https://github.com/CrossRef/rest-api-doc/blob/master/rest_api.md">api.crossref.org</a>.</p>

<p>I&#39;ve tried to make the APIs similar-ish across clients. Functions in each client match the main Crossref search API (api.crossref.org) routes:</p>

<ul>
<li><code>/works</code></li>
<li><code>/members</code></li>
<li><code>/funders</code></li>
<li><code>/journals</code></li>
<li><code>/types</code></li>
<li><code>/licenses</code></li>
</ul>

<p>Other methods in all three clients:</p>

<ul>
<li>Get DOI minting agency

<ul>
<li>Uses api.crossref.org API</li>
</ul></li>
<li>Get random DOIs

<ul>
<li>Uses api.crossref.org API</li>
</ul></li>
<li>Content negotiation

<ul>
<li>Documented at <a href="http://www.crosscite.org/cn">http://www.crosscite.org/cn</a></li>
</ul></li>
<li>Get full text

<ul>
<li>other clients in each language will focus on this use case</li>
</ul></li>
<li>Get citation count

<ul>
<li>Uses service at <a href="http://www.crossref.org/openurl">http://www.crossref.org/openurl</a> - though this functionality may be in the api.crossref.org API at some point</li>
</ul></li>
</ul>

<p>The following shows how to install, and then examples from each client for a few use cases.</p>

<h2>Installation</h2>

<h3>Python</h3>
<div class="highlight"><pre><code class="language-sh" data-lang="sh">pip install habanero
</code></pre></div>
<h3>Ruby</h3>
<div class="highlight"><pre><code class="language-sh" data-lang="sh">gem install serrano
</code></pre></div>
<h3>R</h3>

<p>Inside R:</p>
<div class="highlight"><pre><code class="language-R" data-lang="R">install.packages<span class="p">(</span><span class="s">&quot;rcrossref&quot;</span><span class="p">)</span>
</code></pre></div>
<h3>Javascript</h3>
<div class="highlight"><pre><code class="language-sh" data-lang="sh">npm install crossref
</code></pre></div>
<p>I won&#39;t do any examples with the js library, as I don&#39;t maintain it.</p>

<h2>Use case: get ORCID IDs for authors</h2>

<p>Python</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">habanero</span> <span class="kn">import</span> <span class="n">Crossref</span>
<span class="n">cr</span> <span class="o">=</span> <span class="n">Crossref</span><span class="p">()</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">cr</span><span class="o">.</span><span class="n">works</span><span class="p">(</span><span class="nb">filter</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;has_orcid&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">},</span> <span class="n">limit</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">res2</span> <span class="o">=</span> <span class="p">[</span> <span class="p">[</span> <span class="n">z</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;ORCID&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">z</span> <span class="ow">in</span> <span class="n">x</span><span class="p">[</span><span class="s">&#39;author&#39;</span><span class="p">]</span> <span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">res</span><span class="o">.</span><span class="n">result</span><span class="p">[</span><span class="s">&#39;message&#39;</span><span class="p">][</span><span class="s">&#39;items&#39;</span><span class="p">]</span> <span class="p">]</span>
<span class="nb">filter</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="nb">reduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="p">,</span> <span class="n">res2</span><span class="p">))</span>
</code></pre></div><div class="highlight"><pre><code class="language-python" data-lang="python"><span class="p">[</span><span class="s">u&#39;http://orcid.org/0000-0003-4087-8021&#39;</span><span class="p">,</span>
 <span class="s">u&#39;http://orcid.org/0000-0002-2076-5452&#39;</span><span class="p">,</span>
 <span class="s">u&#39;http://orcid.org/0000-0003-4087-8021&#39;</span><span class="p">,</span>
 <span class="s">u&#39;http://orcid.org/0000-0002-2076-5452&#39;</span><span class="p">,</span>
 <span class="s">u&#39;http://orcid.org/0000-0003-1710-1580&#39;</span><span class="p">,</span>
 <span class="s">u&#39;http://orcid.org/0000-0003-1710-1580&#39;</span><span class="p">,</span>
 <span class="s">u&#39;http://orcid.org/0000-0003-4637-238X&#39;</span><span class="p">,</span>
 <span class="s">u&#39;http://orcid.org/0000-0003-4637-238X&#39;</span><span class="p">,</span>
 <span class="s">u&#39;http://orcid.org/0000-0003-4637-238X&#39;</span><span class="p">,</span>
 <span class="s">u&#39;http://orcid.org/0000-0003-4637-238X&#39;</span><span class="p">,</span>
 <span class="s">u&#39;http://orcid.org/0000-0003-4637-238X&#39;</span><span class="p">,</span>
 <span class="s">u&#39;http://orcid.org/0000-0003-2510-4271&#39;</span><span class="p">]</span>
</code></pre></div>
<p>Ruby</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="nb">require</span> <span class="s1">&#39;serrano&#39;</span>
<span class="n">res</span> <span class="o">=</span> <span class="no">Serrano</span><span class="o">.</span><span class="n">works</span><span class="p">(</span><span class="ss">filter</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;has_orcid&#39;</span><span class="p">:</span> <span class="kp">true</span><span class="p">},</span> <span class="ss">limit</span><span class="p">:</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">res2</span> <span class="o">=</span> <span class="n">res</span><span class="o">[</span><span class="s1">&#39;message&#39;</span><span class="o">][</span><span class="s1">&#39;items&#39;</span><span class="o">].</span><span class="n">collect</span> <span class="p">{</span> <span class="o">|</span><span class="n">x</span><span class="o">|</span> <span class="n">x</span><span class="o">[</span><span class="s1">&#39;author&#39;</span><span class="o">].</span><span class="n">collect</span> <span class="p">{</span> <span class="o">|</span><span class="n">z</span><span class="o">|</span> <span class="n">z</span><span class="o">[</span><span class="s1">&#39;ORCID&#39;</span><span class="o">]</span> <span class="p">}</span> <span class="p">}</span>
<span class="n">res2</span><span class="o">.</span><span class="n">flatten</span><span class="o">.</span><span class="n">compact</span>
</code></pre></div><div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">=&gt;</span> <span class="o">[</span><span class="s2">&quot;http://orcid.org/0000-0003-4087-8021&quot;</span><span class="p">,</span>
 <span class="s2">&quot;http://orcid.org/0000-0002-2076-5452&quot;</span><span class="p">,</span>
 <span class="s2">&quot;http://orcid.org/0000-0003-4087-8021&quot;</span><span class="p">,</span>
 <span class="s2">&quot;http://orcid.org/0000-0002-2076-5452&quot;</span><span class="p">,</span>
 <span class="s2">&quot;http://orcid.org/0000-0003-1710-1580&quot;</span><span class="p">,</span>
 <span class="s2">&quot;http://orcid.org/0000-0003-1710-1580&quot;</span><span class="p">,</span>
 <span class="s2">&quot;http://orcid.org/0000-0003-4637-238X&quot;</span><span class="p">,</span>
 <span class="s2">&quot;http://orcid.org/0000-0003-4637-238X&quot;</span><span class="p">,</span>
 <span class="s2">&quot;http://orcid.org/0000-0003-4637-238X&quot;</span><span class="p">,</span>
 <span class="s2">&quot;http://orcid.org/0000-0003-4637-238X&quot;</span><span class="p">,</span>
 <span class="s2">&quot;http://orcid.org/0000-0003-4637-238X&quot;</span><span class="p">,</span>
 <span class="s2">&quot;http://orcid.org/0000-0003-2510-4271&quot;</span><span class="o">]</span>
</code></pre></div>
<p>R</p>
<div class="highlight"><pre><code class="language-R" data-lang="R"><span class="kn">library</span><span class="p">(</span><span class="s">&quot;rcrossref&quot;</span><span class="p">)</span>
res <span class="o">&lt;-</span> cr_works<span class="p">(</span>filter<span class="o">=</span><span class="kt">c</span><span class="p">(</span>has_orcid<span class="o">=</span><span class="kc">TRUE</span><span class="p">),</span> limit <span class="o">=</span> <span class="m">10</span><span class="p">)</span>
orcids <span class="o">&lt;-</span> <span class="kp">unlist</span><span class="p">(</span><span class="kp">lapply</span><span class="p">(</span>res<span class="o">$</span>data<span class="o">$</span>author<span class="p">,</span> <span class="kr">function</span><span class="p">(</span>z<span class="p">)</span> z<span class="o">$</span>ORCID<span class="p">))</span>
<span class="kp">Filter</span><span class="p">(</span><span class="kr">function</span><span class="p">(</span>x<span class="p">)</span> <span class="o">!</span><span class="kp">is.na</span><span class="p">(</span>x<span class="p">),</span> orcids<span class="p">)</span>
</code></pre></div><div class="highlight"><pre><code class="language-R" data-lang="R"> <span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="s">&quot;http://orcid.org/0000-0003-4087-8021&quot;</span>
 <span class="p">[</span><span class="m">2</span><span class="p">]</span> <span class="s">&quot;http://orcid.org/0000-0002-2076-5452&quot;</span>
 <span class="p">[</span><span class="m">3</span><span class="p">]</span> <span class="s">&quot;http://orcid.org/0000-0003-4087-8021&quot;</span>
 <span class="p">[</span><span class="m">4</span><span class="p">]</span> <span class="s">&quot;http://orcid.org/0000-0002-2076-5452&quot;</span>
 <span class="p">[</span><span class="m">5</span><span class="p">]</span> <span class="s">&quot;http://orcid.org/0000-0003-1710-1580&quot;</span>
 <span class="p">[</span><span class="m">6</span><span class="p">]</span> <span class="s">&quot;http://orcid.org/0000-0003-1710-1580&quot;</span>
 <span class="p">[</span><span class="m">7</span><span class="p">]</span> <span class="s">&quot;http://orcid.org/0000-0003-4637-238X&quot;</span>
 <span class="p">[</span><span class="m">8</span><span class="p">]</span> <span class="s">&quot;http://orcid.org/0000-0003-4637-238X&quot;</span>
 <span class="p">[</span><span class="m">9</span><span class="p">]</span> <span class="s">&quot;http://orcid.org/0000-0003-4637-238X&quot;</span>
<span class="p">[</span><span class="m">10</span><span class="p">]</span> <span class="s">&quot;http://orcid.org/0000-0003-4637-238X&quot;</span>
<span class="p">[</span><span class="m">11</span><span class="p">]</span> <span class="s">&quot;http://orcid.org/0000-0003-4637-238X&quot;</span>
<span class="p">[</span><span class="m">12</span><span class="p">]</span> <span class="s">&quot;http://orcid.org/0000-0003-2510-4271&quot;</span>
</code></pre></div>
<p>CLI</p>
<div class="highlight"><pre><code class="language-sh" data-lang="sh">serrano works --filter<span class="o">=</span>has_orcid:true --json --limit<span class="o">=</span><span class="m">12</span> <span class="p">|</span> jq <span class="s1">&#39;.message.items[].author[].ORCID | select(. != null)&#39;</span>
</code></pre></div><div class="highlight"><pre><code class="language-sh" data-lang="sh"><span class="s2">&quot;http://orcid.org/0000-0003-4087-8021&quot;</span>
<span class="s2">&quot;http://orcid.org/0000-0002-2076-5452&quot;</span>
<span class="s2">&quot;http://orcid.org/0000-0003-4087-8021&quot;</span>
<span class="s2">&quot;http://orcid.org/0000-0002-2076-5452&quot;</span>
<span class="s2">&quot;http://orcid.org/0000-0003-1710-1580&quot;</span>
<span class="s2">&quot;http://orcid.org/0000-0003-1710-1580&quot;</span>
<span class="s2">&quot;http://orcid.org/0000-0003-4637-238X&quot;</span>
<span class="s2">&quot;http://orcid.org/0000-0003-4637-238X&quot;</span>
<span class="s2">&quot;http://orcid.org/0000-0003-4637-238X&quot;</span>
<span class="s2">&quot;http://orcid.org/0000-0003-4637-238X&quot;</span>
<span class="s2">&quot;http://orcid.org/0000-0003-4637-238X&quot;</span>
<span class="s2">&quot;http://orcid.org/0000-0003-2510-4271&quot;</span>
<span class="s2">&quot;http://orcid.org/0000-0001-9408-8207&quot;</span>
<span class="s2">&quot;http://orcid.org/0000-0002-2076-5452&quot;</span>
</code></pre></div>
<h2>Use case: content negotation</h2>

<p>Python</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">habanero</span> <span class="kn">import</span> <span class="n">cn</span>
<span class="n">cn</span><span class="o">.</span><span class="n">content_negotiation</span><span class="p">(</span><span class="n">ids</span> <span class="o">=</span> <span class="s">&#39;10.1126/science.169.3946.635&#39;</span><span class="p">,</span> <span class="n">format</span> <span class="o">=</span> <span class="s">&quot;text&quot;</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre><code class="language-python" data-lang="python"><span class="s">u&#39;Frank, H. S. (1970). The Structure of Ordinary Water: New data and interpretations are yielding new insights into this fascinating substance. Science, 169(3946), 635</span><span class="se">\xe2\x80\x93</span><span class="s">641. doi:10.1126/science.169.3946.635</span><span class="se">\n</span><span class="s">&#39;</span>
</code></pre></div>
<p>Ruby</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="nb">require</span> <span class="s1">&#39;serrano&#39;</span>
<span class="no">Serrano</span><span class="o">.</span><span class="n">content_negotiation</span><span class="p">(</span><span class="ss">ids</span><span class="p">:</span> <span class="s1">&#39;10.1126/science.169.3946.635&#39;</span><span class="p">,</span> <span class="nb">format</span><span class="p">:</span> <span class="s2">&quot;text&quot;</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">=&gt;</span> <span class="o">[</span><span class="s2">&quot;Frank, H. S. (1970). The Structure of Ordinary Water: New data and interpretations are yielding new insights into this fascinating substance. Science, 169(3946), 635</span><span class="se">\xE2\x80\x93</span><span class="s2">641. doi:10.1126/science.169.3946.635</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">]</span>
</code></pre></div>
<p>R</p>
<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="kn">library</span><span class="p">(</span><span class="s">&quot;rcrossref&quot;</span><span class="p">)</span>
cr_cn<span class="p">(</span>dois<span class="o">=</span><span class="s">&quot;10.1126/science.169.3946.635&quot;</span><span class="p">,</span> <span class="s">&quot;text&quot;</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre><code class="language-r" data-lang="r"><span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="s">&quot;Frank, H. S. (1970). The Structure of Ordinary Water: New data and interpretations are yielding new insights into this fascinating substance. Science, 169(3946), 635–641. doi:10.1126/science.169.3946.635&quot;</span>
</code></pre></div>
<p>CLI</p>
<div class="highlight"><pre><code class="language-sh" data-lang="sh">serrano contneg 10.1890/13-0590.1 --format<span class="o">=</span>text
</code></pre></div><div class="highlight"><pre><code class="language-sh" data-lang="sh">Murtaugh, P. A. <span class="o">(</span>2014<span class="o">)</span>.  In defense of P values . Ecology, 95<span class="o">(</span>3<span class="o">)</span>, 611–617. doi:10.1890/13-0590.1
</code></pre></div>
<h2>More</h2>

<p>There are definitely issues with data in the Crossref search API, some of which I cover in my talks. However, it is still the best place to go for scholarly metadata.</p>

<p>Let us know of other use cases - there are others not covered here for brevity sake.</p>

<p>There are lots of examples in the docs for each client. If you can think of any doc improvements file an issue.</p>

<p>If you find any bugs, please do file an issue.</p>

  </div>
  
  <div class="post">
    <h1>
      <a href="/2015/11/pygbif/">
        pygbif - GBIF client for Python
      </a>
    </h1>

    <span class="post-date">12 Nov 2015</span>

    <p>I maintain an R client for the GBIF API, at <a href="https://github.com/ropensci/rgbif">rgbif</a>. Been working on it for a few years, and recently been thinking that there should be a nice low level client for Python as well. I didn&#39;t see one searching Github, etc. so I started working on one recently: <a href="https://github.com/sckott/pygbif">pygbif</a></p>

<p>It&#39;s up on <a href="https://pypi.python.org/pypi/pygbif/0.1.1">pypi</a>.</p>

<p>There&#39;s not much in <code>pygbif</code> yet - I wanted to get something up to start getting some users to more quickly make the library useful to people.</p>

<p>There&#39;s three modules, with a few methods each:</p>

<ul>
<li>species

<ul>
<li><code>name_backbone()</code></li>
<li><code>name_suggest()</code></li>
</ul></li>
<li>registry

<ul>
<li><code>nodes()</code></li>
<li><code>dataset_metrics()</code></li>
<li><code>datasets()</code></li>
</ul></li>
<li>occurrences

<ul>
<li><code>search()</code></li>
<li><code>get()</code></li>
<li><code>get_verbatim()</code></li>
<li><code>get_fragment()</code></li>
<li><code>count()</code></li>
<li><code>count_basisofrecord()</code></li>
<li><code>count_year()</code></li>
<li><code>count_datasets()</code></li>
<li><code>count_countries()</code></li>
<li><code>count_publishingcountries()</code></li>
<li><code>count_schema()</code></li>
</ul></li>
</ul>

<p>Here&#39;s a quick intro (<a href="https://github.com/sckott/pygbif/blob/master/demos/pygbif-intro.ipynb">in a Jupyter notebook</a>):</p>

<h3>Install</h3>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">pip</span> <span class="n">install</span> <span class="n">pygbif</span>
</code></pre></div>
<h3>Registry/datasets</h3>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">pygbif</span> <span class="kn">import</span> <span class="n">registry</span>
<span class="n">registry</span><span class="o">.</span><span class="n">dataset_metrics</span><span class="p">(</span><span class="n">uuid</span><span class="o">=</span><span class="s">&#39;3f8a1297-3259-4700-91fc-acc4170b27ce&#39;</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre><code class="language-python" data-lang="python"><span class="p">{</span><span class="s">u&#39;colCoveragePct&#39;</span><span class="p">:</span> <span class="mi">79</span><span class="p">,</span>
 <span class="s">u&#39;colMatchingCount&#39;</span><span class="p">:</span> <span class="mi">24335</span><span class="p">,</span>
 <span class="s">u&#39;countByConstituent&#39;</span><span class="p">:</span> <span class="p">{},</span>
 <span class="s">u&#39;countByIssue&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">u&#39;BACKBONE_MATCH_FUZZY&#39;</span><span class="p">:</span> <span class="mi">573</span><span class="p">,</span>
  <span class="s">u&#39;BACKBONE_MATCH_NONE&#39;</span><span class="p">:</span> <span class="mi">1306</span><span class="p">,</span>
  <span class="s">u&#39;VERNACULAR_NAME_INVALID&#39;</span><span class="p">:</span> <span class="mi">7777</span><span class="p">},</span>
 <span class="s">u&#39;countByKingdom&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">u&#39;ANIMALIA&#39;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
  <span class="s">u&#39;FUNGI&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
  <span class="s">u&#39;INCERTAE_SEDIS&#39;</span><span class="p">:</span> <span class="mi">26</span><span class="p">,</span>
  <span class="s">u&#39;PLANTAE&#39;</span><span class="p">:</span> <span class="mi">10997</span><span class="p">,</span>
  <span class="s">u&#39;PROTOZOA&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span>
 <span class="o">...</span>
<span class="p">}</span>
</code></pre></div>
<h3>Taxonomic names</h3>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">pygbif</span> <span class="kn">import</span> <span class="n">species</span>
<span class="n">species</span><span class="o">.</span><span class="n">name_suggest</span><span class="p">(</span><span class="n">q</span><span class="o">=</span><span class="s">&#39;Puma concolor&#39;</span><span class="p">,</span> <span class="n">limit</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre><code class="language-python" data-lang="python"><span class="p">{</span><span class="s">&#39;data&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s">u&#39;canonicalName&#39;</span><span class="p">:</span> <span class="s">u&#39;Puma concolor&#39;</span><span class="p">,</span>
   <span class="s">u&#39;class&#39;</span><span class="p">:</span> <span class="s">u&#39;Mammalia&#39;</span><span class="p">,</span>
   <span class="s">u&#39;classKey&#39;</span><span class="p">:</span> <span class="mi">359</span><span class="p">,</span>
   <span class="s">u&#39;family&#39;</span><span class="p">:</span> <span class="s">u&#39;Felidae&#39;</span><span class="p">,</span>
   <span class="s">u&#39;familyKey&#39;</span><span class="p">:</span> <span class="mi">9703</span><span class="p">,</span>
   <span class="s">u&#39;genus&#39;</span><span class="p">:</span> <span class="s">u&#39;Puma&#39;</span><span class="p">,</span>
   <span class="s">u&#39;genusKey&#39;</span><span class="p">:</span> <span class="mi">2435098</span><span class="p">,</span>
   <span class="s">u&#39;key&#39;</span><span class="p">:</span> <span class="mi">2435099</span><span class="p">,</span>
   <span class="s">u&#39;kingdom&#39;</span><span class="p">:</span> <span class="s">u&#39;Animalia&#39;</span><span class="p">,</span>
   <span class="s">u&#39;kingdomKey&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
   <span class="s">u&#39;nubKey&#39;</span><span class="p">:</span> <span class="mi">2435099</span><span class="p">,</span>
   <span class="s">u&#39;order&#39;</span><span class="p">:</span> <span class="s">u&#39;Carnivora&#39;</span><span class="p">,</span>
   <span class="s">u&#39;orderKey&#39;</span><span class="p">:</span> <span class="mi">732</span><span class="p">,</span>
   <span class="s">u&#39;parent&#39;</span><span class="p">:</span> <span class="s">u&#39;Puma&#39;</span><span class="p">,</span>
   <span class="s">u&#39;parentKey&#39;</span><span class="p">:</span> <span class="mi">2435098</span><span class="p">,</span>
   <span class="s">u&#39;phylum&#39;</span><span class="p">:</span> <span class="s">u&#39;Chordata&#39;</span><span class="p">,</span>
   <span class="s">u&#39;phylumKey&#39;</span><span class="p">:</span> <span class="mi">44</span><span class="p">,</span>
   <span class="s">u&#39;rank&#39;</span><span class="p">:</span> <span class="s">u&#39;SPECIES&#39;</span><span class="p">,</span>
   <span class="s">u&#39;species&#39;</span><span class="p">:</span> <span class="s">u&#39;Puma concolor&#39;</span><span class="p">,</span>
   <span class="s">u&#39;speciesKey&#39;</span><span class="p">:</span> <span class="mi">2435099</span><span class="p">}],</span>
 <span class="s">&#39;hierarchy&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s">u&#39;1&#39;</span><span class="p">:</span> <span class="s">u&#39;Animalia&#39;</span><span class="p">,</span>
   <span class="s">u&#39;2435098&#39;</span><span class="p">:</span> <span class="s">u&#39;Puma&#39;</span><span class="p">,</span>
   <span class="s">u&#39;359&#39;</span><span class="p">:</span> <span class="s">u&#39;Mammalia&#39;</span><span class="p">,</span>
   <span class="s">u&#39;44&#39;</span><span class="p">:</span> <span class="s">u&#39;Chordata&#39;</span><span class="p">,</span>
   <span class="s">u&#39;732&#39;</span><span class="p">:</span> <span class="s">u&#39;Carnivora&#39;</span><span class="p">,</span>
   <span class="s">u&#39;9703&#39;</span><span class="p">:</span> <span class="s">u&#39;Felidae&#39;</span><span class="p">}]}</span>
</code></pre></div>
<h3>Occurrence data</h3>

<p>Search</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">pygbif</span> <span class="kn">import</span> <span class="n">occurrences</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">occurrences</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">taxonKey</span> <span class="o">=</span> <span class="mi">3329049</span><span class="p">,</span> <span class="n">limit</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span>
<span class="p">[</span> <span class="n">x</span><span class="p">[</span><span class="s">&#39;phylum&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">res</span><span class="p">[</span><span class="s">&#39;results&#39;</span><span class="p">]</span> <span class="p">]</span>
</code></pre></div><div class="highlight"><pre><code class="language-python" data-lang="python"><span class="p">[</span><span class="s">u&#39;Basidiomycota&#39;</span><span class="p">,</span>
 <span class="s">u&#39;Basidiomycota&#39;</span><span class="p">,</span>
 <span class="s">u&#39;Basidiomycota&#39;</span><span class="p">,</span>
 <span class="s">u&#39;Basidiomycota&#39;</span><span class="p">,</span>
 <span class="s">u&#39;Basidiomycota&#39;</span><span class="p">,</span>
 <span class="s">u&#39;Basidiomycota&#39;</span><span class="p">,</span>
 <span class="s">u&#39;Basidiomycota&#39;</span><span class="p">,</span>
 <span class="s">u&#39;Basidiomycota&#39;</span><span class="p">,</span>
 <span class="s">u&#39;Basidiomycota&#39;</span><span class="p">,</span>
 <span class="s">u&#39;Basidiomycota&#39;</span><span class="p">]</span>
</code></pre></div>
<p>Fetch specific occurrences</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">occurrences</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span> <span class="o">=</span> <span class="mi">252408386</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre><code class="language-python" data-lang="python"><span class="p">{</span><span class="s">u&#39;basisOfRecord&#39;</span><span class="p">:</span> <span class="s">u&#39;OBSERVATION&#39;</span><span class="p">,</span>
 <span class="s">u&#39;catalogNumber&#39;</span><span class="p">:</span> <span class="s">u&#39;70875196&#39;</span><span class="p">,</span>
 <span class="s">u&#39;collectionCode&#39;</span><span class="p">:</span> <span class="s">u&#39;7472&#39;</span><span class="p">,</span>
 <span class="s">u&#39;continent&#39;</span><span class="p">:</span> <span class="s">u&#39;EUROPE&#39;</span><span class="p">,</span>
 <span class="s">u&#39;country&#39;</span><span class="p">:</span> <span class="s">u&#39;United Kingdom&#39;</span><span class="p">,</span>
 <span class="s">u&#39;countryCode&#39;</span><span class="p">:</span> <span class="s">u&#39;GB&#39;</span><span class="p">,</span>
 <span class="s">u&#39;datasetKey&#39;</span><span class="p">:</span> <span class="s">u&#39;26a49731-9457-45b2-9105-1b96063deb26&#39;</span><span class="p">,</span>
 <span class="s">u&#39;day&#39;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
<span class="o">...</span>
<span class="p">}</span>
</code></pre></div>
<p>Occurrence counts API</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">occurrences</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">isGeoreferenced</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre><code class="language-python" data-lang="python"><span class="mi">500283031</span>
</code></pre></div>
<h3>feedback</h3>

<p>Would love any feedback...</p>

  </div>
  
</div>

<!-- Pagination links -->
<div class="pagination">
  
    <a href="/page2" class="older">Older</a>
  
  
    <span class="previous">Newer</span>
  
</div>

    </div>

    <!-- for bootstrap tooltips -->
    <script type="text/javascript">
      $("[data-toggle=\"tooltip\"]").tooltip();
    </script>

  </body>

  <footer>
  <!-- Disqus code -->
  <script type="text/javascript">
      /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
      var disqus_shortname = 'recology'; // required: replace example with your forum shortname

      /* * * DON'T EDIT BELOW THIS LINE * * */
      (function () {
          var s = document.createElement('script'); s.async = true;
          s.type = 'text/javascript';
          s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
          (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
      }());
  </script>

  <!-- google analytics -->
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-63197374-1', 'auto');
    ga('send', 'pageview');
  </script>
</footer>

</html>
